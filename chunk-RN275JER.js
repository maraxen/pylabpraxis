import{a as zt,b as Yt,d as Xt,e as Zt,f as Jt,g as ei,h as We}from"./chunk-BRQ7VCIS.js";import{B as Bt,f as Tt,h as It,k as Vt,r as jt,s as Lt,v as Gt,y as Ht}from"./chunk-F4M4TAIC.js";import{l as qt}from"./chunk-FGBSBVHW.js";import{$ as Ut,B as Mt,C as Dt,E as Be,F as Pe,H as Nt,J as Ne,T as Wt,W as E,Y as Qt,ba as $,c as kt,da as K,ea as $t,f as xe,g as Rt,ja as pe,l as xt,m as Pt,oa as Kt,u as St}from"./chunk-YMB734HE.js";import{E as At,F as Et,G as wt,l as Re,s as Ft}from"./chunk-Q6UYEA4T.js";import{$ as ye,$b as re,Aa as I,Ac as ke,B as st,Ba as Ce,Bb as C,Bc as Ve,Ca as ut,Cb as Fe,Cc as je,Db as F,F as G,G as H,Gb as A,Hb as ft,Ib as Ae,K as ot,L as ge,La as Oe,Ma as P,N as rt,Na as w,Nc as U,O as at,Pa as N,Rb as Ie,Tc as Le,Ub as mt,Uc as Ge,Wb as gt,Wc as He,X as ee,Xb as yt,Y as T,Yb as oe,ac as _t,bc as vt,da as _e,e as me,ga as lt,gb as ht,h as X,ha as ve,hc as bt,hd as ce,ia as be,j as Z,ka as te,kc as ae,la as B,ld as V,ma as u,mc as Ct,nc as Ee,oc as we,pc as le,qa as ct,qb as dt,qc as Q,r as x,rb as W,rc as _,sb as ne,sc as v,t as D,ub as se,vb as m,w as J,wa as ie,xa as pt,xb as k,yc as Ot}from"./chunk-ZXFVGPYG.js";import{a as g,b as Y,d as nt,e as fe}from"./chunk-RNQFGQA5.js";var mi=["container"];function gi(s,n){}function yi(s,n){}var _i=["*"];function vi(s,n){if(s&1&&re(0,"formly-field",0),s&2){let e=n.$implicit;oe("field",e)}}var ti=["fieldComponent"];function bi(s,n){let e=s._updateTreeValidity.bind(s);s._updateTreeValidity=()=>{},n(),s._updateTreeValidity=e}function Ci(s,n,e){if(n.id)return n.id;let t=n.type;return!t&&n.template&&(t="template"),t instanceof Oe&&(t=t.prototype.constructor.name),[s,t,n.key,e].join("_")}function c(s){return!M(s.key)&&s.key!==""&&(!Array.isArray(s.key)||s.key.length>0)}function L(s){if(!c(s))return[];if(s._keyPath?.key!==s.key){let n=[];if(typeof s.key=="string"){let e=s.key.indexOf("[")===-1?s.key:s.key.replace(/\[(\w+)\]/g,".$1");n=e.indexOf(".")!==-1?e.split("."):[e]}else Array.isArray(s.key)?n=s.key.slice(0):n=[`${s.key}`];d(s,"_keyPath",{key:s.key,path:n})}return s._keyPath.path.slice(0)}var Xe=["required","pattern","minLength","maxLength","min","max"];function z(s,n){let e=L(s);if(e.length===0)return;let t=s;for(;t.parent;)t=t.parent,e=[...L(t),...e];if(n===void 0&&s.resetOnHide){let i=e.pop(),o=e.reduce((r,a)=>r[a]||{},t.model);delete o[i];return}Oi(t.model,e,n)}function Oi(s,n,e){for(let t=0;t<n.length-1;t++){let i=n[t];(!s[i]||!O(s[i]))&&(s[i]=/^\d+$/.test(n[t+1])?[]:{}),s=s[i]}s[n[n.length-1]]=b(e)}function S(s){let n=s.parent?s.parent.model:s.model;for(let e of L(s)){if(!n)return n;n=n[e]}return n}function q(s,...n){return n.forEach(e=>{for(let t in e)M(s[t])||Fi(s[t])?s[t]=b(e[t]):Ai(s[t],e[t])&&q(s[t],e[t])}),s}function M(s){return s==null}function Se(s){return s===void 0}function Fi(s){return s===""}function Qe(s){return typeof s=="function"}function Ai(s,n){return O(s)&&O(n)&&Object.getPrototypeOf(s)===Object.getPrototypeOf(n)&&!(Array.isArray(s)||Array.isArray(n))}function O(s){return s!=null&&typeof s=="object"}function Ei(s){return!!s&&typeof s.then=="function"}function b(s){if(!O(s)||D(s)||s instanceof W||s.changingThisBreaksApplicationSecurity||["RegExp","FileList","File","Blob"].indexOf(s.constructor?.name)!==-1)return s;if(s instanceof Set)return new Set(s);if(s instanceof Map)return new Map(s);if(s instanceof Uint8Array)return new Uint8Array(s);if(s instanceof Uint16Array)return new Uint16Array(s);if(s instanceof Uint32Array)return new Uint32Array(s);if(s._isAMomentObject&&Qe(s.clone))return s.clone();if(s instanceof Ut)return null;if(s instanceof Date)return new Date(s.getTime());if(Array.isArray(s))return s.slice(0).map(t=>b(t));let n=Object.getPrototypeOf(s),e=Object.create(n);return e=Object.setPrototypeOf(e,n),Object.keys(s).reduce((t,i)=>{let o=Object.getOwnPropertyDescriptor(s,i);return o.get?Object.defineProperty(t,i,o):t[i]=b(s[i]),t},e)}function d(s,n,e){Object.defineProperty(s,n,{enumerable:!1,writable:!0,configurable:!0}),s[n]=e}function Ze(s,n,e){let t=[],i=()=>{t.forEach(r=>r()),t=[]},o=h(s,n,({firstChange:r,currentValue:a})=>{!r&&e(),i(),O(a)&&a.constructor.name==="Object"&&Object.keys(a).forEach(l=>{t.push(Ze(s,[...n,l],e))})});return()=>{o.unsubscribe(),i()}}function h(s,n,e){s._observers||d(s,"_observers",{});let t=s;for(let a=0;a<n.length-1;a++)(!t[n[a]]||!O(t[n[a]]))&&(t[n[a]]=/^\d+$/.test(n[a+1])?[]:{}),t=t[n[a]];let i=n[n.length-1],o=n.join(".");s._observers[o]||(s._observers[o]={value:t[i],onChange:[]});let r=s._observers[o];if(t[i]!==r.value&&(r.value=t[i]),e&&r.onChange.indexOf(e)===-1&&(r.onChange.push(e),e({currentValue:r.value,firstChange:!0}),r.onChange.length>=1&&O(t))){let{enumerable:a}=Object.getOwnPropertyDescriptor(t,i)||{enumerable:!0};Object.defineProperty(t,i,{enumerable:a,configurable:!0,get:()=>r.value,set:l=>{if(l!==r.value){let p=r.value;r.value=l,r.onChange.forEach(y=>y({previousValue:p,currentValue:l,firstChange:!1}))}}})}return{setValue(a,l=!0){if(a===r.value)return;let p=r.value;r.value=a,r.onChange.forEach(y=>{y!==e&&l&&y({previousValue:p,currentValue:a,firstChange:!1})})},unsubscribe(){r.onChange=r.onChange.filter(a=>a!==e),r.onChange.length===0&&delete s._observers[o]}}}function si(s,n){if(n=Array.isArray(n)?n.join("."):n,!!s.fieldGroup)for(let e=0,t=s.fieldGroup.length;e<t;e++){let i=s.fieldGroup[e],o=Array.isArray(i.key)?i.key.join("."):i.key;if(o===n)return i;if(i.fieldGroup&&(M(o)||n.indexOf(`${o}.`)===0)){let r=si(i,M(o)?n:n.slice(o.length+1));if(r)return r}}}function Ue(s){s._componentRefs?.forEach(n=>{n instanceof ne?n.injector.get(ce).markForCheck():n.markForCheck()})}function wi(s){return s instanceof ut}function oi(s){let n=t=>t.hide||t.expressions?.hide||t.hideExpression,e=!s.resetOnHide||!n(s);if(!n(s)&&s.resetOnHide){let t=s.parent;for(;t&&!n(t);)t=t.parent;e=!t||!n(t)}return!e}function De(){return+_e.major>18||+_e.major>=18&&+_e.minor>=1}function ki(s,n){try{return Function(...n,`return ${s};`)}catch(e){console.error(e)}}function Ri(s,n,e){return typeof s=="function"?s.apply(n,e):!!s}function $e(s,n=!1){let e=s.formControl,t=e._fields?e._fields.indexOf(s):-1;t!==-1&&e._fields.splice(t,1);let i=e.parent;if(!i)return;let o={emitEvent:n};if(i instanceof pe){let r=i.controls.findIndex(a=>a===e);r!==-1&&i.removeAt(r,o)}else if(i instanceof $){let r=L(s),a=r[r.length-1];i.get([a])===e&&i.removeControl(a,o)}e.setParent(null)}function ri(s){return s.formControl?s.formControl:s.shareFormControl===!1?null:s.form?.get(L(s))}function Je(s,n,e=!1){if(n=n||s.formControl,n._fields||d(n,"_fields",[]),n._fields.indexOf(s)===-1&&n._fields.push(s),!s.formControl&&n){d(s,"formControl",n),n.setValidators(null),n.setAsyncValidators(null),s.props.disabled=!!s.props.disabled;let a=h(s,["props","disabled"],({firstChange:l,currentValue:p})=>{l||(p?s.formControl.disable():s.formControl.enable())});n instanceof K&&n.registerOnDisabledChange(a.setValue)}if(!s.form||!c(s))return;let t=s.form,i=L(s),o=S(s);!(M(n.value)&&M(o))&&n.value!==o&&n instanceof K&&n.patchValue(o);for(let a=0;a<i.length-1;a++){let l=i[a];t.get([l])||t.setControl(l,new $({}),{emitEvent:e}),t=t.get([l])}let r=i[i.length-1];!s._hide&&t.get([r])!==n&&t.setControl(r,n,{emitEvent:e})}function ue(s,n=!1){let e=s.status,t=s.value;s.updateValueAndValidity({emitEvent:!1,onlySelf:n}),e!==s.status&&s.statusChanges.emit(s.status),t!==s.value&&s.valueChanges.emit(s.value)}function ai(s){delete s?._fields,s.setValidators(null),s.setAsyncValidators(null),(s instanceof $||s instanceof pe)&&Object.values(s.controls).forEach(n=>ai(n))}var Ke=class{onPopulate(n){if(n._expressions)return;d(n,"_expressions",{}),h(n,["hide"],({currentValue:t,firstChange:i})=>{d(n,"_hide",!!t),(!i||i&&t===!0)&&(n.props.hidden=t,n.options._hiddenFieldsForCheck.push({field:n}))}),n.hideExpression&&h(n,["hideExpression"],({currentValue:t})=>{n._expressions.hide=this.parseExpressions(n,"hide",typeof t=="boolean"?()=>t:t)});let e=(t,i)=>{typeof i=="string"||Qe(i)?n._expressions[t]=this.parseExpressions(n,t,i):i instanceof X&&(n._expressions[t]={value$:i.pipe(ye(o=>{this.evalExpr(n,t,o),n.options._detectChanges(n)}))})};n.expressions=n.expressions||{};for(let t of Object.keys(n.expressions))h(n,["expressions",t],({currentValue:i})=>{e(t,Qe(i)?(...o)=>i(n,o[3]):i)});n.expressionProperties=n.expressionProperties||{};for(let t of Object.keys(n.expressionProperties))h(n,["expressionProperties",t],({currentValue:i})=>e(t,i))}postPopulate(n){if(!n.parent&&!n.options.checkExpressions){let e=!1;n.options.checkExpressions=(t,i)=>{if(e)return;e=!0;let o=this.checkExpressions(t,i),r=n.options;r._hiddenFieldsForCheck.sort(a=>a.field.hide?-1:1).forEach(a=>this.changeHideState(a.field,a.field.hide??a.default,!i)),r._hiddenFieldsForCheck=[],o&&this.checkExpressions(n),e=!1}}}parseExpressions(n,e,t){let i;if(n.parent&&["hide","props.disabled"].includes(e)){let r=a=>e==="hide"?a.hide:a.props.disabled;i=()=>{let a=n.parent;for(;a.parent&&!r(a);)a=a.parent;return r(a)}}t=t||(()=>!1),typeof t=="string"&&(t=ki(t,["model","formState","field"]));let o;return{callback:r=>{try{let a=Ri(i?(...l)=>i(n)||t(...l):t,{field:n},[n.model,n.options.formState,n,r]);return r||o!==a&&(!O(a)||D(a)||JSON.stringify(a)!==JSON.stringify(o))?(o=a,this.evalExpr(n,e,a),!0):!1}catch(a){throw a.message=`[Formly Error] [Expression "${e}"] ${a.message}`,a}}}}checkExpressions(n,e=!1){if(!n)return!1;let t=!1;if(n._expressions)for(let i of Object.keys(n._expressions))n._expressions[i].callback?.(e)&&(t=!0);return n.fieldGroup?.forEach(i=>this.checkExpressions(i,e)&&(t=!0)),t}changeDisabledState(n,e){n.fieldGroup&&n.fieldGroup.filter(t=>!t._expressions.hasOwnProperty("props.disabled")).forEach(t=>this.changeDisabledState(t,e)),c(n)&&n.props.disabled!==e&&(n.props.disabled=e)}changeHideState(n,e,t){if(n.fieldGroup&&n.fieldGroup.filter(i=>i&&!i._expressions.hide).forEach(i=>this.changeHideState(i,e,t)),n.formControl&&c(n)){d(n,"_hide",!!(e||n.hide));let i=n.formControl;i._fields?.length>1&&ue(i),e===!0&&(!i._fields||i._fields.every(o=>!!o._hide))?($e(n,!0),t&&n.resetOnHide&&(z(n,void 0),n.formControl.reset({value:void 0,disabled:n.formControl.disabled}),n.options.fieldChanges.next({value:void 0,field:n,type:"valueChanges"}),n.fieldGroup&&n.formControl instanceof pe&&(n.fieldGroup.length=0))):e===!1&&(n.resetOnHide&&!Se(n.defaultValue)&&Se(S(n))&&z(n,n.defaultValue),Je(n,void 0,!0),n.resetOnHide&&n.fieldArray&&n.fieldGroup?.length!==n.model?.length&&n.options.build(n))}n.options.fieldChanges&&n.options.fieldChanges.next({field:n,type:"hidden",value:e})}evalExpr(n,e,t){if(e.indexOf("model.")===0){let i=e.replace(/^model\./,""),o=n.fieldGroup?n:n.parent,r=n?.key===i?n.formControl:n.form.get(i);!r&&n.get(i)&&(r=n.get(i).formControl),z({key:i,parent:o,model:n.model},t),r&&!(M(r.value)&&M(t))&&r.value!==t&&r.patchValue(t)}else{try{let i=n,o=this._evalExpressionPath(n,e),r=o.length-1;for(let a=0;a<r;a++)i=i[o[a]];i[o[r]]=t}catch(i){throw i.message=`[Formly Error] [Expression "${e}"] ${i.message}`,i}["templateOptions.disabled","props.disabled"].includes(e)&&c(n)&&this.changeDisabledState(n,t)}this.emitExpressionChanges(n,e,t)}emitExpressionChanges(n,e,t){n.options.fieldChanges&&n.options.fieldChanges.next({field:n,type:"expressionChanges",property:e,value:t})}_evalExpressionPath(n,e){if(n._expressions[e]&&n._expressions[e].paths)return n._expressions[e].paths;let t=[];return e.indexOf("[")===-1?t=e.split("."):e.split(/[[\]]{1,2}/).filter(i=>i).forEach(i=>{let o=i.match(/['|"](.*?)['|"]/);o?t.push(o[1]):t.push(...i.split(".").filter(r=>r))}),n._expressions[e]&&(n._expressions[e].paths=t),t}},qe=class{constructor(n){this.config=n,this.formId=0}prePopulate(n){let e=n.parent;this.initRootOptions(n),this.initFieldProps(n),e&&(Object.defineProperty(n,"options",{get:()=>e.options,configurable:!0}),Object.defineProperty(n,"model",{get:()=>c(n)&&n.fieldGroup?S(n):e.model,configurable:!0})),Object.defineProperty(n,"get",{value:t=>si(n,t),configurable:!0}),this.getFieldComponentInstance(n).prePopulate?.(n)}onPopulate(n){this.initFieldOptions(n),this.getFieldComponentInstance(n).onPopulate?.(n),n.fieldGroup&&n.fieldGroup.forEach((e,t)=>{e&&(Object.defineProperty(e,"parent",{get:()=>n,configurable:!0}),Object.defineProperty(e,"index",{get:()=>t,configurable:!0})),this.formId++})}postPopulate(n){this.getFieldComponentInstance(n).postPopulate?.(n)}initFieldProps(n){n.props??=n.templateOptions,Object.defineProperty(n,"templateOptions",{get:()=>n.props,set:e=>n.props=e,configurable:!0})}initRootOptions(n){if(n.parent)return;let e=n.options;n.options.formState=n.options.formState||{},e.showError||(e.showError=this.config.extras.showError),e.fieldChanges||d(e,"fieldChanges",new Z),e._hiddenFieldsForCheck||(e._hiddenFieldsForCheck=[]),e._detectChanges=t=>{t._componentRefs&&Ue(t),t.fieldGroup?.forEach(i=>i&&e._detectChanges(i))},e.detectChanges=t=>{t.options.checkExpressions?.(t),e._detectChanges(t)},e.resetModel=t=>{t=b(t??e._initialModel),n.model&&(Object.keys(n.model).forEach(i=>delete n.model[i]),Object.assign(n.model,t||{})),De()||h(e,["parentForm","submitted"]).setValue(!1,!1),e.build(n),n.form.reset(n.model)},e.updateInitialValue=t=>e._initialModel=b(t??n.model),n.options.updateInitialValue()}initFieldOptions(n){q(n,{id:Ci(`formly_${this.formId}`,n,n.index),hooks:{},modelOptions:{},validation:{messages:{}},props:!n.type||!c(n)?{}:{label:"",placeholder:"",disabled:!1}}),this.config.extras.resetFieldOnHide&&n.resetOnHide!==!1&&(n.resetOnHide=!0),n.type!=="formly-template"&&(n.template||n.expressions?.template||n.expressionProperties?.template)&&(n.type="formly-template"),!n.type&&n.fieldGroup&&(n.type="formly-group"),n.type&&this.config.getMergedField(n),c(n)&&!Se(n.defaultValue)&&Se(S(n))&&!oi(n)&&z(n,n.defaultValue),n.wrappers=n.wrappers||[]}getFieldComponentInstance(n){let e=()=>{let t=this.config.resolveFieldTypeRef(n),i=n._componentRefs?.slice(-1)[0];return i instanceof ne&&i?.componentType===t?.componentType&&(t=i),t?.instance};return n._proxyInstance||d(n,"_proxyInstance",new Proxy({},{get:(t,i)=>e()?.[i],set:(t,i,o)=>e()[i]=o})),n._proxyInstance}},ze=class{prePopulate(n){this.root||(this.root=n),n.parent&&Object.defineProperty(n,"form",{get:()=>n.parent.formControl,configurable:!0})}onPopulate(n){n.hasOwnProperty("fieldGroup")&&!c(n)?d(n,"formControl",n.form):this.addFormControl(n)}postPopulate(n){if(this.root!==n)return;if(this.root=null,this.setValidators(n)&&n.parent){let t=n.parent;for(;t;)(c(t)||!t.parent)&&ue(t.formControl,!0),t=t.parent}}addFormControl(n){let e=ri(n);if(!n.fieldArray){if(e){if(e instanceof K){let t=c(n)?S(n):n.defaultValue;e.defaultValue=t}}else{let t={updateOn:n.modelOptions.updateOn};if(n.fieldGroup)e=new $({},t);else{let i=c(n)?S(n):n.defaultValue;e=new $t({value:i,disabled:!!n.props.disabled},Y(g({},t),{initialValueIsDefault:!0}))}}Je(n,e)}}setValidators(n,e=!1){e===!1&&c(n)&&n.props?.disabled&&(e=!0);let t=!1;if(n.fieldGroup?.forEach(i=>i&&this.setValidators(i,e)&&(t=!0)),c(n)||!n.parent||!c(n)&&!n.fieldGroup){let{formControl:i}=n;if(i&&(c(n)&&i instanceof K&&(e&&i.enabled&&(i.disable({emitEvent:!1,onlySelf:!0}),t=!0),!e&&i.disabled&&(i.enable({emitEvent:!1,onlySelf:!0}),t=!0)),i.validator===null&&this.hasValidators(n,"_validators")&&(i.setValidators(()=>{let o=E.compose(this.mergeValidators(n,"_validators"));return o?o(i):null}),t=!0),i.asyncValidator===null&&this.hasValidators(n,"_asyncValidators")&&(i.setAsyncValidators(()=>{let o=E.composeAsync(this.mergeValidators(n,"_asyncValidators"));return o?o(i):x(null)}),t=!0),t)){ue(i,!0);let o=i.parent;for(let r=1;r<L(n).length;r++)o&&(ue(o,!0),o=o.parent)}}return t}hasValidators(n,e){let t=n.formControl;return t?._fields?.length>1&&t._fields.some(i=>i[e].length>0)||n[e].length>0?!0:n.fieldGroup?.some(i=>i?.fieldGroup&&!c(i)&&this.hasValidators(i,e))}mergeValidators(n,e){let t=[],i=n.formControl;return i?._fields?.length>1?i._fields.filter(o=>!o._hide).forEach(o=>t.push(...o[e])):n[e]&&t.push(...n[e]),n.fieldGroup&&n.fieldGroup.filter(o=>o?.fieldGroup&&!c(o)).forEach(o=>t.push(...this.mergeValidators(o,e))),t}},Ye=class{constructor(n){this.config=n}onPopulate(n){this.initFieldValidation(n,"validators"),this.initFieldValidation(n,"asyncValidators")}initFieldValidation(n,e){let t=[];if(e==="validators"&&!(n.hasOwnProperty("fieldGroup")&&!c(n))&&t.push(this.getPredefinedFieldValidation(n)),n[e])for(let i of Object.keys(n[e]))i==="validation"?t.push(...n[e].validation.map(o=>this.wrapNgValidatorFn(n,o))):t.push(this.wrapNgValidatorFn(n,n[e][i],i));d(n,"_"+e,t)}getPredefinedFieldValidation(n){let e=[];return Xe.forEach(t=>h(n,["props",t],({currentValue:i,firstChange:o})=>{e=e.filter(r=>r!==t),t==="required"&&i!=null&&typeof i!="boolean"&&console.warn(`Formly: Invalid prop 'required' of type '${typeof i}', expected 'boolean' (Field:${n.key}).`),i!=null&&i!==!1&&e.push(t),!o&&n.formControl&&ue(n.formControl)})),t=>e.length===0?null:E.compose(e.map(i=>()=>{let o=n.props[i];switch(i){case"required":return E.required(t);case"pattern":return E.pattern(o)(t);case"minLength":let r=E.minLength(o)(t),a=this.config.getValidatorMessage("minlength")||n.validation?.messages?.minlength?"minlength":"minLength";return r?{[a]:r.minlength}:null;case"maxLength":let l=E.maxLength(o)(t),p=this.config.getValidatorMessage("maxlength")||n.validation?.messages?.maxlength?"maxlength":"maxLength";return l?{[p]:l.maxlength}:null;case"min":return E.min(o)(t);case"max":return E.max(o)(t);default:return null}}))(t)}wrapNgValidatorFn(n,e,t){let i;if(typeof e=="string"&&(i=b(this.config.getValidator(e))),typeof e=="object"&&e.name&&(i=b(this.config.getValidator(e.name)),e.options&&(i.options=e.options)),typeof e=="object"&&e.expression){let o=e,{expression:r}=o,a=fe(o,["expression"]);i={name:t,validation:r,options:Object.keys(a).length>0?a:null}}return typeof e=="function"&&(i={name:t,validation:e}),r=>{let a=i.validation(r,n,i.options);return Ei(a)?a.then(l=>this.handleResult(n,t?!!l:l,i)):D(a)?a.pipe(J(l=>this.handleResult(n,t?!!l:l,i))):this.handleResult(n,t?!!a:a,i)}}handleResult(n,e,{name:t,options:i}){typeof e=="boolean"&&(e=e?null:{[t]:i||!0});let o=n.formControl;return o?._childrenErrors?.[t]?.(),O(e)&&Object.keys(e).forEach(r=>{let a=e[r].errorPath?e[r].errorPath:i?.errorPath,l=a?n.formControl.get(a):null;if(l){let p=e[r],{errorPath:y}=p,f=fe(p,["errorPath"]);l.setErrors(Y(g({},l.errors||{}),{[r]:f})),!o._childrenErrors&&d(o,"_childrenErrors",{}),o._childrenErrors[r]=()=>{let it=l.errors||{},{[r]:R}=it,tt=fe(it,[nt(r)]);l.setErrors(Object.keys(tt).length===0?null:tt)}}}),e}},Te=(()=>{class s{constructor(){this.field={}}set _formlyControls(e){let t=this.field;t._localFields=e.map(i=>i.control._fields||[]).flat().filter(i=>i.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275dir=F({type:s,viewQuery:function(t,i){if(t&1&&Q(Qt,5),t&2){let o;_(o=v())&&(i._formlyControls=o)}},inputs:{field:"field"},standalone:!1})}}return s})(),xi=(()=>{class s extends Te{get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}constructor(e){super(),this.sanitizer=e,this.innerHtml={}}static{this.\u0275fac=function(t){return new(t||s)(m(At))}}static{this.\u0275cmp=C({type:s,selectors:[["formly-template"]],standalone:!1,features:[A],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(t,i){t&1&&re(0,"div",0),t&2&&oe("innerHtml",i.template,ht)},encapsulation:2,changeDetection:0})}}return s})(),j=(()=>{class s{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError(e){return e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)}},this.extensions={},this.presets={},this.extensionsByPriority={},this.componentRefs={}}addConfig(e){if(Array.isArray(e)){e.forEach(t=>this.addConfig(t));return}e.types&&e.types.forEach(t=>this.setType(t)),e.validators&&e.validators.forEach(t=>this.setValidator(t)),e.wrappers&&e.wrappers.forEach(t=>this.setWrapper(t)),e.validationMessages&&e.validationMessages.forEach(t=>this.addValidatorMessage(t.name,t.message)),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras=g(g({},this.extras),e.extras)),e.presets&&(this.presets=g(g({},this.presets),e.presets.reduce((t,i)=>Y(g({},t),{[i.name]:i.config}),{})))}setType(e){Array.isArray(e)?e.forEach(t=>this.setType(t)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(t=>{e.hasOwnProperty(t)&&(this.types[e.name][t]=e[t])}))}getType(e,t=!1){if(e instanceof Oe)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(t)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){let t=this.getType(e.type);if(!t)return;t.defaultOptions&&q(e,t.defaultOptions);let i=t.extends&&this.getType(t.extends).defaultOptions;i&&q(e,i),e?.optionsTypes&&e.optionsTypes.forEach(r=>{let a=this.getType(r).defaultOptions;a&&q(e,a)});let o=this.resolveFieldTypeRef(e);o?.instance?.defaultOptions&&q(e,o.instance.defaultOptions),!e.wrappers&&t.wrappers&&(e.wrappers=[...t.wrappers])}resolveFieldTypeRef(e={}){let t=this.getType(e.type);if(!t||!t.component)return null;if(!this.componentRefs[t.name]){let{_viewContainerRef:i,_injector:o}=e.options;if(!i||!o)return null;let r=i.createComponent(t.component,{injector:o});this.componentRefs[t.name]=r;try{r.destroy()}catch(a){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,a)}}return this.componentRefs[t.name]}clearRefs(){this.componentRefs={}}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(t=>{this.setTypeWrapper(t,e.name)})}getWrapper(e){if(e instanceof Oe)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,t){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),this.types[e].wrappers.indexOf(t)===-1&&this.types[e].wrappers.push(t)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,t){this.messages[e]=t}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach(t=>{let i=t.priority??1;this.extensionsByPriority[i]=Y(g({},this.extensionsByPriority[i]),{[t.name]:t.extension})}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((t,i)=>t-i).reduce((t,i)=>g(g({},t),this.extensionsByPriority[i]),{})}mergeExtendedType(e){if(!this.types[e].extends)return;let t=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=t.component),this.types[e].wrappers||(this.types[e].wrappers=t.wrappers)}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=ve({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),li=(()=>{class s{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}static{this.\u0275fac=function(t){return new(t||s)(m(W))}}static{this.\u0275dir=F({type:s,selectors:[["","formlyTemplate",""]],inputs:{name:[0,"formlyTemplate","name"]},features:[P]})}}return s})(),Pi=(()=>{class s extends li{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275dir=F({type:s,selectors:[["","formlyTemplate",""]],standalone:!1,features:[A]})}}return s})(),Me=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=ve({token:s,factory:s.\u0275fac})}}return s})(),ci=(()=>{class s{get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof ne?this.componentRefs[0].location:null}constructor(e,t,i,o,r){this.config=e,this.renderer=t,this._elementRef=i,this.hostContainerRef=o,this.form=r,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e.unsubscribe()),this.hooksObservers.forEach(e=>e()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,t,i=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),i=this.field?.wrappers),i?.length>0){let[o,...r]=i,{component:a}=this.config.getWrapper(o),l=e.createComponent(a);this.attachComponentRef(l,t),h(l.instance,["fieldComponent"],({currentValue:p,previousValue:y,firstChange:f})=>{if(p){if(y&&y._lContainer===p._lContainer)return;let R=y?y.detach():null;R&&!R.destroyed?p.insert(R):this.renderField(p,t,r),!f&&l.changeDetectorRef.detectChanges()}})}else if(t?.type){let o=this.form?.templates?.find(a=>a.name===t.type),r;if(o)r=e.createEmbeddedView(o.ref,{$implicit:t});else{let{component:a}=this.config.getType(t.type,!0);r=e.createComponent(a)}this.attachComponentRef(r,t)}}triggerHook(e,t){if((e==="onInit"||e==="onChanges"&&t.field&&!t.field.firstChange)&&(this.valueChangesUnsubscribe(),this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!t||t.field)){let i=this.field.hooks[e](this.field);if(D(i)&&["onInit","afterContentInit","afterViewInit"].indexOf(e)!==-1){let o=i.subscribe();this.hooksObservers.push(()=>o.unsubscribe())}}e==="onChanges"&&t.field&&(this.resetRefs(t.field.previousValue),this.render())}attachComponentRef(e,t){this.componentRefs.push(e),t._componentRefs.push(e),e instanceof ne&&Object.assign(e.instance,{field:t})}render(){if(this.field){if(!this.field.options){this.detectFieldBuild=!0;return}if(this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e.unsubscribe()),this.hostObservers=[h(this.field,["hide"],({firstChange:e,currentValue:t})=>{let i=this.containerRef;this.config.extras.lazyRender===!1?(e&&this.renderField(i,this.field),(!e||e&&t)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",t?"none":"")):t?(i.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(i,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)}),h(this.field,["className"],({firstChange:e,currentValue:t})=>{(!e||e&&t)&&(!this.config.extras.lazyRender||this.field.hide!==!0)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",t)})],!De())["touched","pristine","status"].forEach(e=>this.hostObservers.push(h(this.field,["formControl",e],({firstChange:t})=>!t&&Ue(this.field))));else if(this.field.formControl){let e=this.field.formControl.events.subscribe(()=>Ue(this.field));this.hostObservers.push(e)}}}resetRefs(e){e&&(e._localFields?e._localFields=[]:d(this.field,"_localFields",[]),e._componentRefs?e._componentRefs=e._componentRefs.filter(t=>this.componentRefs.indexOf(t)===-1):d(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(!e)return()=>{};let t=Ze(e,["props"],()=>e.options.detectChanges(e)),i=[()=>{t()}];for(let r of Object.keys(e._expressions||{})){let a=h(e,["_expressions",r],({currentValue:l,previousValue:p})=>{p?.subscription&&(p.subscription.unsubscribe(),p.subscription=null),D(l.value$)&&(l.subscription=l.value$.subscribe())});i.push(()=>{e._expressions[r]?.subscription&&e._expressions[r].subscription.unsubscribe(),a.unsubscribe()})}for(let r of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){let a=h(e,r,({firstChange:l})=>!l&&e.options.detectChanges(e));i.push(()=>a.unsubscribe())}if(e.formControl&&!e.fieldGroup){let r=e.formControl,a=r.valueChanges.pipe(J(f=>(e.parsers?.map(R=>f=R(f,e)),Object.is(f,e.formControl.value)||e.formControl.setValue(f),f)),at((f,R)=>!(f!==R||Array.isArray(f)||O(f))));r.value!==S(e)&&(a=a.pipe(ee(r.value)));let{updateOn:l,debounce:p}=e.modelOptions;(!l||l==="change")&&p?.default>0&&(a=a.pipe(ot(p.default)));let y=a.subscribe(f=>{r._fields?.length>1&&r instanceof K&&r.patchValue(f,{emitEvent:!1,onlySelf:!0}),c(e)&&z(e,f),e.options.fieldChanges.next({value:f,field:e,type:"valueChanges"})});i.push(()=>y.unsubscribe())}let o=[];return h(e,["_localFields"],({currentValue:r})=>{o.forEach(a=>a()),o=(r||[]).map(a=>this.fieldChanges(a))}),()=>{i.forEach(r=>r()),o.forEach(r=>r())}}static{this.\u0275fac=function(t){return new(t||s)(m(j),m(se),m(N),m(k),m(Me,8))}}static{this.\u0275cmp=C({type:s,selectors:[["formly-field"]],viewQuery:function(t,i){if(t&1&&Q(mi,7,k),t&2){let o;_(o=v())&&(i.viewContainerRef=o.first)}},inputs:{field:"field"},features:[P],decls:2,vars:0,consts:[["container",""]],template:function(t,i){t&1&&Ae(0,gi,0,0,"ng-template",null,0,He)},styles:["[_nghost-%COMP%]:empty{display:none}"]})}}return s})(),pi=(()=>{class s extends ci{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275cmp=C({type:s,selectors:[["formly-field"]],standalone:!1,features:[A],decls:2,vars:0,consts:[["container",""]],template:function(t,i){t&1&&ft(0,yi,0,0,"ng-template",null,0,He)},styles:["[_nghost-%COMP%]:empty{display:none}"]})}}return s})(),Si=(()=>{class s extends Te{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275cmp=C({type:s,selectors:[["formly-group"]],hostVars:2,hostBindings:function(t,i){t&2&&ke(i.field.fieldGroupClassName||"")},standalone:!1,features:[A],ngContentSelectors:_i,decls:3,vars:0,consts:[[3,"field"]],template:function(t,i){t&1&&(Ee(),gt(0,vi,1,1,"formly-field",0,mt),we(2)),t&2&&yt(i.field.fieldGroup)},dependencies:[pi],encapsulation:2,changeDetection:0})}}return s})(),he=new te("FORMLY_CONFIG");function ii(s){return{types:[{name:"formly-group",component:Si},{name:"formly-template",component:xi}],extensions:[{name:"core",extension:new qe(s),priority:-250},{name:"field-validation",extension:new Ye(s),priority:-200},{name:"field-form",extension:new ze,priority:-150},{name:"field-expression",extension:new Ke,priority:-100}]}}var ni=(s=[])=>({provide:he,multi:!0,useFactory:()=>{let n=u(he,{skipSelf:!0,optional:!0});return n?(n.push(s),n):s}}),de=(()=>{class s{constructor(e,t,i,o,r=[]){this.config=e,this.injector=t,this.viewContainerRef=i,this.parentForm=o,r&&r.forEach(a=>e.addConfig(a))}buildForm(e,t=[],i,o){this.build({fieldGroup:t,model:i,form:e,options:o})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent||this._setOptions(e),bi(e.form,()=>{if(this._build(e),!e.parent||e.fieldArray){let t=e.options;e.parent&&oi(e)&&t._hiddenFieldsForCheck?.push({field:e,default:!1}),t.checkExpressions?.(e,!0),t._detectChanges?.(e)}})}_build(e){if(!e)return;let t=Object.values(this.config.extensions);t.forEach(i=>i.prePopulate?.(e)),t.forEach(i=>i.onPopulate?.(e)),e.fieldGroup?.forEach(i=>this._build(i)),t.forEach(i=>i.postPopulate?.(e))}_setOptions(e){e.form=e.form||new $({}),e.model=e.model||{},e.options=e.options||{};let t=e.options;t._viewContainerRef||d(t,"_viewContainerRef",this.viewContainerRef),t._injector||d(t,"_injector",this.injector),t.build||(t.build=(i=e)=>(this.build(i),i)),!t.parentForm&&this.parentForm&&(d(t,"parentForm",this.parentForm),De()||h(t,["parentForm","submitted"],({firstChange:i})=>{i||t.detectChanges(e)}))}static{this.\u0275fac=function(t){return new(t||s)(B(j),B(ie),B(k,8),B(Kt,8),B(he,8))}}static{this.\u0275prov=ve({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Mi=(()=>{class s{set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.config.extras.immutable&&this._modelChangeValue===e||this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}constructor(e,t,i,o){this.builder=e,this.config=t,this.ngZone=i,this.fieldTemplates=o,this.modelChange=new I,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}ngDoCheck(){this.config.extras.checkExpressionOn==="changeDetectionCheck"&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&ai(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe(),this.config.clearRefs()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();let e=null;if(De()){let o=this.options?.parentForm?.submitted;e=this.form.events.subscribe(()=>{o!==this.options?.parentForm?.submitted&&(this.options.detectChanges(this.field),o=this.options?.parentForm?.submitted)})}let t=[Ze(this.field.options,["formState"],()=>this.field.options.detectChanges(this.field))],i=this.field.options.fieldChanges.pipe(H(({field:o,type:r})=>c(o)&&r==="valueChanges"),T(()=>wi(this.ngZone)?x(null):this.ngZone.onStable.asObservable().pipe(ge(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=b(this.model))}));return()=>{t.forEach(o=>o()),e?.unsubscribe(),i.unsubscribe()}}setField(e){this.config.extras.immutable?this.field=g(g({},this.field),b(e)):Object.keys(e).forEach(t=>this.field[t]=e[t])}static{this.\u0275fac=function(t){return new(t||s)(m(de),m(j),m(Ce),m(Me))}}static{this.\u0275cmp=C({type:s,selectors:[["formly-form"]],contentQueries:function(t,i,o){if(t&1&&le(o,li,4),t&2){let r;_(r=v())&&(i.templates=r)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[U([de,Me]),P],decls:1,vars:1,consts:[[3,"field"]],template:function(t,i){t&1&&re(0,"formly-field",0),t&2&&oe("field",i.field)},dependencies:[ci],encapsulation:2,changeDetection:0})}}return s})(),un=(()=>{class s extends Mi{set templates(e){this.fieldTemplates.templates=e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275cmp=C({type:s,selectors:[["formly-form"]],contentQueries:function(t,i,o){if(t&1&&le(o,Pi,4),t&2){let r;_(r=v())&&(i.templates=r)}},standalone:!1,features:[U([de,Me]),A],decls:1,vars:1,consts:[[3,"field"]],template:function(t,i){t&1&&re(0,"formly-field",0),t&2&&oe("field",i.field)},dependencies:[pi],encapsulation:2,changeDetection:0})}}return s})(),Di=(()=>{class s{get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}constructor(e,t,i){this.renderer=e,this.elementRef=t,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change","wheel"],callback:(o,r)=>{switch(o){case"focus":return this.onFocus(r);case"blur":return this.onBlur(r);case"change":return this.onChange(r);default:return this.props[o](this.field,r)}}},this.document=i}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(t=>t()),this.uiEvents.events.forEach(t=>{(this.props?.[t]||["focus","blur","change"].indexOf(t)!==-1)&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,t,i=>this.uiEvents.callback(t,i)))}),this.props?.attributes&&h(this.field,["props","attributes"],({currentValue:t,previousValue:i})=>{i&&Object.keys(i).forEach(o=>this.removeAttribute(o)),t&&Object.keys(t).forEach(o=>{t[o]!=null&&this.setAttribute(o,t[o])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),this.fieldAttrElements.length===1&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=h(this.field,["focus"],({currentValue:t})=>{this.toggleFocus(t)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){let e=this.elementRef.nativeElement;this.uiAttributes=[...Xe,"tabindex","placeholder","readonly","disabled","step"].filter(t=>!e.hasAttribute||!e.hasAttribute(t))}for(let e=0;e<this.uiAttributes.length;e++){let t=this.uiAttributes[e],i=this.props[t];this.uiAttributesCache[t]!==i&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(t.toLowerCase()))&&(this.uiAttributesCache[t]=i,i||i===0?this.setAttribute(t,i===!0?t:`${i}`):this.removeAttribute(t))}}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){let t=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!t||!t.nativeElement.focus)return;let i=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:o})=>this.document.activeElement===o||o.contains(this.document.activeElement));e&&!i?Promise.resolve().then(()=>t.nativeElement.focus()):!e&&i&&Promise.resolve().then(()=>t.nativeElement.blur())}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){e&&(e._elementRefs?.indexOf(this.elementRef)===-1?e._elementRefs.push(this.elementRef):d(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){let t=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;t!==-1&&e._elementRefs.splice(t,1)}setAttribute(e,t){this.renderer.setAttribute(this.elementRef.nativeElement,e,t)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}static{this.\u0275fac=function(t){return new(t||s)(m(se),m(N),m(pt))}}static{this.\u0275dir=F({type:s,selectors:[["","formlyAttributes",""]],hostBindings:function(t,i){t&1&&ae("change",function(r){return i.onHostChange(r)})},inputs:{field:[0,"formlyAttributes","field"],id:"id"},features:[P]})}}return s})(),hn=(()=>{class s extends Di{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275dir=F({type:s,selectors:[["","formlyAttributes",""]],hostBindings:function(t,i){t&1&&ae("change",function(r){return i.onHostChange(r)})},standalone:!1,features:[A]})}}return s})(),Ti=(()=>{class s{constructor(e){this.config=e}ngOnChanges(){let e=Xe.map(t=>`templateOptions.${t}`);this.errorMessage$=G(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe(H(({field:t,type:i,property:o})=>t===this.field&&i==="expressionChanges"&&(o.indexOf("validation")!==-1||e.indexOf(o)!==-1))):x(null)).pipe(ee(null),T(()=>D(this.errorMessage)?this.errorMessage:x(this.errorMessage)))}get errorMessage(){let e=this.field.formControl;for(let t in e.errors)if(e.errors.hasOwnProperty(t)){let i=this.config.getValidatorMessage(t);if(O(e.errors[t])){if(e.errors[t].errorPath)return;e.errors[t].message&&(i=e.errors[t].message)}return this.field.validation?.messages?.[t]&&(i=this.field.validation.messages[t]),this.field.validators?.[t]?.message&&(i=this.field.validators[t].message),this.field.asyncValidators?.[t]?.message&&(i=this.field.asyncValidators[t].message),typeof i=="function"?i(e.errors[t],this.field):i}}static{this.\u0275fac=function(t){return new(t||s)(m(j))}}static{this.\u0275cmp=C({type:s,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[P],decls:2,vars:3,template:function(t,i){t&1&&(Ve(0),Le(1,"async")),t&2&&je(Ge(1,1,i.errorMessage$))},dependencies:[Re],encapsulation:2,changeDetection:0})}}return s})(),dn=(()=>{class s extends Ti{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275cmp=C({type:s,selectors:[["formly-validation-message"]],standalone:!1,features:[A],decls:2,vars:3,template:function(t,i){t&1&&(Ve(0),Le(1,"async")),t&2&&je(Ge(1,1,i.errorMessage$))},dependencies:[Re],encapsulation:2,changeDetection:0})}}return s})(),fn=(()=>{class s extends Te{onPopulate(e){if(c(e)){let i=ri(e);Je(e,i||new pe([],{updateOn:e.modelOptions.updateOn}))}e.fieldGroup=e.fieldGroup||[];let t=Array.isArray(e.model)?e.model.length:0;if(e.fieldGroup.length>t)for(let i=e.fieldGroup.length-1;i>=t;--i)$e(e.fieldGroup[i],!0),e.fieldGroup.splice(i,1);for(let i=e.fieldGroup.length;i<t;i++){let o=g({},b(typeof e.fieldArray=="function"?e.fieldArray(e):e.fieldArray));o.key!==null&&(o.key=`${i}`),e.fieldGroup.push(o)}}add(e,t,{markAsDirty:i}={markAsDirty:!0}){i&&this.formControl.markAsDirty(),e=e??this.field.fieldGroup.length,this.model||z(this.field,[]),this.model.splice(e,0,t?b(t):void 0),this.markFieldForCheck(this.field.fieldGroup[e]),this._build()}remove(e,{markAsDirty:t}={markAsDirty:!0}){t&&this.formControl.markAsDirty(),this.model.splice(e,1);let i=this.field.fieldGroup[e];this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((o,r)=>this.updateArrayElementKey(o,`${r}`)),$e(i,!0),this._build()}_build(){(this.field.formControl._fields??[this.field]).forEach(t=>this.options.build(t)),this.options.fieldChanges.next({field:this.field,value:S(this.field),type:"valueChanges"})}updateArrayElementKey(e,t){if(c(e)){e.key=t;return}if(e.fieldGroup?.length)for(let i=0;i<e.fieldGroup.length;i++)this.updateArrayElementKey(e.fieldGroup[i],t)}markFieldForCheck(e){e&&(e.fieldGroup?.forEach(t=>this.markFieldForCheck(t)),e.hide===!1&&this.options._hiddenFieldsForCheck.push({field:e}))}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275dir=F({type:s,standalone:!1,features:[A]})}}return s})(),mn=(()=>{class s extends Te{set _formlyControls(e){}set _staticContent(e){this.fieldComponent=e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=w(s)))(i||s)}})()}static{this.\u0275dir=F({type:s,viewQuery:function(t,i){if(t&1&&Q(ti,5,k)(ti,7,k),t&2){let o;_(o=v())&&(i.fieldComponent=o.first),_(o=v())&&(i._staticContent=o.first)}},standalone:!1,features:[A]})}}return s})(),gn=(()=>{class s{static forRoot(e={}){return{ngModule:s,providers:[{provide:he,multi:!0,useFactory:ii,deps:[j]},ni(e),j,de]}}static forChild(e={}){return{ngModule:s,providers:[{provide:he,multi:!0,useFactory:ii,deps:[j]},ni(e),de]}}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=Fe({type:s})}static{this.\u0275inj=be({imports:[Ft]})}}return s})();var Li=["panel"],Gi=["*"];function Hi(s,n){if(s&1&&(_t(0,"div",1,0),we(2),vt()),s&2){let e=n.id,t=Ct();ke(t._classList),Ot("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-autocomplete-panel-animations-enabled",!t._animationsDisabled)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),bt("id",t.id),Ie("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var et=class{source;option;constructor(n,e){this.source=n,this.option=e}},di=new te("mat-autocomplete-default-options",{providedIn:"root",factory:()=>({autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1,hasBackdrop:!1})}),Un=(()=>{class s{_changeDetectorRef=u(ce);_elementRef=u(N);_defaults=u(di);_animationsDisabled=Ne();_activeOptionChanges=me.EMPTY;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple=!1;optionSelected=new I;opened=new I;closed=new I;optionActivated=new I;set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}id=u(Mt).getId("mat-autocomplete-");inertGroups;constructor(){let e=u(Rt);this.inertGroups=e?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new Dt(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options?.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new et(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=C({type:s,selectors:[["mat-autocomplete"]],contentQueries:function(t,i,o){if(t&1&&le(o,Zt,5)(o,Yt,5),t&2){let r;_(r=v())&&(i.options=r),_(r=v())&&(i.optionGroups=r)}},viewQuery:function(t,i){if(t&1&&Q(W,7)(Li,5),t&2){let o;_(o=v())&&(i.template=o.first),_(o=v())&&(i.panel=o.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",V],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",V],requireSelection:[2,"requireSelection","requireSelection",V],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",V],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",V]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[U([{provide:zt,useExisting:s}])],ngContentSelectors:Gi,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,i){t&1&&(Ee(),Ae(0,Hi,3,17,"ng-template"))},styles:[`div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden,.cdk-overlay-pane:has(>.mat-mdc-autocomplete-hidden){visibility:hidden;pointer-events:none}@keyframes _mat-autocomplete-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}.mat-autocomplete-panel-animations-enabled{animation:_mat-autocomplete-enter 120ms cubic-bezier(0, 0, 0.2, 1)}mat-autocomplete{display:none}
`],encapsulation:2,changeDetection:0})}return s})();var Bi={provide:Wt,useExisting:lt(()=>Wi),multi:!0};var Ni=new te("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let s=u(ie);return()=>jt(s)}}),Wi=(()=>{class s{_environmentInjector=u(ct);_element=u(N);_injector=u(ie);_viewContainerRef=u(k);_zone=u(Ce);_changeDetectorRef=u(ce);_dir=u(Et,{optional:!0});_formField=u(qt,{optional:!0,host:!0});_viewportRuler=u(Tt);_scrollStrategy=u(Ni);_renderer=u(se);_animationsDisabled=Ne();_defaults=u(di,{optional:!0});_overlayRef=null;_portal;_componentDestroyed=!1;_initialized=new Z;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue=null;_valueOnAttach=null;_valueOnLastKeydown=null;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=me.EMPTY;_breakpointObserver=u(St);_handsetLandscapeSubscription=me.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption=null;_closeKeyEventStream=new Z;_overlayPanelClass=kt(this._defaults?.overlayPanelClass||[]);_windowBlurHandler=()=>{this._canOpenOnNextFocus=this.panelOpen||!this._hasFocus()};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled=!1;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&Pe(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return G(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(H(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(H(()=>this._overlayAttached)):x()).pipe(J(e=>e instanceof Xt?e:null))}optionSelections=st(()=>{let e=this.autocomplete?this.autocomplete.options:null;return e?e.changes.pipe(ee(e),T(()=>G(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(T(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new X(e=>{let t=o=>{let r=Pt(o),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&r!==this._element.nativeElement&&!this._hasFocus()&&(!a||!a.contains(r))&&(!l||!l.contains(r))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(r)&&e.next(o)},i=[this._renderer.listen("document","click",t),this._renderer.listen("document","auxclick",t),this._renderer.listen("document","touchend",t)];return()=>{i.forEach(o=>o())}})}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e,i=t.keyCode,o=xe(t);if(i===27&&!o&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&i===13&&this.panelOpen&&!o)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){let r=this.autocomplete._keyManager.activeItem,a=i===38||i===40;i===9||a&&!o&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):a&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(a||this.autocomplete._keyManager.activeItem!==r)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,i=t.value;if(t.type==="number"&&(i=i==""?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),!i)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let o=this.autocomplete.options?.find(r=>r.selected);if(o){let r=this._getDisplayValue(o.value);i!==r&&o.deselect(!1)}}if(this._canOpen()&&this._hasFocus()){let o=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(o)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_hasFocus(){return xt()===this._element.nativeElement}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new X(i=>{dt(()=>{i.next()},{injector:this._environmentInjector})}),t=this.autocomplete.options?.changes.pipe(ye(()=>this._positionStrategy.reapplyLastPosition()),rt(0))??x();return G(e,t).pipe(T(()=>this._zone.run(()=>{let i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),ge(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,i=e?e.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),t._emitSelectEvent(i),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(i=>{i!==e&&i.selected&&i.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;Be(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){if(!this.autocomplete)return;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new Vt(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=Ht(this._injector,this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(Nt.HandsetLandscape).subscribe(o=>{o.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=e=>{(e.keyCode===27&&!xe(e)||e.keyCode===38&&xe(e,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),e.stopPropagation(),e.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=void 0}_getOverlayConfig(){return new Lt({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,hasBackdrop:this._defaults?.hasBackdrop,backdropClass:this._defaults?.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this._overlayPanelClass,disableAnimations:this._animationsDisabled})}_getOverlayPosition(){let e=Gt(this._injector,this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1).withPopoverLocation("inline");return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,o=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}],r;this.position==="above"?r=o:this.position==="below"?r=t:r=[...t,...o],e.withPositions(r)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let i=0;i<e.options.length;i++)if(!e.options.get(i).disabled){t=i;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_scrollToOption(e){let t=this.autocomplete,i=Jt(e,t.options,t.optionGroups);if(e===0&&i===1)t._setScrollTop(0);else if(t.panel){let o=t.options.toArray()[e];if(o){let r=o._getHostElement(),a=ei(r.offsetTop,r.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(a)}}}_trackedModal=null;_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&Pe(this._trackedModal,"aria-owns",t),Be(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;Pe(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static \u0275fac=function(t){return new(t||s)};static \u0275dir=F({type:s,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,i){t&1&&ae("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(r){return i._handleInput(r)})("keydown",function(r){return i._handleKeydown(r)})("click",function(){return i._handleClick()}),t&2&&Ie("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||i.autocomplete==null?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",V]},exportAs:["matAutocompleteTrigger"],features:[U([Bi]),P]})}return s})(),$n=(()=>{class s{static \u0275fac=function(t){return new(t||s)};static \u0275mod=Fe({type:s});static \u0275inj=be({imports:[Bt,We,It,We,wt]})}return s})();export{Un as a,Wi as b,$n as c,d,h as e,Te as f,pi as g,un as h,hn as i,dn as j,fn as k,mn as l,gn as m};
