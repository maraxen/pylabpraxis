import{a as Qe,b as Ze,e as qe,f as Je,g as Xe,h as Ye}from"./chunk-JG6HUHEY.js";import{a as nt,b as ot}from"./chunk-ERJX7L3L.js";import{a as et,b as tt,f as it}from"./chunk-7F4BNMQ6.js";import{a as Ke,b as Ve}from"./chunk-HJ4PUJUU.js";import{B as Ce,R as je,S as Ue}from"./chunk-YMB734HE.js";import{b as $e,c as He}from"./chunk-M6LIKZVL.js";import{F as _e,s as ze}from"./chunk-Q6UYEA4T.js";import{$b as fe,Bb as Fe,Bc as v,Cc as ve,Db as $,Dc as N,Ec as Te,Ga as pe,Jc as Le,Kc as Ne,Lc as ee,Nc as me,Pa as T,Rb as R,Sb as H,Tb as K,Vb as V,Wb as j,Xb as U,Yb as L,Zb as f,Zc as x,_b as h,a as P,aa as Ee,ad as we,b as We,ba as Oe,bd as g,c as Re,ca as Pe,d as A,ed as te,fd as Ge,gc as Q,hc as J,ka as ge,kc as M,lb as p,ld as W,ma as b,mc as C,nd as E,sa as F,ta as k,tc as X,vc as Y,xc as ke,yc as O}from"./chunk-ZXFVGPYG.js";import{a as w,b as y}from"./chunk-RNQFGQA5.js";var c=(function(o){return o[o.None=0]="None",o[o.Ctrl=1]="Ctrl",o[o.Shift=2]="Shift",o[o.Alt=4]="Alt",o[o.Meta=8]="Meta",o.Any="Any",o})(c||{}),Z=class{configs=[];handle(e){for(let t of this.configs)t.matcher(e)&&(t.handler(e),t.preventDefault&&e.preventDefault(),t.stopPropagation&&e.stopPropagation())}};function lt(o){return(+o.ctrlKey&&c.Ctrl)|(+o.shiftKey&&c.Shift)|(+o.altKey&&c.Alt)|(+o.metaKey&&c.Meta)}function be(o,e){let t=lt(o),i=Array.isArray(e)?e:[e];return i.includes(c.Any)?!0:i.some(n=>t===n)}var G=class extends Z{options={preventDefault:!0,stopPropagation:!0};on(...e){let{modifiers:t,key:i,handler:n,options:s}=this._normalizeInputs(...e);return this.configs.push(w(w({handler:n,matcher:r=>this._isMatch(r,i,t)},this.options),s)),this}_normalizeInputs(...e){let t=Array.isArray(e[0])||e[0]in c,i=t?e[0]:c.None,n=t?e[1]:e[0],s=t?e[2]:e[1],r=t?e[3]:e[2];return{key:n,handler:s,modifiers:i,options:r??{}}}_isMatch(e,t,i){return be(e,i)?t instanceof RegExp?t.test(e.key):(typeof t=="string"?t:t()).toLowerCase()===e.key.toLowerCase():!1}};function a(o){let e=We(o);return e.toString=()=>`[Computed: ${e()}]`,e[P].debugName="",e}function _(o){let[e,t,i]=Re(o);return e[P].debugName="",Object.assign(e,{set:t,update:i,asReadonly:()=>e})}function xe(o){let e=Ee(o,t=>t);return e[P].debugName="",Object.assign(e,{set:t=>Oe(e[P],t),update:t=>Pe(e[P],t),asReadonly:()=>e})}var Se=(function(o){return o[o.Main=0]="Main",o[o.Auxiliary=1]="Auxiliary",o[o.Secondary=2]="Secondary",o})(Se||{}),q=class extends Z{options={preventDefault:!1,stopPropagation:!1};on(...e){let{button:t,handler:i,modifiers:n}=this._normalizeInputs(...e);return this.configs.push(w({handler:i,matcher:s=>this._isMatch(s,t,n)},this.options)),this}_normalizeInputs(...e){return e.length===3?{button:e[0],modifiers:e[1],handler:e[2]}:e.length===2?{button:Se.Main,modifiers:e[0],handler:e[1]}:{button:Se.Main,modifiers:c.None,handler:e[0]}}_isMatch(e,t,i){return t===(e.button??0)&&be(e,i)}};var ie=class{inputs;prevActiveItem=_(void 0);prevActiveIndex=a(()=>this.prevActiveItem()?this.inputs.items().indexOf(this.prevActiveItem()):-1);activeIndex=a(()=>this.inputs.activeItem()?this.inputs.items().indexOf(this.inputs.activeItem()):-1);constructor(e){this.inputs=e}isListDisabled(){return this.inputs.disabled()||this.inputs.items().every(e=>e.disabled())}getActiveDescendant(){if(!this.isListDisabled()&&this.inputs.focusMode()!=="roving")return this.inputs.activeItem()?.id()??void 0}getListTabIndex(){return this.isListDisabled()||this.inputs.focusMode()==="activedescendant"?0:-1}getItemTabIndex(e){return this.isListDisabled()||this.inputs.focusMode()==="activedescendant"?-1:this.inputs.activeItem()===e?0:-1}focus(e,t){return this.isListDisabled()||!this.isFocusable(e)?!1:(this.prevActiveItem.set(this.inputs.activeItem()),this.inputs.activeItem.set(e),(t?.focusElement||t?.focusElement===void 0)&&(this.inputs.focusMode()==="roving"?e.element()?.focus():this.inputs.element()?.focus()),!0)}isFocusable(e){return!e.disabled()||this.inputs.softDisabled()}},ne=class{inputs;constructor(e){this.inputs=e}goto(e,t){return e?this.inputs.focusManager.focus(e,t):!1}next(e){return this._advance(1,e)}peekNext(e){return this._peek(1,e)}prev(e){return this._advance(-1,e)}peekPrev(e){return this._peek(-1,e)}first(e){let t=this.peekFirst(e);return t?this.goto(t,e):!1}last(e){let t=this.peekLast(e);return t?this.goto(t,e):!1}peekFirst(e){return(e?.items??this.inputs.items()).find(i=>this.inputs.focusManager.isFocusable(i))}peekLast(e){let t=e?.items??this.inputs.items();for(let i=t.length-1;i>=0;i--)if(this.inputs.focusManager.isFocusable(t[i]))return t[i]}_advance(e,t){let i=this._peek(e,t);return i?this.goto(i,t):!1}_peek(e,t){let i=t?.items??this.inputs.items(),n=i.length,s=this.inputs.focusManager.inputs.activeItem(),r=t?.items&&s?i.indexOf(s):this.inputs.focusManager.activeIndex(),d=u=>this.inputs.wrap()?(u+e+n)%n:u+e;for(let u=d(r);u!==r&&u<n&&u>=0;u=d(u))if(this.inputs.focusManager.isFocusable(i[u]))return i[u]}};var Me=class{inputs;cells;maxRowCount=a(()=>Math.max(...this._rowCountByCol().values(),0));maxColCount=a(()=>Math.max(...this._colCountsByRow().values(),0));_coordsMap=a(()=>{let e=new Map,t=new Set;for(let i=0;i<this.cells().length;i++){let n=0,s=this.cells()[i];for(let r of s){for(;t.has(`${i}:${n}`);)n++;let d=r.rowSpan(),u=r.colSpan(),m=[];for(let l=0;l<d;l++){let B=i+l;for(let S=0;S<u;S++){let I=n+S;t.add(`${B}:${I}`),m.push({row:B,col:I})}}e.set(r,{coords:m[0],spanCoords:m}),n+=u}}return e});_cellMap=a(()=>{let e=new Map;for(let[t,{spanCoords:i}]of this._coordsMap().entries())for(let{row:n,col:s}of i)e.set(`${n}:${s}`,t);return e});_colCountsByRow=a(()=>{let e=new Map;for(let[t,{spanCoords:i}]of this._coordsMap().entries())for(let{row:n,col:s}of i){let r=e.get(n),d=s+1;(r===void 0||r<d)&&e.set(n,d)}return e});_rowCountByCol=a(()=>{let e=new Map;for(let[t,{spanCoords:i}]of this._coordsMap().entries())for(let{row:n,col:s}of i){let r=e.get(s),d=n+1;(r===void 0||r<d)&&e.set(s,d)}return e});constructor(e){this.inputs=e,this.cells=this.inputs.cells}hasCell(e){return this._coordsMap().has(e)}getCell(e){return this._cellMap().get(`${e.row}:${e.col}`)}getCoords(e){return this._coordsMap().get(e)?.coords}getAllCoords(e){return this._coordsMap().get(e)?.spanCoords}getRowCount(e){return this._rowCountByCol().get(e)}getColCount(e){return this._colCountsByRow().get(e)}},ye=class{inputs;activeCell=_(void 0);activeCoords=_({row:-1,col:-1});stateEmpty=a(()=>this.activeCell()===void 0||this.activeCoords().row===-1&&this.activeCoords().col===-1);stateStale=a(()=>{if(this.stateEmpty())return!0;let e=this.activeCell(),t=this.inputs.grid.getCoords(e),i=this.activeCoords(),n=this.inputs.grid.getCell(i);return t===void 0||e!==n});activeDescendant=a(()=>{if(this.gridDisabled()||this.inputs.focusMode()==="roving")return;let e=this.activeCell();return e?e.id():void 0});gridDisabled=a(()=>{if(this.inputs.disabled())return!0;let e=this.inputs.grid.cells();return e.length===0||e.every(t=>t.every(i=>i.disabled()))});gridTabIndex=a(()=>this.gridDisabled()||this.inputs.focusMode()==="activedescendant"?0:-1);constructor(e){this.inputs=e}getCellTabIndex(e){return this.gridDisabled()||this.inputs.focusMode()==="activedescendant"?-1:this.activeCell()===e?0:-1}isFocusable(e){return this.inputs.grid.hasCell(e)&&(!e.disabled()||this.inputs.softDisabled())}focusCell(e){return this.gridDisabled()||!this.isFocusable(e)||this.inputs.grid.getCoords(e)===void 0?!1:(this.activeCoords.set(this.inputs.grid.getCoords(e)),this.activeCell.set(e),!0)}focusCoordinates(e){if(this.gridDisabled())return!1;let t=this.inputs.grid.getCell(e);return!t||!this.isFocusable(t)||this.inputs.grid.getCell(e)===void 0?!1:(this.activeCoords.set(e),this.activeCell.set(this.inputs.grid.getCell(e)),!0)}},D={Up:{row:-1},Down:{row:1},Left:{col:-1},Right:{col:1}},De=class{inputs;_maxSteps=a(()=>this.inputs.grid.maxRowCount()*this.inputs.grid.maxColCount());constructor(e){this.inputs=e}gotoCell(e){return this.inputs.gridFocus.focusCell(e)}gotoCoords(e){return this.inputs.gridFocus.focusCoordinates(e)}peek(e,t,i,n){return i=i??(e.row!==void 0?this.inputs.rowWrap():this.inputs.colWrap()),this._peekDirectional(e,t,i,n)}advance(e){let t=this.peek(e,this.inputs.gridFocus.activeCoords());return!!t&&this.gotoCoords(t)}peekFirst(e,t){let i={row:e??0,col:-1};return e===void 0?this._peekDirectional(D.Right,i,"continuous",t):this._peekDirectional(D.Right,i,"nowrap",t)}first(e){let t=this.peekFirst(e);return!!t&&this.gotoCoords(t)}peekLast(e,t){let i={row:e??this.inputs.grid.maxRowCount()-1,col:this.inputs.grid.maxColCount()};return e===void 0?this._peekDirectional(D.Left,i,"continuous",t):this._peekDirectional(D.Left,i,"nowrap",t)}last(e){let t=this.peekLast(e);return!!t&&this.gotoCoords(t)}_peekDirectional(e,t,i,n=!1){if(this.inputs.gridFocus.gridDisabled())return;let s=this.inputs.grid.getCell(t),r=this.inputs.grid.maxRowCount(),d=this.inputs.grid.maxColCount(),u=e.row??0,m=e.col??0,l=w({},t);for(let B=0;B<this._maxSteps();B++){let S=l.col+m<0||l.col+m>=d||l.row+u<0||l.row+u>=r;if(i==="nowrap"&&S)return;if(i==="continuous"){let z=e.row??e.col,ue=S?z:u,he=S?z:m;if(l.row+ue>=r&&l.col+he>=d||l.row+ue<0&&l.col+he<0)return;l={row:(l.row+ue+r)%r,col:(l.col+he+d)%d}}if(i==="loop"&&(l={row:(l.row+u+r)%r,col:(l.col+m+d)%d}),i==="nowrap"&&(l={row:l.row+u,col:l.col+m}),l.row===t.row&&l.col===t.col)return;let I=this.inputs.grid.getCell(l);if(I!==void 0&&I!==s&&(n||this.inputs.gridFocus.isFocusable(I)))return l}}},Be=class{inputs;_undoList=_([]);constructor(e){this.inputs=e}undo(){for(let[e,t]of this._undoList())e.selected.set(t);this._undoList.set([])}select(e,t){this._updateState(e,t??e,()=>!0)}deselect(e,t){this._updateState(e,t??e,()=>!1)}toggle(e,t){this._updateState(e,t??e,i=>!i)}selectAll(){this._updateState({row:0,col:0},{row:this.inputs.grid.maxRowCount(),col:this.inputs.grid.maxColCount()},()=>!0)}deselectAll(){this._updateState({row:0,col:0},{row:this.inputs.grid.maxRowCount(),col:this.inputs.grid.maxColCount()},()=>!1)}isSelectable(e){return e.selectable()&&!e.disabled()}*_validCells(e,t){let i=Math.min(e.row,t.row),n=Math.min(e.col,t.col),s=Math.max(e.row,t.row),r=Math.max(e.col,t.col),d=new Set;for(let u=i;u<s+1;u++)for(let m=n;m<r+1;m++){let l=this.inputs.grid.getCell({row:u,col:m});l!==void 0&&this.isSelectable(l)&&(d.has(l)||(d.add(l),yield l))}}_updateState(e,t,i){let n=[];for(let s of this._validCells(e,t)){let r=s.selected();n.push([s,r]),s.selected.set(i(r))}this._undoList.set(n)}},Ie=class{inputs;data;focusBehavior;navigationBehavior;selectionBehavior;selectionAnchor=xe(()=>this.focusBehavior.activeCoords());selectionAnchorCell=a(()=>this.data.getCell(this.selectionAnchor()));selectionStabled=_(!0);allSelected=a(()=>this.data.cells().flat().filter(e=>this.selectionBehavior.isSelectable(e)).every(e=>e.selected()));gridTabIndex=()=>this.focusBehavior.gridTabIndex();gridDisabled=()=>this.focusBehavior.gridDisabled();activeDescendant=()=>this.focusBehavior.activeDescendant();constructor(e){this.inputs=e,this.data=new Me(e),this.focusBehavior=new ye(y(w({},e),{grid:this.data})),this.navigationBehavior=new De(y(w({},e),{grid:this.data,gridFocus:this.focusBehavior})),this.selectionBehavior=new Be(y(w({},e),{grid:this.data,gridFocus:this.focusBehavior}))}rowIndex(e){let t=this.data.getCoords(e)?.row;return t!==void 0?t+1:void 0}colIndex(e){let t=this.data.getCoords(e)?.col;return t!==void 0?t+1:void 0}cellTabIndex(e){return this.focusBehavior.getCellTabIndex(e)}up(e={}){return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peek(D.Up,this.selectionAnchor(),"nowrap",!0)):this.navigationBehavior.advance(D.Up),e)}down(e={}){return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peek(D.Down,this.selectionAnchor(),"nowrap",!0)):this.navigationBehavior.advance(D.Down),e)}left(e={}){return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peek(D.Left,this.selectionAnchor(),"nowrap",!0)):this.navigationBehavior.advance(D.Left),e)}right(e={}){return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peek(D.Right,this.selectionAnchor(),"nowrap",!0)):this.navigationBehavior.advance(D.Right),e)}first(e={}){return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peekFirst(void 0,!0)):this.navigationBehavior.first(),e)}firstInRow(e={}){let t=this.focusBehavior.activeCoords().row;return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peekFirst(t,!0)):this.navigationBehavior.first(t),e)}last(e={}){return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peekLast(void 0,!0)):this.navigationBehavior.last(),e)}lastInRow(e={}){let t=this.focusBehavior.activeCoords().row;return this._navigateWithSelection(()=>e.anchor?this._updateSelectionAnchor(()=>this.navigationBehavior.peekLast(t,!0)):this.navigationBehavior.last(t),e)}selectRow(){let e=this.focusBehavior.activeCoords().row;this.selectionBehavior.deselectAll(),this.selectionBehavior.select({row:e,col:0},{row:e,col:this.data.maxColCount()})}selectCol(){let e=this.focusBehavior.activeCoords().col;this.selectionBehavior.deselectAll(),this.selectionBehavior.select({row:0,col:e},{row:this.data.maxRowCount(),col:e})}select(){this.selectionBehavior.select(this.focusBehavior.activeCoords())}deselect(){this.selectionBehavior.deselect(this.focusBehavior.activeCoords())}toggle(){this.selectionBehavior.toggle(this.focusBehavior.activeCoords())}toggleOne(){if(!!this.focusBehavior.activeCell()?.selected()){this.deselect();return}this.deselectAll(),this.select()}selectAll(){this.selectionBehavior.selectAll()}deselectAll(){this.selectionBehavior.deselectAll()}gotoCell(e,t={}){return this._navigateWithSelection(()=>t.anchor?this._updateSelectionAnchor(()=>this.data.getCoords(e)):this.navigationBehavior.gotoCell(e),t)}setDefaultState(){let e=this.data.cells().flat().filter(i=>this.focusBehavior.isFocusable(i)).find(i=>i.selected());if(e!==void 0)return this.focusBehavior.focusCell(e),!0;let t=this.navigationBehavior.peekFirst();return t!==void 0?this.focusBehavior.focusCoordinates(t):!1}resetState(){return this.focusBehavior.stateEmpty()?this.setDefaultState():!!(this.focusBehavior.stateStale()&&(this.focusBehavior.focusCell(this.focusBehavior.activeCell())||this.focusBehavior.focusCoordinates(this.focusBehavior.activeCoords())||this.focusBehavior.focusCoordinates(this.navigationBehavior.peekFirst())))}_updateSelectionAnchor(e){let t=e(),i=t!==void 0;return i?(this.selectionAnchor.set(t),i):!1}_updateRangeSelection(){this.selectionStabled()||this.selectionBehavior.undo(),this.selectionBehavior.select(...this._getSelectionCoords(this.focusBehavior.activeCoords(),this.selectionAnchor()))}_getSelectionCoords(e,t){let i=this.data.getCell(e),n=this.data.getCell(t),s=[...this.data.getAllCoords(i),...this.data.getAllCoords(n)],r=s.map(l=>l.row),d=s.map(l=>l.col),u={row:Math.min(...r),col:Math.min(...d)},m={row:Math.max(...r),col:Math.max(...d)};return[u,m]}_navigateWithSelection(e,t={}){let i=e();if(!i)return!1;if(t.anchor)return this._updateRangeSelection(),this.selectionStabled.set(!1),i;if(this.selectionStabled.set(!0),t.select)return this.select(),i;if(t.selectOne)return this.deselectAll(),this.select(),i;if(t.toggle)return this.toggle(),i;if(t.toggleOne){let n=!!this.focusBehavior.activeCell()?.selected();return this.deselectAll(),n||this.select(),i}return i}},oe=class{inputs;gridBehavior;cells=a(()=>this.gridBehavior.data.cells());tabIndex=a(()=>this.gridBehavior.gridTabIndex());disabled=a(()=>this.gridBehavior.gridDisabled());activeDescendant=a(()=>this.gridBehavior.activeDescendant());activeCell=a(()=>this.gridBehavior.focusBehavior.activeCell());anchorCell=a(()=>this.inputs.enableSelection()&&this.inputs.multi()?this.gridBehavior.selectionAnchorCell():void 0);pauseNavigation=a(()=>this.gridBehavior.data.cells().flat().reduce((e,t)=>e||t.isActivated(),!1));isFocused=_(!1);hasBeenFocused=_(!1);dragging=_(!1);prevColKey=a(()=>this.inputs.textDirection()==="rtl"?"ArrowRight":"ArrowLeft");nextColKey=a(()=>this.inputs.textDirection()==="rtl"?"ArrowLeft":"ArrowRight");keydown=a(()=>{let e=new G;if(this.pauseNavigation())return e;let t={selectOne:this.inputs.enableSelection()&&this.inputs.selectionMode()==="follow"};return e.on("ArrowUp",()=>this.gridBehavior.up(t)).on("ArrowDown",()=>this.gridBehavior.down(t)).on(this.prevColKey(),()=>this.gridBehavior.left(t)).on(this.nextColKey(),()=>this.gridBehavior.right(t)).on("Home",()=>this.gridBehavior.firstInRow(t)).on("End",()=>this.gridBehavior.lastInRow(t)).on([c.Ctrl],"Home",()=>this.gridBehavior.first(t)).on([c.Ctrl],"End",()=>this.gridBehavior.last(t)),this.inputs.enableSelection()&&this.inputs.selectionMode()==="explicit"&&e.on(/Enter| /,()=>this.inputs.multi()?this.gridBehavior.toggle():this.gridBehavior.toggleOne()),this.inputs.enableSelection()&&this.inputs.enableRangeSelection()&&e.on(c.Shift,"ArrowUp",()=>this.gridBehavior.up({anchor:!0})).on(c.Shift,"ArrowDown",()=>this.gridBehavior.down({anchor:!0})).on(c.Shift,this.prevColKey(),()=>this.gridBehavior.left({anchor:!0})).on(c.Shift,this.nextColKey(),()=>this.gridBehavior.right({anchor:!0})).on(c.Shift,"Home",()=>this.gridBehavior.firstInRow({anchor:!0})).on(c.Shift,"End",()=>this.gridBehavior.lastInRow({anchor:!0})).on([c.Ctrl|c.Shift],"Home",()=>this.gridBehavior.first({anchor:!0})).on([c.Ctrl|c.Shift],"End",()=>this.gridBehavior.last({anchor:!0})).on([c.Ctrl,c.Meta],"A",()=>{this.gridBehavior.allSelected()?this.gridBehavior.deselectAll():this.gridBehavior.selectAll()}).on([c.Shift]," ",()=>this.gridBehavior.selectRow()).on([c.Ctrl,c.Meta]," ",()=>this.gridBehavior.selectCol()),e});pointerdown=a(()=>{let e=new q;return this.inputs.enableSelection()||e.on(t=>{let i=this.inputs.getCell(t.target);!i||!this.gridBehavior.focusBehavior.isFocusable(i)||this.gridBehavior.gotoCell(i)}),this.inputs.enableSelection()&&(e.on(t=>{let i=this.inputs.getCell(t.target);!i||!this.gridBehavior.focusBehavior.isFocusable(i)||(this.gridBehavior.gotoCell(i,{selectOne:this.inputs.selectionMode()==="follow",toggleOne:this.inputs.selectionMode()==="explicit"&&!this.inputs.multi(),toggle:this.inputs.selectionMode()==="explicit"&&this.inputs.multi()}),this.inputs.multi()&&this.inputs.enableRangeSelection()&&this.dragging.set(!0))}),this.inputs.multi()&&(e.on([c.Ctrl,c.Meta],t=>{let i=this.inputs.getCell(t.target);!i||!this.gridBehavior.focusBehavior.isFocusable(i)||(this.gridBehavior.gotoCell(i,{toggle:!0}),this.inputs.enableRangeSelection()&&this.dragging.set(!0))}),this.inputs.enableRangeSelection()&&e.on(c.Shift,t=>{let i=this.inputs.getCell(t.target);i&&(this.gridBehavior.gotoCell(i,{anchor:!0}),this.dragging.set(!0))}))),e});pointerup=a(()=>{let e=new q;return this.inputs.enableSelection()&&this.inputs.enableRangeSelection()&&e.on([c.Shift,c.Ctrl,c.Meta,c.None],()=>{this.dragging.set(!1)}),e});_maybeDeletion=_(!1);_deletion=_(!1);_stateStale=_(!1);constructor(e){this.inputs=e,this.gridBehavior=new Ie(y(w({},e),{cells:a(()=>this.inputs.rows().map(t=>t.inputs.cells()))}))}onKeydown(e){this.disabled()||(this.activeCell()?.onKeydown(e),this.keydown().handle(e))}onPointerdown(e){this.disabled()||this.pointerdown().handle(e)}onPointermove(e){if(this.disabled()||!this.inputs.enableSelection()||!this.inputs.enableRangeSelection()||!this.dragging())return;let t=this.inputs.getCell(e.target);t!==void 0&&this.gridBehavior.gotoCell(t,{anchor:!0})}onPointerup(e){this.disabled()||this.pointerup().handle(e)}onFocusIn(e){if(this.isFocused.set(!0),this.hasBeenFocused.set(!0),this.dragging())return;let t=this.inputs.getCell(e.target);!t||!this.gridBehavior.focusBehavior.isFocusable(t)||(t.onFocusIn(e),t!==this.activeCell()&&this.gridBehavior.gotoCell(t))}onFocusOut(e){let t=e.target;this.inputs.getCell(t)?.onFocusOut(e);let n=e.relatedTarget;this.inputs.element().contains(n)||(n===null&&this._maybeDeletion.set(!0),this.isFocused.set(!1))}setDefaultStateEffect(){this.hasBeenFocused()||this.gridBehavior.setDefaultState()}resetStateEffect(){this.gridBehavior.resetState()&&(this._maybeDeletion()?this._deletion.set(!0):this._stateStale.set(!0)),this._maybeDeletion.set(!1)}resetFocusEffect(){if(!this._stateStale())return;let t=A(()=>this.isFocused()),i=A(()=>this.inputs.focusMode()==="roving"),n=A(()=>this.activeCell());i&&n!==void 0&&t&&(n.isFocused()||n.focus()),this._stateStale.set(!1)}restoreFocusEffect(){if(!this._deletion())return;let t=A(()=>this.inputs.focusMode()==="roving"),i=A(()=>this.activeCell());t&&i!==void 0&&(i.isFocused()||i.focus()),this._deletion.set(!1)}focusEffect(){let e=this.activeCell(),t=A(()=>this.isFocused());if(e===void 0||!t)return;let i=A(()=>this.inputs.focusMode()==="roving"),n=A(()=>e.isFocused());i&&!n&&e.focus()}},se=class{inputs;rowIndex;constructor(e){this.inputs=e,this.rowIndex=e.rowIndex}},re=class{inputs;id=()=>this.inputs.id();element=()=>this.inputs.element();isFocused=_(!1);selected;selectable=()=>this.inputs.selectable();disabled=()=>this.inputs.disabled();rowSpan=()=>this.inputs.rowSpan();colSpan=()=>this.inputs.colSpan();active=a(()=>this.inputs.grid().activeCell()===this);anchor=a(()=>this.inputs.grid().anchorCell()===this?!0:void 0);ariaSelected=a(()=>this.inputs.grid().inputs.enableSelection()&&this.selectable()?this.selected():void 0);ariaRowIndex=a(()=>this.inputs.row().rowIndex()??this.inputs.rowIndex()??this.inputs.grid().gridBehavior.rowIndex(this));ariaColIndex=a(()=>this.inputs.colIndex()??this.inputs.grid().gridBehavior.colIndex(this));_tabIndex=a(()=>this.inputs.grid().gridBehavior.cellTabIndex(this));tabIndex=a(()=>this.singleWidgetMode()||this.navigationActivated()?-1:this._tabIndex());singleWidgetMode=a(()=>this.inputs.widgets().length===1);multiWidgetMode=a(()=>this.inputs.widgets().length>1);navigationDisabled=a(()=>!this.multiWidgetMode()||!this.active()||this.inputs.disabled());focusBehavior;navigationBehavior;activeWidget=xe(()=>this.inputs.widgets().length>0?this.inputs.widgets()[0]:void 0);navigationActivated=_(!1);widgetActivated=a(()=>this.inputs.widgets().some(e=>e.isActivated()));isActivated=a(()=>this.navigationActivated()||this.widgetActivated());prevKey=a(()=>this.inputs.orientation()==="vertical"?"ArrowUp":this.inputs.textDirection()==="rtl"?"ArrowRight":"ArrowLeft");nextKey=a(()=>this.inputs.orientation()==="vertical"?"ArrowDown":this.inputs.textDirection()==="rtl"?"ArrowLeft":"ArrowRight");keydown=a(()=>{let e=new G;return this.navigationActivated()?(e.on("Escape",()=>this.stopNavigation()).on(this.prevKey(),()=>this._advance(()=>this.navigationBehavior.prev({focusElement:!1}))).on(this.nextKey(),()=>this._advance(()=>this.navigationBehavior.next({focusElement:!1}))).on("Home",()=>this._advance(()=>this.navigationBehavior.next({focusElement:!1}))).on("End",()=>this._advance(()=>this.navigationBehavior.next({focusElement:!1}))),e):(e.on("Enter",()=>this.startNavigation()),e)});constructor(e){this.inputs=e,this.selected=e.selected;let t=y(w({},e),{items:e.widgets,activeItem:this.activeWidget,disabled:this.navigationDisabled,focusMode:()=>"roving",softDisabled:()=>!0});this.focusBehavior=new ie(t),this.navigationBehavior=new ne(y(w({},t),{focusManager:this.focusBehavior}))}onKeydown(e){if(this.disabled()||this.inputs.widgets().length===0)return;if(this.singleWidgetMode()){this.activeWidget().onKeydown(e);return}if(!this.navigationActivated()){this.keydown().handle(e);return}let t=this.widgetActivated();this.activeWidget().onKeydown(e),t||this.keydown().handle(e)}onFocusIn(e){this.isFocused.set(!0);let t=e.target,i=this.inputs.getWidget(t);i&&(i.onFocusIn(e),i!==this.activeWidget()&&this.navigationBehavior.goto(i,{focusElement:!1}),this.multiWidgetMode()&&this.navigationActivated.set(!0))}onFocusOut(e){let t=e.target;this.inputs.getWidget(t)?.onFocusOut(e);let n=e.relatedTarget;this.element().contains(n)||(this.isFocused.set(!1),this.navigationActivated.set(!1))}focus(){this.singleWidgetMode()?this.activeWidget()?.focus():this.element().focus()}widgetTabIndex(){return this.singleWidgetMode()?this._tabIndex():this.navigationActivated()?0:-1}startNavigation(){this.navigationActivated()||(this.navigationActivated.set(!0),this.navigationBehavior.first())}stopNavigation(){this.navigationActivated()&&(this.navigationActivated.set(!1),this.element().focus())}_advance(e){e()&&this.activeWidget()?.focus()}},ae=class{inputs;id=()=>this.inputs.id();element=()=>this.inputs.element();widgetHost=a(()=>this.inputs.focusTarget()??this.element());index=a(()=>this.inputs.cell().inputs.widgets().indexOf(this));disabled=a(()=>this.inputs.disabled()||this.inputs.cell().disabled());tabIndex=a(()=>this.inputs.cell().widgetTabIndex());active=a(()=>this.inputs.cell().activeWidget()===this);isActivated=_(!1);lastActivateEvent=_(void 0);lastDeactivateEvent=_(void 0);keydown=a(()=>{let e=new G;return this.inputs.widgetType()==="simple"?e:this.isActivated()?(e.on("Escape",t=>{this.deactivate(t),this.focus()}),this.inputs.widgetType()==="editable"&&e.on("Enter",t=>{this.deactivate(t),this.focus()}),e):(e.on("Enter",t=>this.activate(t)),this.inputs.widgetType()==="editable"&&e.on([c.Shift,c.None],/^[a-zA-Z0-9]$/,t=>this.activate(t),{preventDefault:!1}),e)});constructor(e){this.inputs=e}onKeydown(e){this.disabled()||this.keydown().handle(e)}onFocusIn(e){if(this.inputs.widgetType()==="simple")return;let t=e.target;this.widgetHost().contains(t)&&this.widgetHost()!==t&&this.activate(e)}onFocusOut(e){let t=e.relatedTarget;this.widgetHost().contains(t)||this.deactivate(e)}focus(){this.widgetHost().focus()}activate(e){this.isActivated()||this.inputs.widgetType()!=="simple"&&(this.isActivated.set(!0),this.lastActivateEvent.set(e))}deactivate(e){this.isActivated()&&(this.isActivated.set(!1),this.lastDeactivateEvent.set(e))}};var le=new ge("GRID_CELL"),ce=new ge("GRID_ROW"),Ae=(()=>{class o{_elementRef=b(T);element=this._elementRef.nativeElement;_rows=te(ce,{descendants:!0});_rowPatterns=x(()=>this._rows().map(t=>t._pattern));textDirection=b(_e).valueSignal;enableSelection=g(!1,{transform:W});disabled=g(!1,{transform:W});softDisabled=g(!0,{transform:W});focusMode=g("roving");rowWrap=g("loop");colWrap=g("loop");multi=g(!1,{transform:W});selectionMode=g("follow");enableRangeSelection=g(!1,{transform:W});_pattern=new oe(y(w({},this),{rows:this._rowPatterns,getCell:t=>this._getCell(t),element:()=>this.element}));constructor(){E(()=>this._pattern.setDefaultStateEffect()),E(()=>this._pattern.resetStateEffect()),E(()=>this._pattern.resetFocusEffect()),E(()=>this._pattern.restoreFocusEffect()),E(()=>this._pattern.focusEffect())}_getCell(t){let i=t;for(;i;){for(let n of this._rowPatterns())for(let s of n.inputs.cells())if(s.element()===i)return s;i=i.parentElement?.closest("[ngGridCell]")}}static \u0275fac=function(i){return new(i||o)};static \u0275dir=$({type:o,selectors:[["","ngGrid",""]],contentQueries:function(i,n,s){i&1&&X(s,n._rows,ce,5),i&2&&Y()},hostAttrs:["role","grid"],hostVars:3,hostBindings:function(i,n){i&1&&M("keydown",function(r){return n._pattern.onKeydown(r)})("pointerdown",function(r){return n._pattern.onPointerdown(r)})("pointermove",function(r){return n._pattern.onPointermove(r)})("pointerup",function(r){return n._pattern.onPointerup(r)})("focusin",function(r){return n._pattern.onFocusIn(r)})("focusout",function(r){return n._pattern.onFocusOut(r)}),i&2&&(J("tabIndex",n._pattern.tabIndex()),R("aria-disabled",n._pattern.disabled())("aria-activedescendant",n._pattern.activeDescendant()))},inputs:{enableSelection:[1,"enableSelection"],disabled:[1,"disabled"],softDisabled:[1,"softDisabled"],focusMode:[1,"focusMode"],rowWrap:[1,"rowWrap"],colWrap:[1,"colWrap"],multi:[1,"multi"],selectionMode:[1,"selectionMode"],enableRangeSelection:[1,"enableRangeSelection"]},exportAs:["ngGrid"]})}return o})(),de=(()=>{class o{_elementRef=b(T);element=this._elementRef.nativeElement;active=x(()=>this._pattern.active());_cell=b(le);id=g(b(Ce).getId("ng-grid-cell-widget-",!0));widgetType=g("simple");disabled=g(!1,{transform:W});focusTarget=g();onActivate=we();onDeactivate=we();tabindex=g();_tabIndex=x(()=>this.tabindex()??(this.focusTarget()?-1:this._pattern.tabIndex()));_pattern=new ae(y(w({},this),{element:()=>this.element,cell:()=>this._cell._pattern,focusTarget:x(()=>this.focusTarget()instanceof T?this.focusTarget().nativeElement:this.focusTarget())}));get isActivated(){return x(()=>this._pattern.isActivated())}constructor(){E(()=>{let t=this._pattern.lastActivateEvent();t&&this.onActivate.emit(t)}),E(()=>{let t=this._pattern.lastDeactivateEvent();t&&this.onDeactivate.emit(t)})}activate(){this._pattern.activate()}deactivate(){this._pattern.deactivate()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=$({type:o,selectors:[["","ngGridCellWidget",""]],hostVars:3,hostBindings:function(i,n){i&2&&(J("tabIndex",n._tabIndex()),R("data-active",n.active())("data-active-control",n.isActivated()?"widget":"cell"))},inputs:{id:[1,"id"],widgetType:[1,"widgetType"],disabled:[1,"disabled"],focusTarget:[1,"focusTarget"],tabindex:[1,"tabindex"]},outputs:{onActivate:"onActivate",onDeactivate:"onDeactivate"},exportAs:["ngGridCellWidget"]})}return o})(),st=(()=>{class o{_elementRef=b(T);element=this._elementRef.nativeElement;active=x(()=>this._pattern.active());_widgets=te(de,{descendants:!0});_widgetPatterns=x(()=>this._widgets().map(t=>t._pattern));_row=b(ce);textDirection=b(_e).valueSignal;id=g(b(Ce).getId("ng-grid-cell-",!0));role=g("gridcell");rowSpan=g(1);colSpan=g(1);rowIndex=g();colIndex=g();disabled=g(!1,{transform:W});selected=Ge(!1);selectable=g(!0);orientation=g("horizontal");wrap=g(!0,{transform:W});tabindex=g();_tabIndex=x(()=>this.tabindex()??this._pattern.tabIndex());_pattern=new re(y(w({},this),{grid:this._row._gridPattern,row:()=>this._row._pattern,widgets:this._widgetPatterns,getWidget:t=>this._getWidget(t),element:()=>this.element}));constructor(){}_getWidget(t){let i=t;for(;i;){let n=this._widgetPatterns().find(s=>s.element()===i);if(n)return n;i=i.parentElement?.closest("[ngGridCellWidget]")}}static \u0275fac=function(i){return new(i||o)};static \u0275dir=$({type:o,selectors:[["","ngGridCell",""]],contentQueries:function(i,n,s){i&1&&X(s,n._widgets,de,5),i&2&&Y()},hostVars:13,hostBindings:function(i,n){i&2&&(J("tabIndex",n._tabIndex()),R("role",n.role())("id",n._pattern.id())("rowspan",n._pattern.rowSpan())("colspan",n._pattern.colSpan())("data-active",n.active())("data-anchor",n._pattern.anchor())("aria-disabled",n._pattern.disabled())("aria-rowspan",n._pattern.rowSpan())("aria-colspan",n._pattern.colSpan())("aria-rowindex",n._pattern.ariaRowIndex())("aria-colindex",n._pattern.ariaColIndex())("aria-selected",n._pattern.ariaSelected()))},inputs:{id:[1,"id"],role:[1,"role"],rowSpan:[1,"rowSpan"],colSpan:[1,"colSpan"],rowIndex:[1,"rowIndex"],colIndex:[1,"colIndex"],disabled:[1,"disabled"],selected:[1,"selected"],selectable:[1,"selectable"],orientation:[1,"orientation"],wrap:[1,"wrap"],tabindex:[1,"tabindex"]},outputs:{selected:"selectedChange"},exportAs:["ngGridCell"],features:[me([{provide:le,useExisting:o}])]})}return o})(),rt=(()=>{class o{_elementRef=b(T);element=this._elementRef.nativeElement;_cells=te(le,{descendants:!0});_cellPatterns=x(()=>this._cells().map(t=>t._pattern));_grid=b(Ae);_gridPattern=x(()=>this._grid._pattern);rowIndex=g();_pattern=new se(y(w({},this),{cells:this._cellPatterns,grid:this._gridPattern}));static \u0275fac=function(i){return new(i||o)};static \u0275dir=$({type:o,selectors:[["","ngGridRow",""]],contentQueries:function(i,n,s){i&1&&X(s,n._cells,le,5),i&2&&Y()},hostAttrs:["role","row"],hostVars:1,hostBindings:function(i,n){i&2&&R("aria-rowindex",n._pattern.rowIndex())},inputs:{rowIndex:[1,"rowIndex"]},exportAs:["ngGridRow"],features:[me([{provide:ce,useExisting:o}])]})}return o})();function dt(o,e){if(o&1&&(f(0,"div",4),v(1),h()),o&2){let t=C();p(),ve(t.data.plateLabel)}}function ut(o,e){if(o&1){let t=Q();f(0,"td",20)(1,"button",21),M("click",function(){let n=F(t).$implicit,s=C();return k(s.toggleColumn(n))}),v(2),h()()}if(o&2){let t=e.$implicit,i=C();O("active",i.isColumnFullySelected(t)),p(),L("matTooltip","Toggle column "+t),p(),N(" ",t," ")}}function ht(o,e){if(o&1&&(f(0,"span",27),v(1),h()),o&2){C();let t=ee(0);p(),ve(t)}}function gt(o,e){if(o&1){let t=Q();Le(0),f(1,"td",24)(2,"button",25),M("mousedown",function(n){let s=F(t).$implicit,r=ee(0),d=C().$implicit,u=C();return k(u.onMouseDown(r,d,s,n))})("mouseenter",function(){let n=F(t).$implicit,s=ee(0),r=C().$implicit,d=C();return k(d.onMouseEnter(s,r,n))}),f(3,"span",26),H(4,ht,2,1,"span",27),h()()()}if(o&2){let t=e.$implicit,i=C().$implicit,n=C(),s=Ne(i+t);p(),O("selected",n.isSelected(s))("in-drag",n.isInDragRect(i,t))("dragging",n.isDragging()),p(),O("has-selection",n.isSelected(s)),L("matTooltip",s)("matTooltipDisabled",n.config.showWellLabels),R("aria-pressed",n.isSelected(s)),p(),O("has-selection",n.isSelected(s)),p(),K(n.config.showWellLabels?4:-1)}}function pt(o,e){if(o&1){let t=Q();f(0,"tr",15)(1,"td",22)(2,"button",21),M("click",function(){let n=F(t).$implicit,s=C();return k(s.toggleRow(n))}),v(3),h()(),j(4,gt,5,15,"td",23,V),h()}if(o&2){let t=e.$implicit,i=C();p(),O("active",i.isRowFullySelected(t)),p(),L("matTooltip","Toggle row "+t),p(),N(" ",t," "),p(),U(i.colLabels())}}function ft(o,e){if(o&1){let t=Q();f(0,"mat-chip",32),M("removed",function(){let n=F(t).$implicit,s=C(2);return k(s.removeWell(n))}),v(1),f(2,"button",33)(3,"mat-icon"),v(4,"cancel"),h()()()}if(o&2){let t=e.$implicit;p(),N(" ",t," ")}}function vt(o,e){if(o&1&&(f(0,"span",31),v(1),h()),o&2){let t=C(2);p(),N("+",t.selectedWellsSet().size-24," more")}}function mt(o,e){if(o&1&&(f(0,"div",16)(1,"span",28),v(2,"Selected:"),h(),f(3,"div",29),j(4,ft,5,1,"mat-chip",30,V),H(6,vt,2,1,"span",31),h()()),o&2){let t=C();p(4),U(t.sortedSelection().slice(0,24)),p(2),K(t.selectedWellsSet().size>24?6:-1)}}var wt={96:{rows:8,cols:12,cellSize:"36px",labelSize:"11px",showWellLabels:!0},384:{rows:16,cols:24,cellSize:"20px",labelSize:"9px",showWellLabels:!1}},at=class o{dialogRef=b(Qe);data=b(Ze);config;totalWells;selectedWellsSet=pe(new Set);rowLabels=x(()=>Array.from({length:this.config.rows},(e,t)=>String.fromCharCode(65+t)));colLabels=x(()=>Array.from({length:this.config.cols},(e,t)=>(t+1).toString()));sortedSelection=x(()=>Array.from(this.selectedWellsSet()).sort((t,i)=>{let n=t.match(/[A-Z]+/)?.[0]??"",s=i.match(/[A-Z]+/)?.[0]??"",r=parseInt(t.replace(/[A-Z]+/,""),10),d=parseInt(i.replace(/[A-Z]+/,""),10);return n!==s?n.localeCompare(s):r-d}));isDragging=pe(!1);dragStartRow="";dragStartCol="";dragEndRow="";dragEndCol="";dragAddMode=!0;selectionOnDragStart=new Set;constructor(){this.config=wt[this.data.plateType||"96"],this.totalWells=this.config.rows*this.config.cols}ngOnInit(){this.data.initialSelection?.length>0&&this.selectedWellsSet.set(new Set(this.data.initialSelection))}isSelected(e){return this.selectedWellsSet().has(e)}isRowFullySelected(e){return this.colLabels().every(i=>this.selectedWellsSet().has(`${e}${i}`))}isColumnFullySelected(e){return this.rowLabels().every(i=>this.selectedWellsSet().has(`${i}${e}`))}toggleRow(e){let t=this.colLabels(),i=this.isRowFullySelected(e),n=new Set(this.selectedWellsSet());t.forEach(s=>{let r=`${e}${s}`;i?n.delete(r):n.add(r)}),this.selectedWellsSet.set(n)}toggleColumn(e){let t=this.rowLabels(),i=this.isColumnFullySelected(e),n=new Set(this.selectedWellsSet());t.forEach(s=>{let r=`${s}${e}`;i?n.delete(r):n.add(r)}),this.selectedWellsSet.set(n)}selectAll(){let e=new Set;this.rowLabels().forEach(t=>{this.colLabels().forEach(i=>{e.add(`${t}${i}`)})}),this.selectedWellsSet.set(e)}clearSelection(){this.selectedWellsSet.set(new Set)}invertSelection(){let e=this.selectedWellsSet(),t=new Set;this.rowLabels().forEach(i=>{this.colLabels().forEach(n=>{let s=`${i}${n}`;e.has(s)||t.add(s)})}),this.selectedWellsSet.set(t)}removeWell(e){let t=new Set(this.selectedWellsSet());t.delete(e),this.selectedWellsSet.set(t)}onMouseDown(e,t,i,n){n.button===0&&(n.preventDefault(),this.isDragging.set(!0),this.dragStartRow=t,this.dragStartCol=i,this.dragEndRow=t,this.dragEndCol=i,this.selectionOnDragStart=new Set(this.selectedWellsSet()),this.dragAddMode=!this.selectionOnDragStart.has(e),this.applyDragSelection())}onMouseEnter(e,t,i){this.isDragging()&&(this.dragEndRow=t,this.dragEndCol=i,this.applyDragSelection())}onMouseUp(){this.isDragging.set(!1)}isInDragRect(e,t){if(!this.isDragging())return!1;let i=this.rowLabels().indexOf(e),n=this.colLabels().indexOf(t),s=this.rowLabels().indexOf(this.dragStartRow),r=this.rowLabels().indexOf(this.dragEndRow),d=this.colLabels().indexOf(this.dragStartCol),u=this.colLabels().indexOf(this.dragEndCol),m=Math.min(s,r),l=Math.max(s,r),B=Math.min(d,u),S=Math.max(d,u);return i>=m&&i<=l&&n>=B&&n<=S}applyDragSelection(){let e=this.rowLabels(),t=this.colLabels(),i=e.indexOf(this.dragStartRow),n=e.indexOf(this.dragEndRow),s=t.indexOf(this.dragStartCol),r=t.indexOf(this.dragEndCol),d=Math.min(i,n),u=Math.max(i,n),m=Math.min(s,r),l=Math.max(s,r),B=new Set(this.selectionOnDragStart);for(let S=d;S<=u;S++)for(let I=m;I<=l;I++){let z=`${e[S]}${t[I]}`;this.dragAddMode?B.add(z):B.delete(z)}this.selectedWellsSet.set(B)}updateWell(e,t){let i=new Set(this.selectedWellsSet());t?i.add(e):i.delete(e),this.selectedWellsSet.set(i)}cancel(){let e={wells:[],confirmed:!1};this.dialogRef.close(e)}confirm(){let e={wells:this.sortedSelection(),confirmed:!0};this.dialogRef.close(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=Fe({type:o,selectors:[["app-well-selector-dialog"]],decls:41,vars:12,consts:[[1,"well-selector-dialog"],["mat-dialog-title","",1,"dialog-title"],[1,"title-icon"],[1,"dialog-content"],[1,"plate-label"],[1,"toolbar"],["mat-stroked-button","","type","button",1,"toolbar-btn",3,"click"],["mat-stroked-button","","type","button",1,"toolbar-btn",3,"click","disabled"],[1,"selection-count"],[1,"count-icon"],[1,"plate-container",3,"mouseup","mouseleave"],["ngGrid","",1,"plate-grid"],["ngGridRow","",1,"header-row"],["ngGridCell","",1,"corner-cell"],["ngGridCell","",1,"header-cell","column-header",3,"active"],["ngGridRow","",1,"plate-row"],[1,"selection-preview"],["align","end",1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","button",3,"click","disabled"],["ngGridCell","",1,"header-cell","column-header"],["ngGridCellWidget","","type","button",1,"header-btn",3,"click","matTooltip"],["ngGridCell","",1,"header-cell","row-header"],["ngGridCell","",1,"well-cell",3,"selected","in-drag","dragging"],["ngGridCell","",1,"well-cell"],["ngGridCellWidget","","type","button",1,"well-btn",3,"mousedown","mouseenter","matTooltip","matTooltipDisabled"],[1,"well-inner"],[1,"well-label"],[1,"preview-label"],[1,"chips-container"],["highlighted","",1,"well-chip"],[1,"more-indicator"],["highlighted","",1,"well-chip",3,"removed"],["matChipRemove",""]],template:function(t,i){t&1&&(f(0,"div",0)(1,"h2",1)(2,"mat-icon",2),v(3,"grid_view"),h(),v(4),h(),f(5,"mat-dialog-content",3),H(6,dt,2,1,"div",4),f(7,"div",5)(8,"button",6),M("click",function(){return i.selectAll()}),f(9,"mat-icon"),v(10,"select_all"),h(),v(11," Select All "),h(),f(12,"button",7),M("click",function(){return i.clearSelection()}),f(13,"mat-icon"),v(14,"deselect"),h(),v(15," Clear All "),h(),f(16,"button",6),M("click",function(){return i.invertSelection()}),f(17,"mat-icon"),v(18,"flip"),h(),v(19," Invert "),h(),f(20,"span",8)(21,"mat-icon",9),v(22,"check_circle"),h(),v(23),h()(),f(24,"div",10),M("mouseup",function(){return i.onMouseUp()})("mouseleave",function(){return i.onMouseUp()}),f(25,"table",11)(26,"tr",12),fe(27,"td",13),j(28,ut,3,4,"td",14,V),h(),j(30,pt,6,4,"tr",15,V),h()(),H(32,mt,7,1,"div",16),h(),fe(33,"mat-divider"),f(34,"mat-dialog-actions",17)(35,"button",18),M("click",function(){return i.cancel()}),v(36," Cancel "),h(),f(37,"button",19),M("click",function(){return i.confirm()}),f(38,"mat-icon"),v(39,"check"),h(),v(40," Confirm Selection "),h()()()),t&2&&(O("plate-384",i.data.plateType==="384"),p(4),N(" ",i.data.title||"Select Wells"," "),p(2),K(i.data.plateLabel?6:-1),p(6),L("disabled",i.selectedWellsSet().size===0),p(11),Te(" ",i.selectedWellsSet().size," / ",i.totalWells," selected "),p(2),ke("--cell-size",i.config.cellSize),R("aria-label","Well plate grid - "+i.data.plateType+" wells"),p(3),U(i.colLabels()),p(2),U(i.rowLabels()),p(2),K(i.selectedWellsSet().size>0&&i.selectedWellsSet().size<=24?32:-1),p(5),L("disabled",i.data.mode==="single"&&i.selectedWellsSet().size!==1))},dependencies:[ze,Ye,qe,Xe,Je,Ue,je,He,$e,Ve,Ke,ot,nt,it,tt,et,Ae,rt,st,de],styles:[".well-selector-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:100%;overflow:hidden}.dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;padding:20px 24px 16px;font-size:1.25rem;font-weight:500;color:var(--mat-sys-on-surface)}.title-icon[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:0 24px;overflow:auto}.plate-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--mat-sys-on-surface-variant);text-align:center;padding:4px 0}.toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:8px;padding:8px 0}.toolbar-btn[_ngcontent-%COMP%]{font-size:13px}.toolbar-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-right:4px}.selection-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-left:auto;padding:6px 12px;background:var(--mat-sys-surface-container);border-radius:16px;font-size:13px;font-weight:500;color:var(--mat-sys-on-surface-variant)}.count-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px;color:var(--mat-sys-primary)}.plate-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:16px 0;-webkit-user-select:none;user-select:none;overflow:auto}.plate-grid[_ngcontent-%COMP%]{border-spacing:2px;border-collapse:separate;padding:12px;background:var(--mat-sys-surface-container-low);border-radius:12px;border:1px solid var(--mat-sys-outline-variant)}.corner-cell[_ngcontent-%COMP%]{width:32px;height:28px}.header-cell[_ngcontent-%COMP%]{padding:0}.header-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:none;border:none;font-weight:600;font-size:var(--label-size, 11px);color:var(--mat-sys-on-surface-variant);cursor:pointer;border-radius:4px;transition:all .15s ease;padding:0}.header-btn[_ngcontent-%COMP%]:hover{background:var(--mat-sys-primary-container);color:var(--mat-sys-on-primary-container)}.header-cell.active[_ngcontent-%COMP%]   .header-btn[_ngcontent-%COMP%]{background:var(--mat-sys-primary);color:var(--mat-sys-on-primary)}.column-header[_ngcontent-%COMP%]{width:var(--cell-size, 36px);height:28px}.row-header[_ngcontent-%COMP%]{width:32px;height:var(--cell-size, 36px)}.well-cell[_ngcontent-%COMP%]{width:var(--cell-size, 36px);height:var(--cell-size, 36px);padding:0}.well-btn[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;border:2px solid var(--mat-sys-outline-variant);background:var(--mat-sys-surface);transition:all .12s ease;position:relative;padding:0;outline:none}.well-btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--mat-sys-primary);outline-offset:2px}.well-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.08);border-color:var(--mat-sys-primary);z-index:2;box-shadow:0 2px 8px #00000026}.well-btn.has-selection[_ngcontent-%COMP%]{background:var(--mat-sys-primary-container);border-color:var(--mat-sys-primary)}.well-cell.in-drag[_ngcontent-%COMP%]   .well-btn[_ngcontent-%COMP%]:not(.has-selection){background:var(--mat-sys-secondary-container);border-color:var(--mat-sys-secondary);opacity:.8}.well-inner[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .15s ease}.well-inner.has-selection[_ngcontent-%COMP%]{background:var(--mat-sys-primary);transform:scale(.65)}.well-label[_ngcontent-%COMP%]{font-size:9px;font-weight:500;color:var(--mat-sys-on-surface-variant);pointer-events:none}.well-btn.has-selection[_ngcontent-%COMP%]   .well-label[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary)}.plate-384[_ngcontent-%COMP%]   .plate-grid[_ngcontent-%COMP%]{--label-size: 9px}.plate-384[_ngcontent-%COMP%]   .corner-cell[_ngcontent-%COMP%]{width:24px;height:20px}.plate-384[_ngcontent-%COMP%]   .row-header[_ngcontent-%COMP%]{width:24px}.plate-384[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{height:20px}.plate-384[_ngcontent-%COMP%]   .well-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.15)}.selection-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:8px;padding:12px;background:var(--mat-sys-surface-container);border-radius:8px;max-height:120px;overflow-y:auto}.preview-label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--mat-sys-on-surface-variant)}.chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.well-chip[_ngcontent-%COMP%]{font-size:11px;height:26px;--mdc-chip-label-text-size: 11px;--mdc-chip-container-height: 26px}.more-indicator[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;color:var(--mat-sys-on-surface-variant)}.dialog-actions[_ngcontent-%COMP%]{padding:12px 24px 20px;gap:8px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}"],changeDetection:0})};export{at as a};
