import{a as At}from"./chunk-L5RKD3O3.js";import"./chunk-SEKTGI6S.js";import{a as bt,b as ht,c as Pt,d as Mt,e as wt,f as St,g as Et,h as Dt,i as It,j as Tt,l as Lt,m as Ht}from"./chunk-MJO6NRX7.js";import{a as $}from"./chunk-FHX7ZVQY.js";import"./chunk-QPZUELQO.js";import"./chunk-WNYFH7QK.js";import"./chunk-BRQ7VCIS.js";import{a as at,b as rt,c as lt,d as ct,e as mt,f as st,g as pt,h as z}from"./chunk-JG6HUHEY.js";import"./chunk-O2OSWUJ6.js";import"./chunk-ULQGHXUB.js";import{a as Ot,b as kt,d as Nt,e as Vt,g as Rt,i as Ft,j as zt,k as Bt}from"./chunk-ERJX7L3L.js";import"./chunk-5XV7PTQI.js";import{a as B,b as H}from"./chunk-FFXGIJC7.js";import{f as A}from"./chunk-7F4BNMQ6.js";import{a as it,b as nt}from"./chunk-HJ4PUJUU.js";import"./chunk-GW7MQSL6.js";import"./chunk-F4M4TAIC.js";import{p as ft,r as ut}from"./chunk-FGBSBVHW.js";import"./chunk-5R36QA5Q.js";import{a as gt,b as xt,c as vt,f as Ct,h as yt}from"./chunk-SJZ6P2DA.js";import"./chunk-SKMC2KSJ.js";import{P as k,R as N,S as V,ta as dt,ua as _t}from"./chunk-YMB734HE.js";import{c as T}from"./chunk-HUJ7WYYJ.js";import{b as L,c as O}from"./chunk-M6LIKZVL.js";import{e as tt,f as et,s as ot}from"./chunk-Q6UYEA4T.js";import{$b as g,Bb as D,Bc as a,Cc as m,Dc as I,Ga as E,Hb as f,P as R,Sb as y,Tb as b,Wb as J,Wc as Q,Xb as X,Yb as p,Zb as n,Zc as F,_b as o,dc as w,ec as S,gc as h,kc as u,lb as r,ma as x,mc as s,sa as v,ta as C,wc as K,yc as Z}from"./chunk-ZXFVGPYG.js";import"./chunk-RNQFGQA5.js";function Yt(t,i){if(t&1&&(n(0,"span",29),a(1),o()),t&2){let e=s();r(),m(e.data.protocol.category)}}function Wt(t,i){if(t&1&&(n(0,"div",19)(1,"span",20),a(2,"FQN"),o(),n(3,"span",30),a(4),o()()),t&2){let e=s();r(4),m(e.data.protocol.fqn)}}function Gt(t,i){t&1&&(n(0,"span",37),a(1,"Optional"),o())}function Kt(t,i){if(t&1&&(n(0,"mat-list-item")(1,"mat-icon",32),a(2,"view_in_ar"),o(),n(3,"div",33)(4,"span",34),a(5),o(),f(6,Gt,2,0,"span",35),o(),n(7,"div",36),a(8),o()()),t&2){let e=i.$implicit;r(5),m(e.name),r(),p("ngIf",e.optional),r(2),m(e.fqn)}}function Qt(t,i){if(t&1&&(n(0,"mat-list-item")(1,"mat-icon",32),a(2,"precision_manufacturing"),o(),n(3,"div",33)(4,"span",34),a(5),o(),n(6,"span",38),a(7),o()(),n(8,"div",36),a(9,"Machine Parameter"),o()()),t&2){let e=i.$implicit;r(5),m(e.name),r(2),m(e.type_hint)}}function Jt(t,i){if(t&1&&(n(0,"mat-list"),f(1,Kt,9,3,"mat-list-item",31)(2,Qt,10,2,"mat-list-item",31),o()),t&2){let e=s();r(),p("ngForOf",e.data.protocol.assets),r(),p("ngForOf",e.machineParameters)}}function Xt(t,i){t&1&&(n(0,"p",39),a(1,"No specific hardware assets required."),o())}function Zt(t,i){if(t&1&&(n(0,"div",41),a(1),o()),t&2){let e=s().$implicit;r(),I("Default: ",e.default_value_repr)}}function te(t,i){if(t&1&&(n(0,"mat-list-item")(1,"mat-icon",32),a(2,"settings_input_component"),o(),n(3,"div",33)(4,"span",34),a(5),o(),n(6,"span",38),a(7),o()(),n(8,"div",36),a(9),o(),f(10,Zt,2,1,"div",40),o()),t&2){let e=i.$implicit;r(5),m(e.name),r(2),m(e.type_hint),r(2),m(e.description||"No description"),r(),p("ngIf",e.default_value_repr)}}function ee(t,i){if(t&1&&(n(0,"mat-list"),f(1,te,11,4,"mat-list-item",31),o()),t&2){let e=s();r(),p("ngForOf",e.runtimeParameters)}}function oe(t,i){t&1&&(n(0,"p",39),a(1,"No parameters defined for this protocol."),o())}function ie(t,i){if(t&1&&(n(0,"div",46)(1,"mat-icon",47),a(2,"warning"),o(),n(3,"span",48),a(4),o()()),t&2){let e=i.$implicit;r(4),m(e.message||"Unknown violation")}}function ne(t,i){if(t&1&&(n(0,"div",44),f(1,ie,5,1,"div",45),o()),t&2){let e=s(2);r(),p("ngForOf",e.data.protocol.simulation_result.violations)}}function ae(t,i){if(t&1&&(w(0),g(1,"mat-divider"),n(2,"section",15)(3,"h3",23)(4,"mat-icon"),a(5,"analytics"),o(),a(6," Simulation Status "),o(),n(7,"div",42)(8,"mat-icon"),a(9),o(),n(10,"span"),a(11),o()(),f(12,ne,2,1,"div",43),o(),S()),t&2){let e=s();r(7),Z("passed",e.data.protocol.simulation_result.passed)("failed",!e.data.protocol.simulation_result.passed),r(2),m(e.data.protocol.simulation_result.passed?"check_circle":"error"),r(2),m(e.data.protocol.simulation_result.passed?"Simulation Passed":"Simulation Failed"),r(),p("ngIf",e.data.protocol.simulation_result.violations.length>0)}}var q=class t{dialogRef=x(at);data=x(rt);router=x(T);MACHINE_TYPE_HINTS=["LiquidHandler","PlateReader","HeaterShaker","Centrifuge","Incubator","Sealer","Peeler","Barcode","Washer"];get machineParameters(){return this.data.protocol.parameters.filter(i=>this.MACHINE_TYPE_HINTS.some(e=>i.type_hint?.includes(e)))}get runtimeParameters(){return this.data.protocol.parameters.filter(i=>!this.MACHINE_TYPE_HINTS.some(e=>i.type_hint?.includes(e)))}runProtocol(){this.dialogRef.close(),this.router.navigate(["/app/run"],{queryParams:{protocolId:this.data.protocol.accession_id}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-protocol-detail-dialog"]],decls:58,vars:12,consts:[["noAssets",""],["noParams",""],[1,"dialog-container"],["mat-dialog-title","",1,"dialog-header"],[1,"header-content"],[1,"title-row"],[1,"protocol-icon"],[1,"protocol-name"],[1,"spacer"],["mat-icon-button","","mat-dialog-close",""],[1,"metadata-chips"],[1,"chip","version"],["class","chip category",4,"ngIf"],[1,"chip","type"],[1,"dialog-content"],[1,"info-section"],[1,"section-title"],[1,"description-text"],[1,"info-section","grid-section"],[1,"info-item"],[1,"label"],[1,"value","font-mono"],["class","info-item",4,"ngIf"],[1,"section-title","flex","items-center","gap-2"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["align","end",1,"dialog-actions"],["mat-button","","mat-dialog-close","",1,"!rounded-xl","!px-6"],["mat-flat-button","","color","primary",1,"!rounded-xl","!px-6","!py-6","shadow-lg","shadow-primary/20",3,"click"],[1,"chip","category"],[1,"value","font-mono","text-xs"],[4,"ngFor","ngForOf"],["matListItemIcon",""],["matListItemTitle","",1,"flex","items-center","gap-2"],[1,"font-medium"],["class","chip optional",4,"ngIf"],["matListItemLine","",1,"text-xs","opacity-70"],[1,"chip","optional"],[1,"chip","param-type"],[1,"empty-state"],["matListItemLine","","class","text-xs italic",4,"ngIf"],["matListItemLine","",1,"text-xs","italic"],[1,"simulation-status"],["class","violations-list",4,"ngIf"],[1,"violations-list"],["class","violation-item",4,"ngFor","ngForOf"],[1,"violation-item"],[1,"text-yellow-500"],[1,"text-sm"]],template:function(e,l){if(e&1){let c=h();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"mat-icon",6),a(5,"science"),o(),n(6,"h2",7),a(7),o(),g(8,"span",8),n(9,"button",9)(10,"mat-icon"),a(11,"close"),o()()(),n(12,"div",10)(13,"span",11),a(14),o(),f(15,Yt,2,1,"span",12),n(16,"span",13),a(17),o()()()(),n(18,"mat-dialog-content",14)(19,"section",15)(20,"h3",16),a(21,"Description"),o(),n(22,"p",17),a(23),o()(),g(24,"mat-divider"),n(25,"section",18)(26,"div",19)(27,"span",20),a(28,"Accession ID"),o(),n(29,"span",21),a(30),o()(),f(31,Wt,5,1,"div",22),o(),g(32,"mat-divider"),n(33,"section",15)(34,"h3",23)(35,"mat-icon"),a(36,"inventory_2"),o(),a(37," Asset Requirements "),o(),f(38,Jt,3,2,"mat-list",24)(39,Xt,2,0,"ng-template",null,0,Q),o(),g(41,"mat-divider"),n(42,"section",15)(43,"h3",23)(44,"mat-icon"),a(45,"tune"),o(),a(46," Parameters "),o(),f(47,ee,2,1,"mat-list",24)(48,oe,2,0,"ng-template",null,1,Q),o(),f(50,ae,13,7,"ng-container",25),o(),n(51,"mat-dialog-actions",26)(52,"button",27),a(53,"Close"),o(),n(54,"button",28),u("click",function(){return v(c),C(l.runProtocol())}),n(55,"mat-icon"),a(56,"play_arrow"),o(),a(57," Run Protocol "),o()()()}if(e&2){let c=K(40),d=K(49);r(7),m(l.data.protocol.name),r(7),I("v",l.data.protocol.version),r(),p("ngIf",l.data.protocol.category),r(2),m(l.data.protocol.is_top_level?"Top Level":"Sub-Protocol"),r(6),m(l.data.protocol.description||"No description provided."),r(7),m(l.data.protocol.accession_id),r(),p("ngIf",l.data.protocol.fqn),r(7),p("ngIf",l.data.protocol.assets.length>0||l.machineParameters.length>0)("ngIfElse",c),r(9),p("ngIf",l.runtimeParameters.length>0)("ngIfElse",d),r(3),p("ngIf",l.data.protocol.simulation_result)}},dependencies:[ot,tt,et,z,ct,mt,pt,st,V,N,k,O,L,A,kt,Ot,Bt,Ft,zt,Rt,Vt,Nt],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:90vh;overflow:hidden;background:var(--mdc-dialog-container-color);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);color:var(--theme-text-primary);border-radius:28px;border:1px solid var(--theme-border);box-shadow:var(--glass-shadow)}.dialog-header[_ngcontent-%COMP%]{padding:2rem 2rem 1.5rem;border-bottom:1px solid var(--theme-border);background:var(--theme-surface);margin:0!important}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.title-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.protocol-icon[_ngcontent-%COMP%]{width:36px;height:36px;font-size:36px;color:var(--primary-color)}.protocol-name[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;line-height:1.2;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.metadata-chips[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.chip[_ngcontent-%COMP%]{padding:.25rem .6rem;border-radius:9999px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.025em}.chip.version[_ngcontent-%COMP%]{background:var(--theme-surface-variant);color:var(--theme-text-secondary)}.chip.category[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb),.1);color:var(--primary-color);border:1px solid rgba(var(--primary-color-rgb),.2)}.chip.type[_ngcontent-%COMP%]{background:var(--theme-surface-variant);color:var(--theme-text-secondary)}.chip.optional[_ngcontent-%COMP%]{background:var(--theme-surface-variant);color:var(--theme-text-tertiary);font-size:.65rem}.chip.param-type[_ngcontent-%COMP%]{background:var(--theme-surface-variant);color:var(--theme-text-tertiary);font-size:.65rem;margin-left:.5rem}.dialog-content[_ngcontent-%COMP%]{padding:2rem!important;overflow-y:auto}.info-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;margin-top:1.5rem}.info-section[_ngcontent-%COMP%]:first-child{margin-top:0}.info-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:var(--theme-text-secondary);text-transform:uppercase;letter-spacing:.05em;margin-bottom:1rem}.description-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:var(--theme-text-primary);margin:0;white-space:pre-wrap}.grid-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:var(--theme-text-tertiary);text-transform:uppercase}.value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--theme-text-primary)}.empty-state[_ngcontent-%COMP%]{font-style:italic;color:var(--theme-text-tertiary);font-size:.9rem}.simulation-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:.75rem;font-weight:600;margin-bottom:1rem}.simulation-status.passed[_ngcontent-%COMP%]{background:var(--mat-sys-success-container);color:var(--mat-sys-success)}.simulation-status.failed[_ngcontent-%COMP%]{background:var(--mat-sys-error-container);color:var(--mat-sys-error)}.violations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.violation-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;padding:.5rem;background:var(--theme-surface-elevated);border-radius:.5rem}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:24px;padding:1rem 2rem!important;border-top:1px solid var(--theme-border);background:var(--theme-surface-elevated);margin:0!important}.spacer[_ngcontent-%COMP%]{flex:1}  .mat-mdc-list-item-title{font-weight:600!important}  .mat-mdc-list-item{height:auto!important;padding-top:.5rem!important;padding-bottom:.5rem!important}"]})};var le=(t,i)=>i.accession_id;function ce(t,i){t&1&&(n(0,"div",9),g(1,"mat-spinner",11),o())}function me(t,i){t&1&&(n(0,"th",27),a(1," Name "),o())}function se(t,i){t&1&&(n(0,"span",32),a(1,"Top Level"),o())}function pe(t,i){if(t&1&&(n(0,"td",28)(1,"div",29)(2,"div",30)(3,"span",31),a(4),o(),y(5,se,2,0,"span",32),o()()()),t&2){let e=i.$implicit;r(4),m(e.name),r(),b(e.is_top_level?5:-1)}}function de(t,i){t&1&&(n(0,"th",27),a(1," Version "),o())}function _e(t,i){if(t&1&&(n(0,"td",33)(1,"span",34),a(2),o()()),t&2){let e=i.$implicit;r(2),m(e.version)}}function fe(t,i){t&1&&(n(0,"th",27),a(1," Description "),o())}function ue(t,i){if(t&1&&(n(0,"td",35),a(1),o()),t&2){let e=i.$implicit;r(),I(" ",e.description||"No description"," ")}}function ge(t,i){t&1&&(n(0,"th",27),a(1," Category "),o())}function xe(t,i){if(t&1&&(n(0,"span",36),a(1),o()),t&2){let e=s().$implicit;r(),I(" ",e.category," ")}}function ve(t,i){t&1&&(n(0,"span",37),a(1,"Uncategorized"),o())}function Ce(t,i){if(t&1&&(n(0,"td",33),y(1,xe,2,1,"span",36)(2,ve,2,0,"span",37),o()),t&2){let e=i.$implicit;r(),b(e.category?1:2)}}function ye(t,i){t&1&&(n(0,"th",38),a(1," Actions "),o())}function be(t,i){if(t&1){let e=h();n(0,"td",39)(1,"div",40)(2,"button",41),u("click",function(c){let d=v(e).$implicit,P=s(3);return c.stopPropagation(),C(P.runProtocol(d))}),n(3,"mat-icon"),a(4,"play_arrow"),o()()()()}}function he(t,i){t&1&&g(0,"tr",42)}function Pe(t,i){if(t&1){let e=h();n(0,"tr",43),u("click",function(){let c=v(e).$implicit,d=s(3);return C(d.viewDetails(c))}),o()}}function Me(t,i){if(t&1&&(n(0,"table",12),w(1,14),f(2,me,2,0,"th",15)(3,pe,6,2,"td",16),S(),w(4,17),f(5,de,2,0,"th",15)(6,_e,3,1,"td",18),S(),w(7,19),f(8,fe,2,0,"th",15)(9,ue,2,1,"td",20),S(),w(10,21),f(11,ge,2,0,"th",15)(12,Ce,3,1,"td",18),S(),w(13,22),f(14,ye,2,0,"th",23)(15,be,5,0,"td",24),S(),f(16,he,1,0,"tr",25)(17,Pe,1,0,"tr",26),o()),t&2){let e=s(2);p("dataSource",e.filteredProtocols()),r(16),p("matHeaderRowDef",e.displayedColumns),r(),p("matRowDefColumns",e.displayedColumns)}}function we(t,i){if(t&1){let e=h();n(0,"app-protocol-card",45),u("select",function(c){v(e);let d=s(3);return C(d.viewDetails(c))}),o()}if(t&2){let e=i.$implicit;p("protocol",e)}}function Se(t,i){if(t&1&&(n(0,"div",13),J(1,we,1,1,"app-protocol-card",44,le),o()),t&2){let e=s(2);r(),X(e.filteredProtocols())}}function Ee(t,i){if(t&1&&y(0,Me,18,3,"table",12)(1,Se,3,0,"div",13),t&2){let e=s();b(e.viewState().viewType==="table"||e.viewState().viewType==="list"?0:1)}}function De(t,i){if(t&1){let e=h();n(0,"div",10)(1,"mat-icon",46),a(2,"science"),o(),n(3,"p",47),a(4,"No protocols found"),o(),n(5,"p",48),a(6,"Try adjusting your search or upload a new protocol"),o(),n(7,"button",49),u("click",function(){v(e);let c=s();return C(c.uploadProtocol())}),n(8,"mat-icon"),a(9,"upload"),o(),a(10," Upload Protocol "),o()()}}var j=class t{protocolService=x($);router=x(T);dialog=x(lt);protocols=E([]);isLoading=E(!1);viewState=E({viewType:"table",groupBy:null,filters:{},sortBy:"name",sortOrder:"asc",search:""});viewConfig=F(()=>({viewTypes:["table","card"],filters:[{key:"category",label:"Category",type:"multiselect",options:this.categoryOptions()},{key:"type",label:"Type",type:"select",options:[{label:"All Types",value:"all"},{label:"Top Level",value:"top_level"},{label:"Sub-Protocol",value:"sub"}]},{key:"status",label:"Status",type:"multiselect",options:[{label:"Passed",value:"passed"},{label:"Failed",value:"failed"},{label:"Not Simulated",value:"none"}]}],sortOptions:[{label:"Name",value:"name"},{label:"Category",value:"category"},{label:"Version",value:"version"}],storageKey:"protocol-library-view",defaults:{viewType:"table",sortBy:"name",sortOrder:"asc"}}));categoryOptions=F(()=>{let i=new Set;return this.protocols().forEach(e=>{e.category&&i.add(e.category)}),Array.from(i).sort().map(e=>({label:e,value:e}))});filteredProtocols=F(()=>{let i=this.viewState(),e=i.search.toLowerCase(),l=i.filters.category||[],c=i.filters.type?.[0]||"all",d=i.filters.status||[],P=this.protocols().filter(_=>{let Y=!e||_.name.toLowerCase().includes(e)||_.description?.toLowerCase().includes(e)||_.category?.toLowerCase().includes(e),W=l.length===0||_.category&&l.includes(_.category),G=c==="all"||c==="top_level"&&_.is_top_level||c==="sub"&&!_.is_top_level,M=!0;return d.length>0&&(M=!1,d.includes("passed")&&_.simulation_result?.passed===!0&&(M=!0),d.includes("failed")&&_.simulation_result&&_.simulation_result.passed===!1&&(M=!0),d.includes("none")&&!_.simulation_result&&(M=!0)),Y&&W&&G&&M});return P=[...P].sort((_,Y)=>{let W=_[i.sortBy]||"",G=Y[i.sortBy]||"",M=W.toString().localeCompare(G.toString());return i.sortOrder==="asc"?M:-M}),P});displayedColumns=["name","version","description","category","actions"];constructor(){this.loadProtocols()}loadProtocols(){this.isLoading.set(!0),this.protocolService.getProtocols().pipe(R(()=>this.isLoading.set(!1))).subscribe(i=>{this.protocols.set(i)},i=>{console.error("Error fetching protocols:",i)})}viewDetails(i){this.dialog.open(q,{data:{protocol:i},width:"700px",maxWidth:"90vw",maxHeight:"90vh",panelClass:"praxis-dialog-panel"})}runProtocol(i){this.router.navigate(["/run"],{queryParams:{protocolId:i.accession_id}})}onStateChange(i){this.viewState.set(i)}uploadProtocol(){if(this.isLoading())return;let i=document.createElement("input");i.type="file",i.accept=".py",i.onchange=e=>{let c=e.target.files?.[0];c&&(this.isLoading.set(!0),this.protocolService.uploadProtocol(c).pipe(R(()=>this.isLoading.set(!1))).subscribe({next:()=>{this.loadProtocols()},error:d=>console.error("[ProtocolLibrary] Upload failed:",d)}))},i.click()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-protocol-library"]],decls:18,vars:5,consts:[[1,"p-6","max-w-screen-2xl","mx-auto","h-full","flex","flex-col"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4","mb-8"],[1,"text-3xl","font-bold","text-sys-text-primary","mb-1"],[1,"text-sys-text-secondary"],["mat-flat-button","","data-tour-id","import-protocol-btn",1,"!bg-gradient-to-br","!from-primary","!to-primary-dark","!text-white","!rounded-xl","!px-6","!py-6","!font-semibold","shadow-lg","shadow-primary/20","hover:shadow-primary/40","transition-all","hover:-translate-y-0.5",3,"click","disabled"],[1,"bg-surface","border","border-[var(--theme-border)]","rounded-3xl","overflow-hidden","backdrop-blur-xl","flex","flex-col","flex-1","min-h-0","shadow-xl"],[1,"bg-surface","border-b","border-[var(--theme-border)]","px-4","py-2"],[3,"stateChange","config","state"],[1,"flex-1","overflow-auto","bg-[var(--mat-sys-surface-variant)]","relative"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-white/50","dark:bg-black/50","z-10","backdrop-blur-sm"],[1,"flex","flex-col","items-center","justify-center","h-full","text-sys-text-tertiary","py-20"],["diameter","40"],["mat-table","","data-tour-id","protocol-table",1,"!bg-transparent","w-full",3,"dataSource"],[1,"p-6","grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["matColumnDef","name"],["mat-header-cell","","class","px-6 py-4",4,"matHeaderCellDef"],["mat-cell","","class","!text-sys-text-primary border-b !border-[var(--theme-border)] px-6 py-4",4,"matCellDef"],["matColumnDef","version"],["mat-cell","","class","!text-sys-text-secondary border-b !border-[var(--theme-border)] px-6 py-4",4,"matCellDef"],["matColumnDef","description"],["mat-cell","","class","!text-sys-text-secondary opacity-70 border-b !border-[var(--theme-border)] px-6 py-4 max-w-md truncate",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","actions"],["mat-header-cell","","class","px-6 py-4 text-center",4,"matHeaderCellDef"],["mat-cell","","class","border-b !border-[var(--theme-border)] px-6 py-4",4,"matCellDef"],["mat-header-row","","class","!h-12",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-[var(--mat-sys-surface-variant)] transition-colors cursor-pointer !h-16",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"px-6","py-4"],["mat-cell","",1,"!text-sys-text-primary","border-b","!border-[var(--theme-border)]","px-6","py-4"],[1,"flex","flex-col"],[1,"flex","items-center","gap-2"],[1,"font-medium","text-base"],[1,"top-level-badge"],["mat-cell","",1,"!text-sys-text-secondary","border-b","!border-[var(--theme-border)]","px-6","py-4"],[1,"font-mono","text-xs","bg-[var(--theme-surface-elevated)]","px-2","py-1","rounded","text-sys-text-secondary"],["mat-cell","",1,"!text-sys-text-secondary","opacity-70","border-b","!border-[var(--theme-border)]","px-6","py-4","max-w-md","truncate"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","text-xs","font-medium","bg-blue-400/10","text-blue-300","border","border-blue-400/20"],[1,"text-sys-text-tertiary","italic"],["mat-header-cell","",1,"px-6","py-4","text-center"],["mat-cell","",1,"border-b","!border-[var(--theme-border)]","px-6","py-4"],[1,"actions-cell"],["mat-icon-button","","matTooltip","Run Protocol",1,"!text-green-400","hover:!bg-green-400/20","transition-all",3,"click"],["mat-header-row","",1,"!h-12"],["mat-row","",1,"hover:bg-[var(--mat-sys-surface-variant)]","transition-colors","cursor-pointer","!h-16",3,"click"],[3,"protocol"],[3,"select","protocol"],[1,"!w-16","!h-16","!text-[64px]","opacity-40","mb-4"],[1,"text-lg","font-medium"],[1,"text-sm","opacity-60","mb-6"],["mat-flat-button","",1,"!bg-primary/10","!text-primary","!rounded-xl","!px-6","!py-6","!font-semibold","hover:!bg-primary/20","transition-all",3,"click"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),a(4,"Protocol Library"),o(),n(5,"p",3),a(6,"Manage and execute your experimental protocols"),o()(),n(7,"button",4),u("click",function(){return l.uploadProtocol()}),n(8,"mat-icon"),a(9,"upload"),o(),a(10," Upload Protocol "),o()(),n(11,"div",5)(12,"div",6)(13,"app-view-controls",7),u("stateChange",function(d){return l.onStateChange(d)}),o()(),n(14,"div",8),y(15,ce,2,0,"div",9),y(16,Ee,2,1)(17,De,11,0,"div",10),o()()()),e&2&&(r(7),p("disabled",l.isLoading()),r(6),p("config",l.viewConfig())("state",l.viewState()),r(2),b(l.isLoading()?15:-1),r(),b(l.filteredProtocols().length>0?16:17))},dependencies:[Lt,bt,Pt,Et,Mt,ht,Dt,wt,St,It,Tt,O,L,V,N,k,nt,it,ut,ft,z,_t,dt,H,B,Ht,At],styles:["[_nghost-%COMP%]{display:block;height:100%}  .mat-mdc-table{background:transparent!important}  th.mat-header-cell,   .mat-mdc-header-cell{background:var(--mat-sys-surface-container-high)!important;text-transform:uppercase;letter-spacing:.05em;font-weight:600;border-bottom:1px solid var(--mat-sys-outline-variant)}.top-level-badge[_ngcontent-%COMP%]{background:var(--mat-sys-primary-container);color:var(--mat-sys-on-primary-container);padding:2px 8px;border-radius:4px;font-size:11px;font-weight:500}.actions-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px}"],changeDetection:0})};function Ie(t,i){if(t&1&&(n(0,"div",6)(1,"mat-card",8)(2,"mat-card-header")(3,"mat-card-title"),a(4,"Information"),o()(),n(5,"mat-card-content")(6,"div",9)(7,"div",10)(8,"span",11),a(9,"Accession ID:"),o(),n(10,"span",12),a(11),o()(),n(12,"div",10)(13,"span",11),a(14,"Version:"),o(),n(15,"span",12),a(16),o()(),n(17,"div",10)(18,"span",11),a(19,"Category:"),o(),n(20,"span",12),a(21),o()(),n(22,"div",10)(23,"span",11),a(24,"Type:"),o(),n(25,"span",12),a(26),o()()(),n(27,"div",13)(28,"h3"),a(29,"Description"),o(),n(30,"p"),a(31),o()()()()()),t&2){let e,l,c,d,P,_=s(2);r(11),m((e=_.protocol())==null?null:e.accession_id),r(5),m((l=_.protocol())==null?null:l.version),r(5),m(((c=_.protocol())==null?null:c.category)||"N/A"),r(5),m((d=_.protocol())!=null&&d.is_top_level?"Top Level":"Sub-Protocol"),r(5),m(((P=_.protocol())==null?null:P.description)||"No description provided.")}}function Te(t,i){if(t&1){let e=h();n(0,"div",7)(1,"p"),a(2,"Protocol not found."),o(),n(3,"button",14),u("click",function(){v(e);let c=s(2);return C(c.goBack())}),a(4,"Back to Library"),o()()}}function Le(t,i){if(t&1){let e=h();n(0,"div",0)(1,"div",2)(2,"button",3),u("click",function(){v(e);let c=s();return C(c.goBack())}),n(3,"mat-icon"),a(4,"arrow_back"),o()(),n(5,"h1"),a(6),o(),g(7,"span",4),n(8,"button",5),u("click",function(){v(e);let c=s();return C(c.runProtocol())}),n(9,"mat-icon"),a(10,"play_arrow"),o(),a(11," Run Protocol "),o()(),y(12,Ie,32,5,"div",6),y(13,Te,5,0,"div",7),o()}if(t&2){let e,l=s();r(6),m(((e=l.protocol())==null?null:e.name)||"Loading..."),r(2),p("disabled",!l.protocol()),r(4),b(l.protocol()?12:-1),r(),b(!l.protocol()&&!l.isLoading()?13:-1)}}function Oe(t,i){t&1&&(n(0,"div",1),g(1,"mat-spinner",15),o())}var U=class t{protocolService=x($);router=x(T);protocol=E(null);isLoading=E(!0);set id(i){this.loadProtocol(i)}loadProtocol(i){this.isLoading.set(!0),this.protocolService.getProtocols().pipe(R(()=>this.isLoading.set(!1))).subscribe(e=>{let l=e.find(c=>c.accession_id===i);l?this.protocol.set(l):console.error("Protocol not found")},e=>{console.error("Error fetching protocol details:",e)})}goBack(){this.router.navigate(["/protocols"])}runProtocol(){let i=this.protocol();i&&this.router.navigate(["/run"],{queryParams:{protocolId:i.accession_id}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-protocol-detail"]],inputs:{id:"id"},decls:2,vars:1,consts:[[1,"protocol-detail-container"],[1,"loading-container"],[1,"header"],["mat-icon-button","",3,"click"],[1,"spacer"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"content"],[1,"no-protocol-found"],[1,"info-card"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"description-section"],["mat-flat-button","","color","primary",3,"click"],["diameter","40"]],template:function(e,l){e&1&&y(0,Le,14,4,"div",0)(1,Oe,2,0,"div",1),e&2&&b(l.isLoading()?1:0)},dependencies:[yt,gt,vt,Ct,xt,V,N,k,O,L,A,H,B],styles:[".protocol-detail-container[_ngcontent-%COMP%]{padding:32px;height:100%;display:flex;flex-direction:column;background:var(--mat-sys-surface);border-radius:24px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px;gap:24px;border-bottom:1px solid var(--theme-border);padding-bottom:16px}h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:600;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.spacer[_ngcontent-%COMP%]{display:none}.content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-top:8px}.info-card[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:16px;border:1px solid var(--mat-sys-outline-variant);background:var(--mat-sys-surface-container-low)}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:24px;margin-bottom:32px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--mat-sys-color-on-surface-variant);margin-bottom:6px;opacity:.8}.value[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}.description-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.875rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em;margin-bottom:12px;color:var(--mat-sys-color-on-surface-variant)}.description-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-wrap;line-height:1.6;font-size:1rem;margin:0;color:var(--mat-sys-on-surface)}.loading-container[_ngcontent-%COMP%], .no-protocol-found[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;flex-direction:column}"],changeDetection:0})};var Lo=[{path:"",component:j},{path:":id",component:U}];export{Lo as PROTOCOL_ROUTES};
