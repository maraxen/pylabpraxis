import{a as V}from"./chunk-HOWLB6L5.js";import{a as j,b as A}from"./chunk-HGHWDJ3Y.js";import{a as $}from"./chunk-U2FQBRAF.js";import"./chunk-KHLMMB7R.js";import"./chunk-GKGNTNFJ.js";import{a as F}from"./chunk-SEKTGI6S.js";import{a as B}from"./chunk-FHX7ZVQY.js";import{d as O}from"./chunk-JIGZDOJQ.js";import"./chunk-OFJDRZ5L.js";import"./chunk-LAXWCL6A.js";import{c as P}from"./chunk-QEA2ESGG.js";import"./chunk-JG6HUHEY.js";import{c as C}from"./chunk-PWVAMWZ2.js";import"./chunk-GX2D2L2X.js";import"./chunk-O2OSWUJ6.js";import"./chunk-ULQGHXUB.js";import"./chunk-FFXGIJC7.js";import{f as L}from"./chunk-7F4BNMQ6.js";import{a as T,b as I}from"./chunk-HJ4PUJUU.js";import"./chunk-GW7MQSL6.js";import"./chunk-F4M4TAIC.js";import"./chunk-FGBSBVHW.js";import"./chunk-5R36QA5Q.js";import{h as H}from"./chunk-SJZ6P2DA.js";import"./chunk-SKMC2KSJ.js";import{R as D,S as N}from"./chunk-YMB734HE.js";import{d as E}from"./chunk-HUJ7WYYJ.js";import{b as R,c as k}from"./chunk-M6LIKZVL.js";import"./chunk-Q6UYEA4T.js";import{$b as g,Ac as b,Bb as w,Bc as n,Cc as m,Dc as d,Ec as S,Ga as l,Pc as M,Sb as u,Tb as x,Wb as y,Xb as h,Yb as f,Zb as i,Zc as p,_b as t,e as _,lb as s,ma as v,mc as c}from"./chunk-ZXFVGPYG.js";import"./chunk-RNQFGQA5.js";var G=r=>["/app/monitor",r],U=(r,e)=>e.id;function W(r,e){r&1&&(i(0,"a",7)(1,"mat-icon"),n(2,"schedule"),t(),n(3," Schedule "),t())}function q(r,e){if(r&1&&(i(0,"span",37),g(1,"span",44),n(2),t()),r&2){let a=c();s(2),d(" ",a.runningCount()," Active ")}}function J(r,e){if(r&1&&(i(0,"div",50),g(1,"mat-progress-bar",55),i(2,"span",56),n(3),t()()),r&2){let a=c().$implicit;s(),f("value",a.progress),s(2),d("",a.progress,"%")}}function K(r,e){if(r&1&&(i(0,"div",45)(1,"div",46)(2,"div",47)(3,"h3",48),n(4),t(),i(5,"span",49),n(6),t()(),i(7,"span"),n(8),t()(),u(9,J,4,2,"div",50),i(10,"div",51)(11,"span",52)(12,"mat-icon",53),n(13,"schedule"),t(),n(14),t(),i(15,"mat-icon",54),n(16,"visibility"),t()()()),r&2){let a=e.$implicit,o=c(2);f("routerLink",M(8,G,a.id)),s(4),m(a.name),s(2),m(a.protocolName),s(),b(o.getStatusClass(a.status)+" px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider"),s(),d(" ",a.status," "),s(),x(a.status==="running"?9:-1),s(5),d(" Started ",o.formatTimeAgo(a.startedAt)," ")}}function Q(r,e){if(r&1&&y(0,K,17,10,"div",45,U),r&2){let a=c();h(a.currentRuns())}}function X(r,e){r&1&&(i(0,"div",38)(1,"mat-icon",57),n(2,"science"),t(),i(3,"p",58),n(4,"No experiments running right now"),t(),i(5,"a",59),n(6,"Start a Protocol"),t()())}function Y(r,e){if(r&1&&(i(0,"a",60)(1,"div",61)(2,"mat-icon",62),n(3),t()(),i(4,"div",63)(5,"div",64),n(6),t(),i(7,"div",65),n(8),t()(),i(9,"mat-icon",66),n(10,"chevron_right"),t()()),r&2){let a=e.$implicit,o=c(2);f("routerLink",M(8,G,a.id))("matTooltip","View run details"),s(),b(o.getStatusBgClass(a.status)),s(2),m(o.getStatusIcon(a.status)),s(3),m(a.name),s(2),S("",a.protocolName," \u2022 ",a.duration)}}function Z(r,e){if(r&1&&y(0,Y,11,10,"a",60,U),r&2){let a=c();h(a.recentRuns())}}function ee(r,e){r&1&&(i(0,"div",43)(1,"mat-icon",67),n(2,"history"),t(),i(3,"p"),n(4,"No recent activity"),t()())}var z=class r{assetService=v(P);protocolService=v(B);executionService=v(O);modeService=v(C);subscription=new _;totalProtocols=l(0);totalResources=l(0);allMachines=l([]);runTrend=l([2,1,3,2,4,3,5]);currentRuns=l([]);recentRuns=l([]);runningCount=p(()=>this.currentRuns().filter(e=>e.status==="running").length);hasRunningExperiments=p(()=>this.currentRuns().length>0);physicalMachinesCount=p(()=>this.allMachines().filter(e=>!e.is_simulation_override).length);simulatedMachinesCount=p(()=>this.allMachines().filter(e=>e.is_simulation_override).length);physicalOnlineMachines=p(()=>this.allMachines().filter(e=>!e.is_simulation_override&&e.status!=="offline"&&e.status!=="error").length);simulatedOnlineMachines=p(()=>this.allMachines().filter(e=>e.is_simulation_override&&e.status!=="offline"&&e.status!=="error").length);ngOnInit(){this.loadStats(),this.loadRuns(),this.subscribeToExecution()}ngOnDestroy(){this.subscription.unsubscribe()}loadStats(){this.subscription.add(this.assetService.getMachines().subscribe(e=>{this.allMachines.set(e)})),this.subscription.add(this.assetService.getResources().subscribe(e=>{this.totalResources.set(e.length)})),this.subscription.add(this.protocolService.getProtocols().subscribe(e=>{this.totalProtocols.set(e.length)}))}loadRuns(){this.recentRuns.set([])}subscribeToExecution(){let e=this.executionService.currentRun();e&&this.currentRuns.set([{id:e.runId,name:e.protocolName,protocolName:e.protocolName,status:this.mapExecutionStatus(e.status),progress:e.progress,startedAt:new Date}])}mapExecutionStatus(e){switch(e){case"running":return"running";case"completed":return"completed";case"failed":return"failed";case"cancelled":return"failed";default:return"pending"}}getStatusIcon(e){switch(e){case"running":return"play_arrow";case"completed":return"check_circle";case"failed":return"error";case"pending":return"schedule";default:return"help"}}formatTimeAgo(e){let o=Math.floor((new Date().getTime()-e.getTime())/1e3);return o<60?"just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:`${Math.floor(o/86400)}d ago`}getStatusClass(e){switch(e){case"running":return"!bg-[var(--mat-sys-primary-container)] !text-[var(--mat-sys-primary)]";case"completed":return"!bg-[var(--mat-sys-success-container)] !text-[var(--mat-sys-success)]";case"failed":return"!bg-[var(--mat-sys-error-container)] !text-[var(--mat-sys-error)]";case"pending":return"!bg-[var(--mat-sys-warning-container)] !text-[var(--mat-sys-warning)]";default:return"!bg-[var(--mat-sys-surface-variant)] !text-sys-text-primary"}}getStatusBgClass(e){switch(e){case"running":return"bg-[var(--mat-sys-primary-container)]";case"completed":return"bg-[var(--mat-sys-success-container)]";case"failed":return"bg-[var(--mat-sys-error-container)]";case"pending":return"bg-[var(--mat-sys-warning-container)]";default:return"bg-[var(--mat-sys-surface-variant)]"}}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=w({type:r,selectors:[["app-home"]],decls:90,vars:12,consts:[["data-tour-id","dashboard-root",1,"p-6","max-w-screen-2xl","mx-auto"],[1,"mb-8","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"greeting"],[1,"text-3xl","font-bold","text-sys-text-primary","mb-1"],[1,"text-sys-text-secondary"],[1,"flex","gap-3","w-full","md:w-auto"],["mat-flat-button","","routerLink","/app/run",1,"!bg-gradient-to-br","!from-primary","!to-primary-dark","!text-white","!rounded-xl","!px-6","!py-6","!font-semibold","flex","items-center","gap-2","flex-1","md:flex-none","justify-center","shadow-lg","shadow-primary/20","hover:shadow-primary/40","transition-all","hover:-translate-y-0.5"],["mat-stroked-button","","routerLink","/app/protocols",1,"!border-[var(--theme-border)]","!text-sys-text-primary","!rounded-xl","!px-6","!py-6","flex","items-center","gap-2","flex-1","md:flex-none","justify-center","hover:bg-[var(--mat-sys-surface-variant)]","transition-all"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mb-8"],["routerLink","/app/monitor","matTooltip","View active protocol runs",1,"praxis-card","premium","group","cursor-pointer"],[1,"card-header","pb-0"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","bg-gradient-to-br","from-primary/20","to-secondary/20","shrink-0"],[1,"text-primary"],[1,"w-16","h-8","ml-auto"],["color","var(--mat-sys-primary)",3,"data"],[1,"card-content"],[1,"text-3xl","font-bold","text-sys-text-primary","block"],[1,"card-subtitle"],[1,"absolute","top-4","right-4","w-2","h-2","bg-[var(--mat-sys-primary)]","rounded-full","animate-pulse","shadow-[0_0_8px_var(--mat-sys-primary)]"],["routerLink","/app/assets","matTooltip","View laboratory machines",1,"praxis-card","premium","group","cursor-pointer"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","bg-[var(--mat-sys-tertiary-container)]","shrink-0"],[1,"text-[var(--mat-sys-tertiary)]"],[1,"flex","flex-col","items-end","ml-auto"],[1,"text-sm","font-bold","text-sys-text-secondary"],[1,"text-[8px]","uppercase","font-bold","tracking-tighter","text-sys-text-tertiary"],[1,"text-base","font-normal","text-sys-text-tertiary"],["routerLink","/app/protocols","matTooltip","Manage protocols",1,"praxis-card","premium","group","cursor-pointer"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","bg-[var(--mat-sys-surface-variant)]","shrink-0"],[1,"text-[var(--theme-text-primary)]"],["routerLink","/app/assets","matTooltip","Manage resources",1,"praxis-card","premium","group","cursor-pointer"],[1,"w-12","h-12","rounded-xl","flex","items-center","justify-center","bg-[var(--mat-sys-warning-container)]","shrink-0"],[1,"text-[var(--mat-sys-warning)]"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","praxis-card"],[1,"card-header","border-b","border-[var(--theme-border)]","bg-[var(--mat-sys-surface-variant)]"],[1,"flex","justify-between","items-center","w-full"],[1,"text-lg","font-semibold","text-sys-text-primary","flex","items-center","gap-2"],[1,"flex","items-center","gap-2","text-sm","font-medium","text-[var(--mat-sys-primary)]","bg-[var(--mat-sys-primary-container)]","px-3","py-1","rounded-full","border","border-[var(--mat-sys-primary)]/20"],[1,"flex","flex-col","items-center","justify-center","py-12","empty-state-text"],[1,"flex","flex-col","gap-6"],[1,"praxis-card"],["mat-button","","routerLink","/app/monitor",1,"!text-sys-text-secondary","hover:!text-sys-text-primary"],[1,"card-content","pt-2"],[1,"p-8","text-center","empty-state-text"],[1,"w-1.5","h-1.5","rounded-full","bg-[var(--mat-sys-primary)]","animate-pulse"],["matTooltip","View run details",1,"praxis-card-min","group","cursor-pointer","mb-3","hover:bg-[var(--mat-sys-surface-variant)]","transition-all",3,"routerLink"],[1,"flex","justify-between","items-start","mb-3"],[1,"min-w-0"],[1,"font-semibold","text-sys-text-primary","group-hover:text-primary","transition-colors","truncate"],[1,"text-xs","text-sys-text-secondary","truncate","block"],[1,"flex","items-center","gap-4","mb-3"],[1,"flex","justify-between","items-center","text-xs","text-sys-text-tertiary"],[1,"flex","items-center","gap-1.5"],[1,"!w-3.5","!h-3.5","!text-[14px]"],[1,"!w-4","!h-4","!text-[16px]","opacity-0","group-hover:opacity-100","transition-opacity"],["mode","determinate",1,"flex-1","rounded-full","overflow-hidden","!h-1.5",3,"value"],[1,"text-xs","font-bold","text-primary","min-w-[2.5rem]","text-right"],[1,"!w-16","!h-16","!text-[64px]","mb-4"],[1,"mb-4","text-center"],["mat-stroked-button","","routerLink","/app/run",1,"!border-primary","!text-primary","hover:!bg-primary/10"],["matTooltipPosition","left",1,"flex","items-center","gap-3","p-3","hover:bg-[var(--mat-sys-surface-variant)]","rounded-xl","transition-all","cursor-pointer","group","no-underline",3,"routerLink","matTooltip"],[1,"w-10","h-10","rounded-xl","flex","items-center","justify-center","transition-transform","group-hover:scale-105"],[1,"!text-sys-text-primary","!w-5","!h-5","!text-[20px]"],[1,"flex-1","min-w-0"],[1,"font-medium","text-sys-text-primary","truncate","group-hover:text-primary","transition-colors"],[1,"text-xs","text-sys-text-tertiary","truncate"],[1,"!text-sys-text-tertiary","!w-4","!h-4","!text-[16px]","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"!w-12","!h-12","!text-[48px]","mb-2"]],template:function(a,o){a&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),n(4,"Welcome back"),t(),i(5,"p",4),n(6,"Here's what's happening in your lab"),t()(),i(7,"div",5)(8,"a",6)(9,"mat-icon"),n(10,"play_circle"),t(),n(11," Run Protocol "),t(),g(12,"app-hardware-discovery-button"),u(13,W,4,0,"a",7),t()(),i(14,"section",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"mat-icon",12),n(19,"play_arrow"),t()(),i(20,"div",13),g(21,"app-sparkline",14),t()(),i(22,"div",15)(23,"span",16),n(24),t(),i(25,"span",17),n(26,"Running Protocols"),t()(),g(27,"div",18),t(),i(28,"div",19)(29,"div",10)(30,"div",20)(31,"mat-icon",21),n(32,"precision_manufacturing"),t()(),i(33,"div",22)(34,"span",23),n(35),t(),i(36,"span",24),n(37,"Simulated"),t()()(),i(38,"div",15)(39,"span",16),n(40),i(41,"span",25),n(42),t()(),i(43,"span",17),n(44,"Physical Hardware"),t()()(),i(45,"div",26)(46,"div",10)(47,"div",27)(48,"mat-icon",28),n(49,"science"),t()()(),i(50,"div",15)(51,"span",16),n(52),t(),i(53,"span",17),n(54,"Available Protocols"),t()()(),i(55,"div",29)(56,"div",10)(57,"div",30)(58,"mat-icon",31),n(59,"inventory_2"),t()()(),i(60,"div",15)(61,"span",16),n(62),t(),i(63,"span",17),n(64,"Active Resources"),t()()()(),i(65,"div",32)(66,"section",33)(67,"div",34)(68,"div",35)(69,"h2",36)(70,"mat-icon",12),n(71,"monitor_heart"),t(),n(72," Live Experiments "),t(),u(73,q,3,1,"span",37),t()(),i(74,"div",15),u(75,Q,2,0)(76,X,7,0,"div",38),t()(),i(77,"div",39)(78,"section",40)(79,"div",34)(80,"div",35)(81,"h2",36)(82,"mat-icon",21),n(83,"history"),t(),n(84," Recent Activity "),t(),i(85,"a",41),n(86,"View All"),t()()(),i(87,"div",42),u(88,Z,2,0)(89,ee,5,0,"div",43),t()()()()()),a&2&&(s(13),x(o.modeService.isBrowserMode()?-1:13),s(8),f("data",o.runTrend()),s(3),m(o.runningCount()),s(11),S("",o.simulatedOnlineMachines(),"/",o.simulatedMachinesCount()),s(5),d(" ",o.physicalOnlineMachines()),s(2),d("/",o.physicalMachinesCount()),s(10),m(o.totalProtocols()),s(10),m(o.totalResources()),s(11),x(o.runningCount()>0?73:-1),s(2),x(o.hasRunningExperiments()?75:76),s(13),x(o.recentRuns().length>0?88:89))},dependencies:[E,H,k,R,N,D,A,j,L,I,T,F,$,V],styles:['[_nghost-%COMP%]{display:block;width:100%}.praxis-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container-low);border:1px solid var(--mat-sys-outline-variant)!important;box-shadow:0 8px 32px #0006!important;position:relative;overflow:hidden}.praxis-card.premium[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--mat-sys-surface-container-low) 0%,var(--mat-sys-surface-container) 100%)!important}.praxis-card.premium[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 20%,var(--mat-sys-primary-container) 0%,transparent 40%),radial-gradient(circle at 80% 80%,var(--mat-sys-secondary-container) 0%,transparent 40%);opacity:.15;pointer-events:none;z-index:0}.empty-state-text[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)!important;opacity:1!important}.text-sys-text-secondary[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)!important}.card-subtitle[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);font-size:.875rem;font-weight:500}']})};export{z as HomeComponent};
