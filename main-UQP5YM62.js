import{b as oo,d as Xo}from"./chunk-ZQZJX7DH.js";import{a as ni}from"./chunk-VTEHCM5Y.js";import{b as Et,c as Dt}from"./chunk-SGOHYTL6.js";import{a as Lt,b as $o,c as zo}from"./chunk-JHMITVIR.js";import{a as Ho,b as Go,c as qo,d as Uo,e as je,f as de,g as Wo,i as K,j as $e,k as Qo,l as Ko,m as w}from"./chunk-RN275JER.js";import{a as Yo}from"./chunk-MGIPL4GQ.js";import{b as Oo}from"./chunk-62JYEZTC.js";import{a as ue,b as Re}from"./chunk-QFTYFRTT.js";import{a as be,b as At,c as Io}from"./chunk-KHLMMB7R.js";import{h as ko,i as Fo}from"./chunk-GKGNTNFJ.js";import{c as li,e as Ze,i as Rt,k as Eo}from"./chunk-BRQ7VCIS.js";import{d as Mo}from"./chunk-JIGZDOJQ.js";import"./chunk-OFJDRZ5L.js";import{a as lo}from"./chunk-LAXWCL6A.js";import{c as Pt}from"./chunk-QEA2ESGG.js";import{a as Mt,c as De,e as ro,f as ao,g as so,h as wt}from"./chunk-JG6HUHEY.js";import{a as Ae,b as Ct,c as re}from"./chunk-PWVAMWZ2.js";import"./chunk-GX2D2L2X.js";import"./chunk-ULQGHXUB.js";import{a as To,b as Ao,c as ci,d as Do,e as Ro,f as Lo,g as No,h as Bo,j as Vo,k as jo}from"./chunk-ERJX7L3L.js";import{a as si}from"./chunk-5XV7PTQI.js";import{a as Be,b as Ve}from"./chunk-FFXGIJC7.js";import{c as wo,e as So,f as Tt}from"./chunk-7F4BNMQ6.js";import{a as Ee,b as he}from"./chunk-HJ4PUJUU.js";import"./chunk-GW7MQSL6.js";import"./chunk-F4M4TAIC.js";import{a as St,d as _o,e as yo,f as It,g as vo,h as bo,i as Co,j as Ot,k as xo,m as ye,p as Ne,q as ve,r as ce}from"./chunk-FGBSBVHW.js";import"./chunk-5R36QA5Q.js";import{a as Ce,c as xe,e as Po,h as Me}from"./chunk-SJZ6P2DA.js";import{a as Le,c as Ie,e as kt}from"./chunk-SKMC2KSJ.js";import{P as ae,R as se,S as Q,U as le,W as ri,Z as V,_ as co,aa as ai,da as Xe,ha as mo,ia as po,ka as z,la as uo,ma as fo,na as go,oa as ho,r as xt,ra as _e,ta as Ft,ua as T}from"./chunk-YMB734HE.js";import{b as vt,c as ge,d as bt,e as Ji,f as eo,g as to,h as io}from"./chunk-HUJ7WYYJ.js";import{a as no,b as $,c as B}from"./chunk-M6LIKZVL.js";import{A as Ki,B as Yi,C as Xi,E as Zi,j as Gi,k as _t,l as ne,n as qi,s as R,t as Ui,v as Wi,w as Qi,z as yt}from"./chunk-Q6UYEA4T.js";import{$ as Ci,$b as _,Aa as ti,Ac as zi,Ba as Ii,Bb as y,Bc as l,C as it,Cb as N,Cc as b,Db as Vi,Dc as M,Eb as ii,Fa as Oi,G as ot,Ga as j,Gb as F,Ha as Pi,Hb as mt,I as Ke,Ja as Ti,K as nt,La as Ai,Ma as Ei,N as bi,Na as I,Nb as pt,Nc as Hi,O as rt,Pa as lt,Pc as oe,Qb as ji,Sb as g,Tb as h,Tc as G,Ua as Di,Ub as ke,Uc as J,Va as Ri,Vb as W,Vc as Te,Wb as O,Wc as gt,X as Ye,Xb as P,Y as fe,Yb as u,Zb as r,Zc as ht,_b as a,dc as ut,ea as xi,ec as ft,fc as te,gc as A,h as gi,ha as U,hc as $i,ia as L,j as hi,ka as Mi,kb as Li,kc as v,l as Qe,lb as c,ma as p,mc as m,na as wi,oa as Si,pb as Ni,q as _i,qc as H,r as C,rc as E,s as yi,sa as S,sc as D,t as vi,ta as k,tb as ct,ua as at,ub as dt,va as st,vb as pe,w as X,wa as ki,wb as Bi,wc as Fe,xa as Fi,xc as oi,yc as ie}from"./chunk-ZXFVGPYG.js";import{a as Ue,b as We}from"./chunk-RNQFGQA5.js";var wn="@",Sn=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=p(ki);loadingSchedulerFn=p(kn,{optional:!0});_engine;constructor(e,t,n,s,d){this.doc=e,this.delegate=t,this.zone=n,this.animationType=s,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-2DLIB6QX.js").then(n=>n),t;return this.loadingSchedulerFn?t=this.loadingSchedulerFn(e):t=e(),t.catch(n=>{throw new xi(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:s})=>{this._engine=n(this.animationType,this.doc);let d=new s(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(e,t){let n=this.delegate.createRenderer(e,t);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let s=new di(n);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let f=d.createRenderer(e,t);s.use(f),this.scheduler??=this.injector.get(Pi,null,{optional:!0}),this.scheduler?.notify(10)}).catch(d=>{s.use(n)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(t){Bi()};static \u0275prov=U({token:i,factory:i.\u0275fac})}return i})(),di=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,t,n){this.delegate.insertBefore(o,e,t,n)}removeChild(o,e,t,n){this.delegate.removeChild(o,e,t,n)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,t,n){this.delegate.setAttribute(o,e,t,n)}removeAttribute(o,e,t){this.delegate.removeAttribute(o,e,t)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,t,n){this.delegate.setStyle(o,e,t,n)}removeStyle(o,e,t){this.delegate.removeStyle(o,e,t)}setProperty(o,e,t){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(o,e,t)),this.delegate.setProperty(o,e,t)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,t,n){return this.shouldReplay(e)&&this.replay.push(s=>s.listen(o,e,t,n)),this.delegate.listen(o,e,t,n)}shouldReplay(o){return this.replay!==null&&o.startsWith(wn)}},kn=new Mi("");function Zo(i="animations"){return Ni("NgAsyncAnimations"),wi([{provide:ct,useFactory:()=>new Sn(p(Fi),p(Wi),p(Ii),i)},{provide:Ri,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Jo=(i,o)=>{if(p(re).isBrowserMode())return!0;let t=p(ue),n=p(ge);return t.isAuthenticated()?!0:(t.login(window.location.origin+o.url),!1)};var we=class i{_commands=j([]);commands=this._commands.asReadonly();registerCommand(o){this._commands.update(e=>[...e,o])}unregisterCommand(o){this._commands.update(e=>e.filter(t=>t.id!==o))}executeCommand(o){let e=this._commands().find(t=>t.id===o);e&&e.action()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Nt=class i{dialogRef=p(Mt);onboarding=p(Et);modeService=p(re);tutorial=p(Dt);startTutorial(){this.onboarding.markOnboardingComplete(),this.dialogRef.close(),this.tutorial.start()}skip(){this.onboarding.markOnboardingComplete(),this.dialogRef.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-welcome-dialog"]],decls:22,vars:0,consts:[["mat-dialog-title",""],[1,"prose","max-w-none"],[1,"mb-4"],[1,"mb-6"],[1,"text-sm","text-gray-600","mb-4","px-4","py-3","bg-blue-50","rounded-lg","border","border-blue-100","flex","items-start","gap-2"],[1,"material-icons","text-blue-500","mt-0.5"],["align","end",1,"gap-2"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){e&1&&(r(0,"h2",0),l(1,"Welcome to Praxis"),a(),r(2,"mat-dialog-content",1)(3,"p",2),l(4,"Praxis is your modern lab automation platform."),a(),r(5,"p",3),l(6,"Would you like a quick tour of the key features?"),a(),r(7,"p",4)(8,"span",5),l(9,"info"),a(),r(10,"span")(11,"strong"),l(12,"Note:"),a(),l(13," You are currently in "),r(14,"strong"),l(15,"Browser Mode"),a(),l(16,". The app is populated with sample data so you can explore safely without connecting hardware. "),a()()(),r(17,"mat-dialog-actions",6)(18,"button",7),v("click",function(){return t.skip()}),l(19,"Skip for Now"),a(),r(20,"button",8),v("click",function(){return t.startTutorial()}),l(21,"Start Tutorial"),a()())},dependencies:[wt,ro,so,ao,Q,se,Oo,Ft],styles:["[_nghost-%COMP%]{display:block;max-width:500px}"]})};function Fn(i,o){if(i&1){let e=A();r(0,"button",31),v("click",function(){S(e);let n=m();return k(n.logout())}),r(1,"mat-icon"),l(2,"logout"),a(),r(3,"span",7),l(4,"Logout"),a()()}}function In(i,o){i&1&&(r(0,"a",21)(1,"mat-icon"),l(2,"login"),a(),r(3,"span",7),l(4,"Login"),a()())}var Bt=class i{store=p(Re);router=p(ge);modeService=p(re);executionService=p(Mo);commandRegistry=p(we);hardwareDiscovery=p(lo);dialog=p(De);onboarding=p(Et);tutorial=p(Dt);constructor(){this.registerCommands()}ngOnInit(){this.onboarding.shouldShowWelcome()?this.dialog.open(Nt,{width:"600px",disableClose:!0,autoFocus:!1}):localStorage.getItem("praxis_pending_tutorial")==="true"&&(localStorage.removeItem("praxis_pending_tutorial"),setTimeout(()=>this.tutorial.start(),1e3))}registerCommands(){this.commandRegistry.registerCommand({id:"hardware.discover",label:"Discover Hardware",description:"Scan for connected devices (Serial/USB)",icon:"usb",category:"Hardware",action:()=>{this.dialog.open(Io,{width:"800px",maxHeight:"90vh"}),this.hardwareDiscovery.isDiscovering()||this.hardwareDiscovery.discoverAll()}})}systemStatus=ht(()=>{let o=this.modeService.isBrowserMode(),e=this.executionService.isConnected(),t=this.executionService.currentRun(),n=this.modeService.modeLabel();return!o&&!e&&(n==="Production"||n==="Lite")||t?.status==="failed"?{color:"problem",icon:"error_outline",message:t?.status==="failed"?`Run Failed: ${t.protocolName}`:"System Disconnected"}:t?.status==="running"||t?.status==="pending"||t?.status==="cancelled"?{color:"attention",icon:t.status==="running"?"running_with_errors":"hourglass_empty",message:`Protocol ${t.status}: ${t.protocolName}`}:{color:"good",icon:o?"cloud_done":"check_circle_outline",message:`System Ready - ${n} Mode`}});isInApp(){return this.router.url.startsWith("/app")}themeIcon(){switch(this.store.theme()){case"light":return"light_mode";case"dark":return"dark_mode";case"system":return"brightness_auto";default:return"brightness_auto"}}cycleTheme(){let o=["light","dark","system"],t=(o.indexOf(this.store.theme())+1)%o.length;this.store.setTheme(o[t])}logout(){this.store.logout()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-unified-shell"]],decls:89,vars:12,consts:[[1,"shell-layout"],[1,"sidebar-rail"],["matTooltip","Home","matTooltipPosition","right",1,"nav-item","logo-item",3,"routerLink"],[1,"logo-container"],[1,"logo-image"],[1,"nav-divider"],["data-tour-id","nav-run","routerLink","/app/run","routerLinkActive","active","matTooltip","Run Protocol","matTooltipPosition","right",1,"nav-item"],[1,"nav-label"],["data-tour-id","nav-monitor","routerLink","/app/monitor","routerLinkActive","active","matTooltip","Execution Monitor","matTooltipPosition","right",1,"nav-item"],["data-tour-id","nav-assets","routerLink","/app/assets","routerLinkActive","active","matTooltip","Assets","matTooltipPosition","right",1,"nav-item"],["data-tour-id","nav-protocols","routerLink","/app/protocols","routerLinkActive","active","matTooltip","Protocols","matTooltipPosition","right",1,"nav-item"],["data-tour-id","nav-workcell","routerLink","/app/workcell","routerLinkActive","active","matTooltip","Workcell View","matTooltipPosition","right",1,"nav-item"],["data-tour-id","nav-data","routerLink","/app/data","routerLinkActive","active","matTooltip","Data Analysis","matTooltipPosition","right",1,"nav-item"],["routerLink","/docs","routerLinkActive","active","matTooltip","Documentation","matTooltipPosition","right",1,"nav-item"],["data-tour-id","nav-playground","routerLink","/app/playground","routerLinkActive","active","matTooltip","Playground","matTooltipPosition","right",1,"nav-item"],[1,"spacer"],["data-tour-id","nav-settings","routerLink","/app/settings","routerLinkActive","active","matTooltip","Settings","matTooltipPosition","right",1,"nav-item"],["data-tour-id","theme-toggle","matTooltipPosition","right",1,"nav-item","control-btn","theme-toggle",3,"click","matTooltip"],[1,"nav-label","small"],["data-tour-id","status-indicator","matTooltipPosition","right",1,"mode-badge",3,"matTooltip"],["matTooltip","Logout","matTooltipPosition","right",1,"nav-item","control-btn"],["routerLink","/login","matTooltip","Sign In","matTooltipPosition","right",1,"nav-item"],[1,"main-wrapper"],[1,"main-content"],[1,"app-footer"],["href","https://github.com/maraxen/praxis","target","_blank","matTooltip","GitHub Repository",1,"footer-link"],["href","https://github.com/maraxen/praxis","target","_blank","matTooltip","Star on GitHub",1,"footer-link"],["href","https://github.com/maraxen/praxis/issues/new","target","_blank","matTooltip","Raise an Issue",1,"footer-link"],[1,"footer-divider"],["href","https://labautomation.io","target","_blank","matTooltip","LabAutomation.io",1,"footer-link"],["href","https://pylabrobot.org","target","_blank","matTooltip","PyLabRobot.org",1,"footer-link"],["matTooltip","Logout","matTooltipPosition","right",1,"nav-item","control-btn",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"nav",1)(2,"a",2)(3,"div",3),_(4,"div",4),a()(),_(5,"div",5),r(6,"a",6)(7,"mat-icon"),l(8,"play_circle"),a(),r(9,"span",7),l(10,"Run"),a()(),r(11,"a",8)(12,"mat-icon"),l(13,"monitor_heart"),a(),r(14,"span",7),l(15,"Monitor"),a()(),_(16,"div",5),r(17,"a",9)(18,"mat-icon"),l(19,"precision_manufacturing"),a(),r(20,"span",7),l(21,"Assets"),a()(),r(22,"a",10)(23,"mat-icon"),l(24,"science"),a(),r(25,"span",7),l(26,"Protocols"),a()(),_(27,"div",5),r(28,"a",11)(29,"mat-icon"),l(30,"view_in_ar"),a(),r(31,"span",7),l(32,"Workcell"),a()(),r(33,"a",12)(34,"mat-icon"),l(35,"bar_chart"),a(),r(36,"span",7),l(37,"Data"),a()(),_(38,"div",5),r(39,"a",13)(40,"mat-icon"),l(41,"menu_book"),a(),r(42,"span",7),l(43,"Docs"),a()(),r(44,"a",14)(45,"mat-icon"),l(46,"terminal"),a(),r(47,"span",7),l(48,"Playground"),a()(),_(49,"div",15),r(50,"a",16)(51,"mat-icon"),l(52,"settings"),a(),r(53,"span",7),l(54,"Settings"),a()(),_(55,"div",5),r(56,"button",17),G(57,"titlecase"),v("click",function(){return t.cycleTheme()}),r(58,"mat-icon"),l(59),a(),r(60,"span",18),l(61),a()(),r(62,"div",19)(63,"mat-icon"),l(64),a(),r(65,"span",7),l(66),a()(),g(67,Fn,5,0,"button",20)(68,In,5,0,"a",21),a(),r(69,"div",22)(70,"main",23),_(71,"router-outlet"),a(),r(72,"footer",24)(73,"a",25)(74,"mat-icon"),l(75,"code"),a()(),r(76,"a",26)(77,"mat-icon"),l(78,"star_border"),a()(),r(79,"a",27)(80,"mat-icon"),l(81,"bug_report"),a()(),_(82,"div",28),r(83,"a",29)(84,"mat-icon"),l(85,"forum"),a()(),r(86,"a",30)(87,"mat-icon"),l(88,"biotech"),a()()()()()),e&2&&(c(2),u("routerLink",t.modeService.isBrowserMode()||t.store.auth().isAuthenticated?"/app/home":"/"),c(54),u("matTooltip","Theme: "+J(57,10,t.store.theme())),c(3),b(t.themeIcon()),c(2),b(t.store.theme()),c(),zi(t.systemStatus().color),u("matTooltip",t.systemStatus().message),c(2),b(t.systemStatus().icon),c(2),b(t.modeService.modeLabel()),c(),h(t.store.auth().isAuthenticated&&!t.modeService.isBrowserMode()?67:t.modeService.isBrowserMode()?-1:68))},dependencies:[R,vt,bt,Ji,B,$,he,Ee,Q,qi],styles:[".shell-layout[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw;overflow:hidden;background:var(--theme-bg-gradient)}.sidebar-rail[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:5rem;min-width:5rem;background:var(--mat-sys-surface-container);border-right:1px solid var(--mat-sys-outline-variant);z-index:100;padding:.75rem 0;gap:.25rem}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:64px;height:56px;border-radius:12px;margin:2px 0;color:var(--mat-sys-on-surface-variant);text-decoration:none;transition:all .2s ease;cursor:pointer;border:none;background:transparent;gap:2px}.nav-item[_ngcontent-%COMP%]:hover{background:var(--mat-sys-surface-variant);color:var(--mat-sys-on-surface)}.nav-item.active[_ngcontent-%COMP%]{background:var(--mat-sys-primary-container);color:var(--mat-sys-on-primary-container)}.nav-item[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .nav-item.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--tertiary-color) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.nav-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.nav-label[_ngcontent-%COMP%]{display:none}.logo-item[_ngcontent-%COMP%]{margin-bottom:8px;opacity:1!important;height:48px}.logo-container[_ngcontent-%COMP%]{width:80px;height:60px;display:flex;align-items:center;justify-content:center;background:none;border:none;outline:none;transition:all .3s ease}.logo-item[_ngcontent-%COMP%]:hover   .logo-container[_ngcontent-%COMP%]{transform:scale(1.05)}.logo-item[_ngcontent-%COMP%]:hover{background:none!important}.logo-image[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,var(--primary-color) 0%,var(--tertiary-color) 100%);-webkit-mask:url(/assets/logo/praxis_logo.svg) no-repeat center;mask:url(/assets/logo/praxis_logo.svg) no-repeat center;-webkit-mask-size:contain;mask-size:contain}.nav-divider[_ngcontent-%COMP%]{width:40px;height:1px;background:var(--mat-sys-outline-variant);margin:4px 0}.spacer[_ngcontent-%COMP%]{flex:1}.control-btn[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.mode-badge[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:64px;height:56px;border-radius:12px;margin:2px 0;background:var(--mat-sys-surface-container-high);border:1px solid var(--mat-sys-outline-variant);color:var(--mat-sys-on-surface-variant);gap:2px}.mode-badge.good[_ngcontent-%COMP%]{background:var(--mat-sys-success-container);border-color:var(--status-success);color:var(--status-success)}.mode-badge.attention[_ngcontent-%COMP%]{background:var(--mat-sys-warning-container);border-color:var(--status-warning);color:var(--status-warning)}.mode-badge.problem[_ngcontent-%COMP%]{background:var(--mat-sys-error-container);border-color:var(--status-error);color:var(--status-error)}.theme-toggle[_ngcontent-%COMP%]{height:48px}.mode-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.main-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-width:0;position:relative}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}.app-footer[_ngcontent-%COMP%]{height:2rem;min-height:2rem;display:flex;align-items:center;justify-content:center;gap:1rem;background:var(--mat-sys-surface-container);border-top:1px solid var(--mat-sys-outline-variant);padding:0 1rem;z-index:10;font-size:.75rem}.footer-link[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);opacity:.5;transition:all .2s ease;display:flex;align-items:center;justify-content:center;text-decoration:none;width:1.5rem;height:1.5rem;border-radius:50%}.footer-link[_ngcontent-%COMP%]:hover{opacity:1;background:var(--mat-sys-surface-variant);color:var(--mat-sys-primary)}.footer-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.footer-divider[_ngcontent-%COMP%]{width:1px;height:1rem;background:var(--mat-sys-outline-variant);opacity:.5}@media(max-width:768px){.sidebar-rail[_ngcontent-%COMP%]{width:4rem;min-width:4rem}.nav-item[_ngcontent-%COMP%]{width:3.25rem;height:3.25rem}.nav-label[_ngcontent-%COMP%]{font-size:.55rem}.nav-divider[_ngcontent-%COMP%]{width:2rem}}"]})};function On(i,o){i&1&&(r(0,"div",9),_(1,"mat-spinner",11),r(2,"p",12),l(3,"Redirecting to login..."),a()())}function Pn(i,o){if(i&1){let e=A();r(0,"div",10)(1,"p",13),l(2),a(),r(3,"button",14),v("click",function(){S(e);let n=m();return k(n.retryLogin())}),l(4," Retry Login "),a()()}if(i&2){let e=m();c(2),b(e.error)}}var Vt=class i{keycloakService=p(ue);error="";loading=!0;isBrowserMode=Ct();async ngOnInit(){let o=new URLSearchParams(window.location.search),e=o.get("forceLogin")==="true",t=o.get("mockError"),n=o.get("mockLoading")==="true";if(this.isBrowserMode&&!e&&!t&&!n){console.log("[Browser Mode] Bypassing login, redirecting to home"),window.location.href="/app/home";return}if(t){this.loading=!1,this.error=t==="true"?"Simulated Login Error":t;return}if(n){this.loading=!0;return}this.loading=!0;try{if(this.keycloakService.isAuthenticated()&&!e){window.location.href="/app/home";return}await new Promise(s=>setTimeout(s,500)),await this.keycloakService.login()}catch(s){console.error("Login failed:",s),this.error=s?.message||"Failed to initialize login",this.loading=!1}}retryLogin(){this.error="",this.ngOnInit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-section"],[1,"logo-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"app-title"],[1,"app-subtitle"],[1,"glass-card"],[1,"loading-content"],[1,"error-content"],["diameter","40"],[1,"loading-text"],[1,"error-message"],["mat-button","",1,"retry-button",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),at(),r(4,"svg",4),_(5,"path",5),a()(),st(),r(6,"h1",6),l(7,"Praxis"),a(),r(8,"p",7),l(9,"Laboratory Automation Platform"),a()(),r(10,"mat-card",8)(11,"mat-card-content"),g(12,On,4,0,"div",9),g(13,Pn,5,1,"div",10),a()()()()),e&2&&(c(12),h(t.loading&&!t.error?12:-1),c(),h(t.error?13:-1))},dependencies:[Me,Ce,xe,Ve,Be],styles:['[_nghost-%COMP%]{display:block;height:100vh;width:100%}.login-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--mat-sys-surface-container-low) 0%,#16213e 50%,#0f3460 100%);padding:1rem;box-sizing:border-box;position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 30% 20%,rgba(237,122,155,.15) 0%,transparent 50%),radial-gradient(circle at 70% 80%,rgba(115,169,194,.15) 0%,transparent 50%);animation:_ngcontent-%COMP%_aurora 20s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_aurora{0%{transform:translate(0) rotate(0)}to{transform:translate(-5%,5%) rotate(10deg)}}.login-card[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;width:100%;max-width:420px}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#fff}.logo-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 1rem;padding:1rem;background:linear-gradient(135deg,var(--primary-color) 0%,var(--tertiary-color) 100%);border-radius:24px;box-shadow:0 8px 32px #ed7a9b4d}.logo-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff}.app-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0;background:linear-gradient(90deg,#fff,#fffc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.app-subtitle[_ngcontent-%COMP%]{font-size:.95rem;margin:.5rem 0 0;color:#ffffffb3;font-weight:400}.glass-card[_ngcontent-%COMP%]{width:100%;background:#14141ecc!important;backdrop-filter:blur(20px) saturate(180%);-webkit-backdrop-filter:blur(20px) saturate(180%);border:1px solid rgba(255,255,255,.1);border-radius:24px!important;box-shadow:0 8px 32px #0000004d}.glass-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:2rem!important}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;padding:2rem 0}.loading-text[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1rem;margin:0;text-shadow:0 1px 2px rgba(0,0,0,.5);font-weight:500}.error-content[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-error);display:flex;flex-direction:column;align-items:center;gap:1rem}.error-message[_ngcontent-%COMP%]{font-weight:500;margin:0}.retry-button[_ngcontent-%COMP%]{background:#ffffff1a!important;border:1px solid rgba(255,255,255,.3)!important;color:#fff!important;padding:.5rem 1.5rem!important;cursor:pointer;border-radius:8px!important;text-shadow:0 1px 2px rgba(0,0,0,.5);font-weight:500;transition:all .2s ease}.retry-button[_ngcontent-%COMP%]:hover{background:#fff3!important}@media(max-width:480px){.login-container[_ngcontent-%COMP%]{padding:1rem}.logo-icon[_ngcontent-%COMP%]{width:60px;height:60px}.app-title[_ngcontent-%COMP%]{font-size:1.5rem}.glass-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem!important}}']})};var jt=class i{keycloakService=p(ue);ngOnInit(){if(this.keycloakService.isAuthenticated()){window.location.href="/app/home";return}this.keycloakService.register()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-register"]],decls:16,vars:0,consts:[[1,"register-container"],[1,"register-card"],[1,"logo-section"],[1,"logo-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"app-title"],[1,"app-subtitle"],[1,"glass-card"],[1,"loading-content"],["diameter","40"],[1,"loading-text"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),at(),r(4,"svg",4),_(5,"path",5),a()(),st(),r(6,"h1",6),l(7,"Join Praxis"),a(),r(8,"p",7),l(9,"Create your account to get started"),a()(),r(10,"mat-card",8)(11,"mat-card-content")(12,"div",9),_(13,"mat-spinner",10),r(14,"p",11),l(15,"Redirecting to registration..."),a()()()()()())},dependencies:[Me,Ce,xe,Ve,Be],styles:['[_nghost-%COMP%]{display:block;min-height:100vh;width:100%}.register-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;align-items:center;justify-content:center;background:var(--theme-bg-gradient, linear-gradient(135deg, var(--mat-sys-surface-container-low) 0%, #16213e 50%, #0f3460 100%));padding:2rem 1rem;box-sizing:border-box;position:relative;overflow:hidden}.register-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 30% 20%,var(--aurora-primary, rgba(237, 122, 155, .15)) 0%,transparent 50%),radial-gradient(circle at 70% 80%,var(--aurora-secondary, rgba(115, 169, 194, .15)) 0%,transparent 50%);animation:_ngcontent-%COMP%_aurora 20s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_aurora{0%{transform:translate(0) rotate(0)}to{transform:translate(-5%,5%) rotate(10deg)}}.register-card[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;width:100%;max-width:480px}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:var(--theme-text-primary, white)}.logo-icon[_ngcontent-%COMP%]{width:70px;height:70px;margin:0 auto 1rem;padding:1rem;background:linear-gradient(135deg,var(--primary-color) 0%,var(--tertiary-color) 100%);border-radius:20px;box-shadow:0 8px 32px #ed7a9b4d}.logo-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff}.app-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;color:var(--theme-text-primary, white)}.app-subtitle[_ngcontent-%COMP%]{font-size:.95rem;margin:.5rem 0 0;color:var(--theme-text-secondary, rgba(255, 255, 255, .7));font-weight:400}.glass-card[_ngcontent-%COMP%]{width:100%;background:var(--glass-bg, rgba(255, 255, 255, .08))!important;backdrop-filter:var(--glass-blur, blur(20px));-webkit-backdrop-filter:var(--glass-blur, blur(20px));border:var(--glass-border, 1px solid rgba(255, 255, 255, .1));border-radius:24px!important;box-shadow:var(--glass-shadow, 0 8px 32px rgba(0, 0, 0, .3))}.glass-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:2rem!important}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;padding:2rem 0}.loading-text[_ngcontent-%COMP%]{color:var(--theme-text-secondary, rgba(255, 255, 255, .7));font-size:1rem;margin:0}@media(max-width:480px){.register-container[_ngcontent-%COMP%]{padding:1rem}.logo-icon[_ngcontent-%COMP%]{width:60px;height:60px}.app-title[_ngcontent-%COMP%]{font-size:1.5rem}.glass-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem!important}}']})};var $t=class i{ngOnInit(){let o=Ae.keycloak.url,e=Ae.keycloak.realm,t=Ae.keycloak.clientId,n=encodeURIComponent(window.location.origin+"/login"),s=`${o}/realms/${e}/login-actions/reset-credentials?client_id=${t}&redirect_uri=${n}`;window.location.href=s}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-forgot-password"]],decls:16,vars:0,consts:[[1,"forgot-container"],[1,"forgot-card"],[1,"logo-section"],[1,"logo-icon"],[1,"lock-icon"],[1,"app-title"],[1,"app-subtitle"],[1,"glass-card"],[1,"loading-content"],["diameter","40"],[1,"loading-text"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),l(5,"lock_reset"),a()(),r(6,"h1",5),l(7,"Reset Password"),a(),r(8,"p",6),l(9,"Redirecting to password reset..."),a()(),r(10,"mat-card",7)(11,"mat-card-content")(12,"div",8),_(13,"mat-spinner",9),r(14,"p",10),l(15,"Please wait..."),a()()()()()())},dependencies:[Me,Ce,xe,Ve,Be,B,$],styles:['[_nghost-%COMP%]{display:block;min-height:100vh;width:100%}.forgot-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;display:flex;align-items:center;justify-content:center;background:var(--theme-bg-gradient, linear-gradient(135deg, var(--mat-sys-surface-container-low) 0%, #16213e 50%, #0f3460 100%));padding:2rem 1rem;box-sizing:border-box;position:relative;overflow:hidden}.forgot-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 30% 20%,var(--aurora-primary, rgba(237, 122, 155, .15)) 0%,transparent 50%),radial-gradient(circle at 70% 80%,var(--aurora-secondary, rgba(115, 169, 194, .15)) 0%,transparent 50%);animation:_ngcontent-%COMP%_aurora 20s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_aurora{0%{transform:translate(0) rotate(0)}to{transform:translate(-5%,5%) rotate(10deg)}}.forgot-card[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;width:100%;max-width:420px}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:var(--theme-text-primary, white)}.logo-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 1rem;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--primary-color) 0%,var(--tertiary-color) 100%);border-radius:24px;box-shadow:0 8px 32px #ed7a9b4d}.logo-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#fff}.app-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;color:var(--theme-text-primary, white)}.app-subtitle[_ngcontent-%COMP%]{font-size:.95rem;margin:.5rem 0 0;color:var(--theme-text-secondary, rgba(255, 255, 255, .7));font-weight:400}.glass-card[_ngcontent-%COMP%]{width:100%;background:var(--glass-bg, rgba(255, 255, 255, .08))!important;backdrop-filter:var(--glass-blur, blur(20px));-webkit-backdrop-filter:var(--glass-blur, blur(20px));border:var(--glass-border, 1px solid rgba(255, 255, 255, .1));border-radius:24px!important;box-shadow:var(--glass-shadow, 0 8px 32px rgba(0, 0, 0, .3))}.glass-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:2rem!important}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;padding:2rem 0}.loading-text[_ngcontent-%COMP%]{color:var(--theme-text-secondary, rgba(255, 255, 255, .7));font-size:1rem;margin:0}@media(max-width:480px){.forgot-container[_ngcontent-%COMP%]{padding:1rem}.logo-icon[_ngcontent-%COMP%]{width:70px;height:70px}.logo-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px}.app-title[_ngcontent-%COMP%]{font-size:1.5rem}.glass-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem!important}}']})};var zt=class i{store=p(Re);isLightTheme=ht(()=>this.store.theme()==="light");constructor(){if(Ct()){window.location.href="/app/home";return}}toggleTheme(){let o=this.store.theme()==="light"?"dark":"light";this.store.setTheme(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-splash"]],decls:72,vars:4,consts:[[1,"splash-container"],["mat-icon-button","",1,"theme-toggle",3,"click","matTooltip"],[1,"bg-gradient"],[1,"floating-orbs"],[1,"orb","orb-1"],[1,"orb","orb-2"],[1,"orb","orb-3"],[1,"splash-content"],[1,"hero"],[1,"logo-container"],[1,"logo-icon-container"],[1,"logo-mark"],[1,"hero-title"],[1,"title-gradient"],[1,"hero-subtitle"],[1,"hero-description"],[1,"cta-buttons"],["mat-flat-button","","routerLink","/login",1,"cta-primary"],["mat-stroked-button","","routerLink","/register",1,"cta-secondary"],["href","https://github.com/PyLabRobot/pylabrobot","target","_blank",1,"github-link"],[1,"features"],[1,"feature-card"],[1,"feature-icon"],[1,"splash-footer"],[1,"version"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"button",1),v("click",function(){return t.toggleTheme()}),r(2,"mat-icon"),l(3),a()(),_(4,"div",2),r(5,"div",3),_(6,"div",4)(7,"div",5)(8,"div",6),a(),r(9,"div",7)(10,"section",8)(11,"div",9)(12,"div",10),_(13,"div",11),a()(),r(14,"h1",12)(15,"span",13),l(16,"Praxis"),a()(),r(17,"p",14),l(18," Next-Generation Laboratory Automation Platform "),a(),r(19,"p",15),l(20," Streamline your lab workflows with intelligent protocol execution, real-time monitoring, and seamless integration with PyLabRobot. "),a(),r(21,"div",16)(22,"a",17)(23,"mat-icon"),l(24,"login"),a(),l(25," Sign In "),a(),r(26,"a",18)(27,"mat-icon"),l(28,"person_add"),a(),l(29," Create Account "),a()(),r(30,"a",19)(31,"mat-icon"),l(32,"code"),a(),l(33," View on GitHub "),a()(),r(34,"section",20)(35,"div",21)(36,"div",22)(37,"mat-icon"),l(38,"science"),a()(),r(39,"h3"),l(40,"Protocol Management"),a(),r(41,"p"),l(42,"Upload, configure, and execute Python protocols with a visual interface"),a()(),r(43,"div",21)(44,"div",22)(45,"mat-icon"),l(46,"hub"),a()(),r(47,"h3"),l(48,"Device Integration"),a(),r(49,"p"),l(50,"Connect liquid handlers, plate readers, and more through PyLabRobot"),a()(),r(51,"div",21)(52,"div",22)(53,"mat-icon"),l(54,"monitoring"),a()(),r(55,"h3"),l(56,"Real-Time Monitoring"),a(),r(57,"p"),l(58,"Track execution progress with live status updates and logging"),a()(),r(59,"div",21)(60,"div",22)(61,"mat-icon"),l(62,"view_in_ar"),a()(),r(63,"h3"),l(64,"Deck Visualization"),a(),r(65,"p"),l(66,"Interactive deck layouts showing labware positions and status"),a()()(),r(67,"footer",23)(68,"p"),l(69,"Built with Angular & Material \u2022 Powered by PyLabRobot"),a(),r(70,"p",24),l(71,"v1.0.0"),a()()()()),e&2&&(ie("light-mode",t.isLightTheme()),c(),u("matTooltip",t.isLightTheme()?"Switch to Dark Mode":"Switch to Light Mode"),c(2),b(t.isLightTheme()?"dark_mode":"light_mode"))},dependencies:[bt,Q,se,ae,B,$,he,Ee],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}.splash-container[_ngcontent-%COMP%]{min-height:100vh;position:relative;overflow:hidden;background:var(--theme-bg-gradient);transition:all .4s ease}.theme-toggle[_ngcontent-%COMP%]{position:fixed;top:1.5rem;right:1.5rem;z-index:100;background:var(--theme-surface)!important;border:1px solid var(--theme-border)!important;color:var(--theme-text-primary)!important;transition:all .3s ease}.theme-toggle[_ngcontent-%COMP%]:hover{background:var(--theme-surface-elevated)!important;transform:scale(1.1)}.bg-gradient[_ngcontent-%COMP%]{position:absolute;inset:0;background:radial-gradient(ellipse at 20% 20%,var(--aurora-primary) 0%,transparent 50%),radial-gradient(ellipse at 80% 80%,var(--aurora-secondary) 0%,transparent 50%),radial-gradient(ellipse at 50% 50%,var(--aurora-primary) 0%,transparent 70%);opacity:.5}.floating-orbs[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none}.orb[_ngcontent-%COMP%]{position:absolute;border-radius:50%;filter:blur(80px);opacity:.4;animation:_ngcontent-%COMP%_float 20s ease-in-out infinite}.orb-1[_ngcontent-%COMP%]{width:400px;height:400px;background:var(--primary-color);top:-100px;left:-100px;animation-delay:0s}.orb-2[_ngcontent-%COMP%]{width:300px;height:300px;background:var(--tertiary-color);bottom:-50px;right:-50px;animation-delay:-7s}.orb-3[_ngcontent-%COMP%]{width:200px;height:200px;background:linear-gradient(var(--primary-color),var(--tertiary-color));top:50%;left:50%;transform:translate(-50%,-50%);animation-delay:-14s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translate(0) scale(1)}33%{transform:translate(30px,-30px) scale(1.05)}66%{transform:translate(-20px,20px) scale(.95)}}.splash-content[_ngcontent-%COMP%]{position:relative;z-index:1;min-height:100vh;display:flex;flex-direction:column;padding:2rem}.hero[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:4rem 1rem}.logo-container[_ngcontent-%COMP%]{margin-bottom:2rem}.logo-icon-container[_ngcontent-%COMP%]{width:180px;height:100px;padding:1.5rem;background:var(--theme-surface);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--theme-border);border-radius:32px;box-shadow:0 20px 60px #0003;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse 4s ease-in-out infinite}.logo-mark[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,var(--primary-color) 0%,var(--tertiary-color) 100%);-webkit-mask:url(/assets/logo/praxis_logo.svg) no-repeat center;mask:url(/assets/logo/praxis_logo.svg) no-repeat center;-webkit-mask-size:contain;mask-size:contain}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);box-shadow:0 20px 60px #0003}50%{transform:scale(1.02);box-shadow:0 25px 80px #ed7a9b33}}.hero-title[_ngcontent-%COMP%]{font-size:clamp(2.5rem,8vw,5rem);font-weight:800;margin:0 0 1rem;line-height:1.1}.title-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--theme-text-primary) 0%,var(--theme-text-secondary) 50%,var(--primary-color) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-subtitle[_ngcontent-%COMP%]{font-size:clamp(1.1rem,3vw,1.5rem);font-weight:300;color:var(--theme-text-secondary);margin:0 0 1.5rem;letter-spacing:.05em}.hero-description[_ngcontent-%COMP%]{max-width:600px;font-size:1.1rem;font-weight:400;color:var(--theme-text-tertiary);line-height:1.7;margin:0 0 2.5rem}.cta-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;margin-bottom:1.5rem}.cta-primary[_ngcontent-%COMP%]{padding:1rem 2rem!important;font-size:1rem!important;font-weight:600;border-radius:12px!important;background:linear-gradient(135deg,var(--primary-color) 0%,#d85a7f 100%)!important;color:#fff!important;box-shadow:0 8px 30px #ed7a9b66;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.cta-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 40px #ed7a9b80}.cta-secondary[_ngcontent-%COMP%]{padding:1rem 2rem!important;font-size:1rem!important;font-weight:500;border-radius:12px!important;border-color:var(--theme-border)!important;color:var(--theme-text-primary)!important;display:flex;align-items:center;gap:.5rem;transition:all .3s ease}.cta-secondary[_ngcontent-%COMP%]:hover{background:var(--theme-surface)!important;border-color:var(--primary-color)!important}.github-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;color:var(--theme-text-tertiary);text-decoration:none;font-size:.95rem;font-weight:500;transition:all .3s ease}.github-link[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.github-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;padding:3rem 1rem;max-width:1200px;margin:0 auto;width:100%}.feature-card[_ngcontent-%COMP%]{background:var(--theme-surface);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--theme-border);border-radius:20px;padding:2rem;text-align:center;transition:all .3s ease}.feature-card[_ngcontent-%COMP%]:hover{background:var(--theme-surface-elevated);transform:translateY(-4px);box-shadow:var(--glass-shadow)}.feature-icon[_ngcontent-%COMP%]{width:60px;height:60px;margin:0 auto 1rem;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--aurora-primary) 0%,var(--aurora-secondary) 100%);border-radius:16px}.feature-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:var(--primary-color)}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:var(--theme-text-primary);margin:0 0 .75rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;font-weight:400;color:var(--theme-text-tertiary);margin:0;line-height:1.6}.splash-footer[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--theme-text-tertiary);font-size:.9rem}.splash-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.version[_ngcontent-%COMP%]{margin-top:.5rem!important;font-size:.8rem}@media(max-width:768px){.splash-content[_ngcontent-%COMP%]{padding:1rem}.hero[_ngcontent-%COMP%]{padding:2rem 1rem}.logo-icon[_ngcontent-%COMP%]{width:80px;height:80px}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:2rem 1rem}.cta-buttons[_ngcontent-%COMP%]{flex-direction:column;width:100%;max-width:300px}.cta-primary[_ngcontent-%COMP%], .cta-secondary[_ngcontent-%COMP%]{width:100%;justify-content:center}.theme-toggle[_ngcontent-%COMP%]{top:1rem;right:1rem}}"]})};var on=[{path:"",component:zt,pathMatch:"full"},{path:"login",component:Vt},{path:"register",component:jt},{path:"forgot-password",component:$t},{path:"",component:Bt,children:[{path:"app",canActivate:[Jo],children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-NBS5HI7H.js").then(i=>i.HomeComponent)},{path:"assets",loadChildren:()=>import("./chunk-QT3LLDEQ.js").then(i=>i.ASSET_ROUTES)},{path:"protocols",loadChildren:()=>import("./chunk-NA37WN7G.js").then(i=>i.PROTOCOL_ROUTES)},{path:"run",loadChildren:()=>import("./chunk-RKIXUHRL.js").then(i=>i.RUN_PROTOCOL_ROUTES)},{path:"monitor",children:[{path:"",loadComponent:()=>import("./chunk-DZ2S6IEL.js").then(i=>i.ExecutionMonitorComponent)},{path:":id",loadComponent:()=>import("./chunk-WQGDYJSB.js").then(i=>i.RunDetailComponent)}]},{path:"workcell",loadChildren:()=>import("./chunk-DM7J6LFY.js").then(i=>i.WORKCELL_ROUTES)},{path:"data",loadChildren:()=>import("./chunk-GFXVO32D.js").then(i=>i.DATA_ROUTES)},{path:"settings",loadChildren:()=>import("./chunk-DCLF323S.js").then(i=>i.SETTINGS_ROUTES)},{path:"stress-test",loadComponent:()=>import("./chunk-GTXTXWBR.js").then(i=>i.StressTestComponent)},{path:"playground",loadComponent:()=>import("./chunk-W5JRTBLM.js").then(i=>i.PlaygroundComponent)},{path:"repl",redirectTo:"playground"}]},{path:"docs",loadChildren:()=>import("./chunk-XS4LROZT.js").then(i=>i.DOCS_ROUTES)}]},{path:"home",redirectTo:"app/home"},{path:"assets",redirectTo:"app/assets"},{path:"protocols",redirectTo:"app/protocols"},{path:"run",redirectTo:"app/run"},{path:"workcell",redirectTo:"app/workcell"},{path:"data",redirectTo:"app/data"},{path:"settings",redirectTo:"app/settings"},{path:"stress-test",redirectTo:"app/stress-test"},{path:"playground",redirectTo:"app/playground"},{path:"**",redirectTo:""}];var nn=(i,o)=>{let e=p(ko);return i.context.get(Xo)?o(i):o(i).pipe(Ke(t=>{let n="An unknown error occurred!";return t.error instanceof ErrorEvent?n=`Error: ${t.error.message}`:t.status===401?n="Session expired. Please login again.":t.status===403?n="You do not have permission to perform this action.":n=`Error Code: ${t.status}
Message: ${t.message}`,e.open(n,"Close",{duration:5e3,panelClass:["error-snackbar"]}),yi(()=>t)}))};var rn=[{accession_id:"def-plate-001",name:"Corning 96 Wellplate 360\xB5L Flat",fqn:"pylabrobot.resources.corning_costar.Corning_96_wellplate_360ul_Flat",plr_category:"Plate",num_items:96,plate_type:"flat",is_consumable:!0,default_count:null,is_reusable:!0,properties_json:{wells:96,volume_ul:360,brand:"Corning"}},{accession_id:"def-plate-002",name:"Greiner 96 Wellplate U-bottom",fqn:"pylabrobot.resources.greiner.Greiner_96_wellplate_U_bottom",plr_category:"Plate",num_items:96,plate_type:"U-bottom",is_consumable:!0,default_count:null,is_reusable:!0,properties_json:{wells:96,volume_ul:340,brand:"Greiner"}},{accession_id:"def-tiprack-001",name:"Opentrons 96 TipRack 300\xB5L",fqn:"pylabrobot.resources.opentrons.opentrons_96_tiprack_300ul",plr_category:"TipRack",num_items:96,tip_volume_ul:300,is_consumable:!0,default_count:10,is_reusable:!1,properties_json:{tips:96,volume_ul:300,brand:"Opentrons"}},{accession_id:"def-tiprack-002",name:"Opentrons 96 TipRack 20\xB5L",fqn:"pylabrobot.resources.opentrons.opentrons_96_tiprack_20ul",plr_category:"TipRack",num_items:96,tip_volume_ul:20,is_consumable:!0,default_count:null,is_reusable:!1,properties_json:{tips:96,volume_ul:20,brand:"Opentrons"}},{accession_id:"def-reservoir-001",name:"Agilent 1 Reservoir 290mL",fqn:"pylabrobot.resources.agilent.Agilent_1_reservoir_290ml",plr_category:"Reservoir",num_items:1,is_consumable:!1,default_count:null,is_reusable:!0,properties_json:{wells:1,volume_ml:290,brand:"Agilent"}},{accession_id:"def-reservoir-002",name:"Disposable Reagent Reservoir 50mL",fqn:"pylabrobot.resources.generic.disposable_reservoir_50ml",plr_category:"Reservoir",num_items:1,is_consumable:!0,default_count:null,is_reusable:!1,properties_json:{wells:1,volume_ml:50,type:"disposable"}},{accession_id:"def-carrier-001",name:"Hamilton PLT_CAR_L5AC_A00",fqn:"pylabrobot.resources.hamilton.PLT_CAR_L5AC_A00",plr_category:"Carrier",num_items:5,is_consumable:!1,default_count:null,is_reusable:!0,properties_json:{slots:5,type:"plate_carrier",brand:"Hamilton"}},{accession_id:"def-carrier-002",name:"Hamilton TIP_CAR_480BC_A00",fqn:"pylabrobot.resources.hamilton.TIP_CAR_480BC_A00",plr_category:"Carrier",num_items:5,is_consumable:!1,default_count:null,is_reusable:!0,properties_json:{slots:5,type:"tip_carrier",brand:"Hamilton"}},{accession_id:"def-carrier-003",name:"Hamilton TIP_CAR_480BC_HT_A00",fqn:"pylabrobot.resources.hamilton.TIP_CAR_480BC_HT_A00",plr_category:"Carrier",num_items:5,is_consumable:!1,default_count:null,is_reusable:!0,properties_json:{slots:5,type:"high_throughput_tip_carrier",brand:"Hamilton"}},{accession_id:"def-trough-001",name:"Hamilton 8-Channel Trough 100mL",fqn:"pylabrobot.resources.hamilton.Hamilton_8ch_trough_100ml",plr_category:"Trough",num_items:1,is_consumable:!1,default_count:null,is_reusable:!0,properties_json:{channels:8,volume_ml:100,brand:"Hamilton"}},{accession_id:"def-trough-002",name:"Disposable Diluent Trough 200mL",fqn:"pylabrobot.resources.generic.disposable_trough_200ml",plr_category:"Trough",num_items:1,is_consumable:!0,default_count:null,is_reusable:!1,properties_json:{channels:1,volume_ml:200,type:"disposable"}}],an=[{accession_id:"res-001",name:"Source Plate A",resource_definition_accession_id:"def-plate-001",status:"AVAILABLE",location:"Deck Position 1",properties_json:{}},{accession_id:"res-002",name:"Destination Plate B",resource_definition_accession_id:"def-plate-001",status:"AVAILABLE",location:"Deck Position 2",properties_json:{}},{accession_id:"res-003",name:"Assay Plate C",resource_definition_accession_id:"def-plate-002",status:"IN_USE",location:"Deck Position 3",properties_json:{}},{accession_id:"res-004",name:"Tip Rack 300\xB5L",resource_definition_accession_id:"def-tiprack-001",status:"AVAILABLE",location:"Deck Position 4",properties_json:{}},{accession_id:"res-005",name:"Tip Rack 20\xB5L",resource_definition_accession_id:"def-tiprack-002",status:"AVAILABLE",location:"Deck Position 5",properties_json:{}},{accession_id:"res-006",name:"Wash Buffer Reservoir",resource_definition_accession_id:"def-reservoir-001",status:"AVAILABLE",location:"Deck Position 6",properties_json:{}},{accession_id:"res-007",name:"Diluent Trough",resource_definition_accession_id:"def-trough-001",status:"AVAILABLE",location:"Deck Position 7",properties_json:{}},{accession_id:"res-008",name:"Disposable Diluent Trough",resource_definition_accession_id:"def-trough-002",status:"AVAILABLE",location:"Deck Position 8",properties_json:{}}];var pi=[{accession_id:"machine-def-sim-lh",name:"Simulated Liquid Handler",fqn:"praxis.simulated.LiquidHandler",type:"liquid_handler",category:"LiquidHandler",status:"AVAILABLE",description:"Generic Simulated Liquid Handler",frontend_fqn:"pylabrobot.liquid_handling.LiquidHandler",is_simulated_frontend:!0,available_simulation_backends:["pylabrobot.liquid_handling.backends.simulation.simulator.SimulatorBackend","pylabrobot.liquid_handling.backends.chatterbox.ChatterBoxBackend"],connection_info:{backend:"simulation"},properties_json:{channels:8,deck_positions:12,brand:"Generic"}},{accession_id:"machine-001",name:"Hamilton STAR (Simulated)",fqn:"pylabrobot.machines.hamilton.STAR",type:"liquid_handler",category:"LiquidHandler",status:"AVAILABLE",description:"Hamilton STAR Liquid Handler - 8 channels",frontend_fqn:"pylabrobot.liquid_handling.LiquidHandler",connection_info:{backend:"simulation",serial_port:null},properties_json:{channels:8,deck_positions:10,volume_range_ul:[.5,1e3],brand:"Hamilton"}},{accession_id:"machine-002",name:"Simulated Opentrons OT-2",fqn:"pylabrobot.machines.opentrons.OT2",type:"liquid_handler",category:"LiquidHandler",status:"IN_USE",description:"Opentrons OT-2 Personal Pipetting Robot",connection_info:{backend:"simulation",ip_address:"192.168.1.100"},properties_json:{channels:8,deck_positions:11,volume_range_ul:[1,300],brand:"Opentrons"}},{accession_id:"machine-003",name:"Simulated BioTek ELx405",fqn:"pylabrobot.machines.biotek.ELx405",type:"plate_washer",category:"PlateWasher",status:"AVAILABLE",description:"BioTek ELx405 Microplate Washer",connection_info:{backend:"simulation"},properties_json:{wash_channels:8,dispense_volume_range:[25,3e3],brand:"BioTek"}},{accession_id:"machine-004",name:"Simulated Tecan Infinite 200",fqn:"pylabrobot.machines.tecan.Infinite200",type:"plate_reader",category:"PlateReader",status:"AVAILABLE",description:"Tecan Infinite 200 PRO Microplate Reader",connection_info:{backend:"simulation"},properties_json:{detection_modes:["absorbance","fluorescence","luminescence"],wavelength_range:[230,1e3],brand:"Tecan"}}];var Tn=150;function An(i,o){let e=i.url,t=i.method;if(e.includes("/protocols/definitions")&&t==="GET")return o.getProtocols();if(e.includes("/protocols/runs/queue")&&t==="GET")return o.getProtocolRuns().pipe(X(s=>{let d=s.filter(f=>f.status&&["pending","preparing","queued","running"].includes(f.status.toLowerCase())).map(f=>({accession_id:f.accession_id,name:f.name,status:f.status,created_at:f.created_at,protocol_name:f.name}));return{items:d,total:d.length,page:1,size:50}}));if(e.includes("/protocols/runs/records")&&t==="GET"){let s=e.match(/\/protocols\/runs\/records\/([a-f0-9-]+)$/);if(s){let d=s[1];return o.getProtocolRun(d).pipe(X(f=>{if(f)return We(Ue({},f),{name:f.name,protocol_name:f.name,start_time:f.start_time,end_time:f.end_time,duration_ms:f.duration_ms,logs:[]});throw new yt({status:404,statusText:"Not Found"})}))}return o.getProtocolRuns().pipe(X(d=>({items:d.map(f=>({accession_id:f.accession_id,name:f.name,status:f.status,created_at:f.created_at,start_time:f.start_time,end_time:f.end_time,duration_ms:f.duration_ms,protocol_name:f.name,protocol_accession_id:f.top_level_protocol_definition_accession_id})),total:d.length,page:1,size:50})))}if(e.includes("/protocols/runs")&&t==="GET"&&!e.match(/\/protocols\/runs\/[a-f0-9-]+$/))return o.getProtocolRuns();if(e.includes("/resources/type-definitions")&&t==="GET")return C(Ie);if(e.includes("/resources/definitions")&&t==="GET")return C([...rn,...Ie]);if(e.includes("/resources")&&!e.includes("type-definitions")&&!e.includes("definitions")&&t==="GET")return C(an);if(e.includes("/machines/type-definitions")&&t==="GET")return C(Le);if(e.includes("/machines")&&!e.includes("type-definitions")&&!e.includes("definitions")&&t==="GET")return o.getMachines();if(e.includes("/machines/definitions")&&t==="GET")return C([...pi,...Le]);if(e.includes("/discovery/sync-all")&&t==="POST")return C({message:"Browser mode - PLR definitions loaded",synced:!0,resources:Ie.length,machines:Le.length});if(e.includes("/discovery/type-definitions")&&t==="GET")return C({resources:Ie,machines:Le});if(e.includes("/facets")){let s=[...new Set(Ie.map(f=>f.plr_category))],d=[...new Set(Ie.map(f=>f.vendor).filter(Boolean))];return C({category:s,brand:d,vendor:d})}if(e.includes("/auth/me")||e.includes("/auth/user"))return C({id:"local-user",username:"local",email:"local@praxis.local",roles:["user","browser-mode"],name:"Local User"});if(e.includes("/protocols/runs")&&t==="POST"){let s={accession_id:crypto.randomUUID(),protocol_definition_accession_id:i.body?.protocol_definition_accession_id||"unknown",name:i.body?.name||"Run",status:"QUEUED",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),properties_json:{},input_parameters_json:i.body?.parameters||{},top_level_protocol_definition_accession_id:i.body?.protocol_definition_accession_id||"unknown",start_time:null,end_time:null,duration_ms:null,data_directory_path:null,resolved_assets_json:null,output_data_json:null,initial_state_json:null,final_state_json:null,created_by_user:null,previous_accession_id:null,status_details:null,worker_id:null};return o.createProtocolRun(s)}let n=e.match(/\/protocols\/runs\/([a-f0-9-]+)\/transfer-logs$/);if(n&&t==="GET")return o.getTransferLogs(n[1]);if(e.includes("/workcell")&&t==="GET")return C({name:"Default Workcell",status:"AVAILABLE",machines:pi.slice(0,2)});if(e.includes("/scheduler/queue")&&t==="GET")return C([]);if(e.includes("/decks")&&t==="GET")return C([]);if(e.includes("/hardware/discover")&&t==="GET"){let s=Le.filter(f=>f.fqn.includes("simulation")||f.properties_json?.simulated).map(f=>({id:`sim-${f.accession_id}`,name:f.name,connection_type:"simulator",status:"available",manufacturer:f.vendor||"PyLabRobot",model:f.name,plr_backend:f.fqn,properties:f.properties_json})),d=[...s,{id:"sim-ot2",name:"Opentrons OT-2 (Simulated)",connection_type:"network",status:"available",ip_address:"192.168.1.100",manufacturer:"Opentrons",model:"OT-2",plr_backend:"pylabrobot.liquid_handling.backends.opentrons.OT2",properties:{simulated:!0}},{id:"sim-star",name:"Hamilton STAR (Simulated)",connection_type:"serial",status:"available",port:"/dev/ttyUSB0",manufacturer:"Hamilton",model:"STAR",plr_backend:"pylabrobot.liquid_handling.backends.hamilton.STAR",properties:{simulated:!0}}];return C({devices:d,total:d.length,serial_count:1,simulator_count:s.length,network_count:1})}if(e.includes("/hardware/connect")&&t==="POST")return C({device_id:i.body?.device_id||"unknown",status:"connected",message:"Connected successfully (browser mode)",connection_handle:`local-handle-${Date.now()}`});if(e.includes("/hardware/connections")&&t==="GET")return C([]);if(e.includes("/hardware/register")&&t==="POST"){let s=i.body;return console.log("[BrowserModeIntercepter] Hardware register body:",s),o.createMachine({name:s?.name||"Registered Machine",plr_backend:s?.plr_backend||"",connection_type:s?.connection_type,configuration:s?.configuration})}if(e.match(/\/protocols\/[a-f0-9-]+\/compatibility$/)&&t==="GET")return o.getMachines().pipe(X(s=>s.map(d=>({machine:{accession_id:d.accession_id,name:d.name,machine_category:d.machine_category||d.machine_type||"LiquidHandler",is_simulation_override:d.is_simulation_override||!0,backend_definition:d.backend_definition},compatibility:{is_compatible:!0,missing_capabilities:[],matched_capabilities:["liquid_handling","pipetting"],warnings:[]}}))));if(e.includes("/hardware/repl")&&t==="POST"){let s=i.body;return C({device_id:s?.device_id||"unknown",command:s?.command||"",output:`[Browser Playground] Executed: ${s?.command}
> OK`,success:!0,error:null})}return C(null)}var sn=(i,o)=>{let e=p(re),t=i.url;if(t.includes("/api/")&&!t.includes("assets/")&&console.debug(`[BrowserModeIntercepter] Request: ${i.method} ${t}, IsBrowserMode: ${e.isBrowserMode()}`),!e.isBrowserMode()||!i.url.includes("/api/")||i.url.includes("assets/"))return o(i);let n=p(kt),s=i.method;return An(i,n).pipe(bi(Tn),fe(d=>d!==null?C(new yt({status:200,body:d})):(console.warn(`[BrowserModeInterceptor] No mock handler for: ${s} ${t}`),C(new yt({status:200,body:{message:"Browser mode - endpoint not mocked",url:t,method:s}})))))};var et=i=>({field:i}),ln=i=>({content:i});function Dn(i,o){i&1&&(r(0,"span",9),l(1,"*"),a())}function Rn(i,o){if(i&1&&(r(0,"mat-label"),l(1),g(2,Dn,2,0,"span",9),a()),i&2){let e=m();c(),M(" ",e.props.label," "),c(),h(e.props.required&&e.props.hideRequiredMarker!==!0?2:-1)}}function Ln(i,o){if(i&1&&te(0,3),i&2){let e=m();u("ngTemplateOutlet",e.props.textPrefix)("ngTemplateOutletContext",oe(2,et,e.field))}}function Nn(i,o){if(i&1&&te(0,4),i&2){let e=m();u("ngTemplateOutlet",e.props.prefix)("ngTemplateOutletContext",oe(2,et,e.field))}}function Bn(i,o){if(i&1&&te(0,5),i&2){let e=m();u("ngTemplateOutlet",e.props.textSuffix)("ngTemplateOutletContext",oe(2,et,e.field))}}function Vn(i,o){if(i&1&&te(0,6),i&2){let e=m();u("ngTemplateOutlet",e.props.suffix)("ngTemplateOutletContext",oe(2,et,e.field))}}function jn(i,o){if(i&1&&(r(0,"mat-hint"),te(1,10),a()),i&2){m();let e=Fe(13);c(),u("ngTemplateOutlet",e)("ngTemplateOutletContext",oe(2,ln,o))}}function $n(i,o){if(i&1&&(r(0,"mat-hint",8),te(1,10),a()),i&2){m();let e=Fe(13);c(),u("ngTemplateOutlet",e)("ngTemplateOutletContext",oe(2,ln,o))}}function zn(i,o){if(i&1&&(ut(0),l(1),ft()),i&2){let e=m().content;c(),b(e)}}function Hn(i,o){if(i&1&&te(0,10),i&2){let e=m().content,t=m();u("ngTemplateOutlet",e)("ngTemplateOutletContext",oe(2,et,t.field))}}function Gn(i,o){if(i&1&&g(0,zn,2,1,"ng-container")(1,Hn,1,4,"ng-container",10),i&2){let e=o.content;h(e.createEmbeddedView?1:0)}}var qn=["matPrefix"],Un=["matTextPrefix"],Wn=["matSuffix"],Qn=["matTextSuffix"],Kn=(()=>{class i extends Ko{constructor(e,t,n){super(),this.renderer=e,this.elementRef=t,this.focusMonitor=n}ngOnInit(){Uo(this.field,"_formField",this.formField),this.focusMonitor.monitor(this.elementRef,!0).subscribe(e=>{!e&&this.field.focus&&(this.field.focus=!1)})}ngAfterViewInit(){if(this.formField.appearance!=="outline"&&this.props.hideFieldUnderline===!0){let e=this.formField._elementRef.nativeElement.querySelector(".mat-form-field-underline");e&&this.renderer.removeChild(e.parentNode,e)}}ngOnDestroy(){delete this.field._formField,this.focusMonitor.stopMonitoring(this.elementRef)}static{this.\u0275fac=function(t){return new(t||i)(pe(dt),pe(lt),pe(xt))}}static{this.\u0275cmp=y({type:i,selectors:[["formly-wrapper-mat-form-field"]],viewQuery:function(t,n){if(t&1&&H(ye,7),t&2){let s;E(s=D())&&(n.formField=s.first)}},standalone:!1,features:[F],decls:14,vars:13,consts:[["fieldComponent",""],["stringOrTemplate",""],[3,"hideRequiredMarker","floatLabel","appearance","subscriptSizing","color"],["matTextPrefix","",3,"ngTemplateOutlet","ngTemplateOutletContext"],["matPrefix","",3,"ngTemplateOutlet","ngTemplateOutletContext"],["matTextSuffix","",3,"ngTemplateOutlet","ngTemplateOutletContext"],["matSuffix","",3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"field"],["align","end"],["aria-hidden","true",1,"mat-form-field-required-marker","mat-mdc-form-field-required-marker"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){if(t&1&&(r(0,"mat-form-field",2),te(1,null,0),g(3,Rn,3,2,"mat-label"),g(4,Ln,1,4,"ng-container",3),g(5,Nn,1,4,"ng-container",4),g(6,Bn,1,4,"ng-container",5),g(7,Vn,1,4,"ng-container",6),r(8,"mat-error"),_(9,"formly-validation-message",7),a(),g(10,jn,2,4,"mat-hint"),g(11,$n,2,4,"mat-hint",8),a(),mt(12,Gn,2,1,"ng-template",null,1,gt)),t&2){let s,d;u("hideRequiredMarker",!0)("floatLabel",n.props.floatLabel)("appearance",n.props.appearance)("subscriptSizing",n.props.subscriptSizing)("color",n.props.color??"primary"),c(3),h(n.props.label&&n.props.hideLabel!==!0?3:-1),c(),h(n.props.textPrefix?4:-1),c(),h(n.props.prefix?5:-1),c(),h(n.props.textSuffix?6:-1),c(),h(n.props.suffix?7:-1),c(2),u("field",n.field),c(),h((s=n.props.description||n.props.hintStart)?10:-1,s),c(),h((d=n.props.hintEnd)?11:-1,d)}},dependencies:[_t,ye,It,bo,vo,Co,Ot,$e],styles:[`formly-wrapper-mat-form-field .mat-mdc-form-field,formly-wrapper-mat-form-field .mat-form-field{width:100%}
`],encapsulation:2})}}return i})();function cn(){return{wrappers:[{name:"form-field",component:Kn}]}}var Y=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[R,T,Ne,w.forChild(cn())]})}}return i})(),ee=(()=>{class i extends de{constructor(){super(...arguments),this.errorStateMatcher={isErrorState:()=>this.field&&this.showError},this.stateChanges=new hi,this._errorState=!1,this._focused=!1}set matPrefix(e){e&&(this.props.prefix=e)}set matTextPrefix(e){e&&(this.props.textPrefix=e)}set matSuffix(e){e&&(this.props.suffix=e)}set matTextSuffix(e){e&&(this.props.textSuffix=e)}set _controls(e){this.attachControl(e.length===1?e.first:this)}ngOnDestroy(){delete this.formField?._control,this.stateChanges.complete()}setDescribedByIds(e){}onContainerClick(e){this.field.focus=!0,this.stateChanges.next()}get errorState(){let e=this.options.showError(this);return e!==this._errorState&&(this._errorState=e,this.stateChanges.next()),e}get controlType(){if(this.props.type)return this.props.type;let e=this.field.type;return e instanceof Ai?e.prototype.constructor.name:e}get focused(){let e=!!this.field.focus&&!this.disabled;return e!==this._focused&&(this._focused=e,this.stateChanges.next()),e}get disabled(){return!!this.props.disabled}get required(){return!!this.props.required}get placeholder(){return this.props.placeholder||""}get shouldPlaceholderFloat(){return this.shouldLabelFloat}get value(){return this.formControl?.value}set value(e){this.formControl?.patchValue(e)}get ngControl(){return this.formControl}get empty(){return this.value==null||this.value===""}get shouldLabelFloat(){return this.focused||!this.empty}get formField(){return this.field?._formField}attachControl(e){if(this.formField&&e!==this.formField._control){this.formField._control=e;let t=e?.ngControl;t?.valueAccessor?.hasOwnProperty("_formField")&&(t.valueAccessor._formField=this.formField),t?.valueAccessor?.hasOwnProperty("_parentFormField")&&(t.valueAccessor._parentFormField=this.formField),["prefix","suffix","textPrefix","textSuffix"].forEach(s=>je(this.field,["props",s],({currentValue:d})=>d&&Promise.resolve().then(()=>{this.options.detectChanges(this.field)})));let n=e.setDescribedByIds.bind(e);e.setDescribedByIds=s=>{setTimeout(()=>n(s))}}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=I(i)))(n||i)}})()}static{this.\u0275dir=Vi({type:i,viewQuery:function(t,n){if(t&1&&H(qn,5)(Un,5)(Wn,5)(Qn,5)(xo,5),t&2){let s;E(s=D())&&(n.matPrefix=s.first),E(s=D())&&(n.matTextPrefix=s.first),E(s=D())&&(n.matSuffix=s.first),E(s=D())&&(n.matTextSuffix=s.first),E(s=D())&&(n._controls=s)}},standalone:!1,features:[F]})}}return i})();function Yn(i,o){if(i&1&&_(0,"input",0),i&2){let e=m();u("id",e.id)("name",e.field.name)("type",e.type||"text")("readonly",e.props.readonly)("required",e.required)("errorStateMatcher",e.errorStateMatcher)("formControl",e.formControl)("formlyAttributes",e.field)("tabIndex",e.props.tabindex)("placeholder",e.props.placeholder)}}function Xn(i,o){if(i&1&&_(0,"input",1),i&2){let e=m();u("id",e.id)("name",e.field.name)("readonly",e.props.readonly)("required",e.required)("errorStateMatcher",e.errorStateMatcher)("formControl",e.formControl)("formlyAttributes",e.field)("tabIndex",e.props.tabindex)("placeholder",e.props.placeholder)}}var Zn=(()=>{class i extends ee{get type(){return this.props.type||"text"}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=I(i)))(n||i)}})()}static{this.\u0275cmp=y({type:i,selectors:[["formly-field-mat-input"]],standalone:!1,features:[F],decls:2,vars:1,consts:[["matInput","",3,"id","name","type","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabIndex","placeholder"],["matInput","","type","number",3,"id","name","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabIndex","placeholder"]],template:function(t,n){t&1&&g(0,Yn,1,10,"input",0)(1,Xn,1,9,"input",1),t&2&&h(n.type!=="number"?0:1)},dependencies:[le,mo,V,_e,z,ve,K],encapsulation:2,changeDetection:0})}}return i})();function dn(){return{types:[{name:"input",component:Zn,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]}}var mn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[R,T,ce,Y,w.forChild(dn())]})}}return i})();var Jn=(()=>{class i extends ee{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=I(i)))(n||i)}})()}static{this.\u0275cmp=y({type:i,selectors:[["formly-field-mat-textarea"]],standalone:!1,features:[Hi([{provide:yo,useExisting:i}]),F],decls:1,vars:16,consts:[["matInput","",3,"id","name","readonly","required","formControl","errorStateMatcher","cols","rows","formlyAttributes","placeholder","tabindex","cdkTextareaAutosize","cdkAutosizeMinRows","cdkAutosizeMaxRows"]],template:function(t,n){t&1&&_(0,"textarea",0),t&2&&(ie("cdk-textarea-autosize",n.props.autosize),u("id",n.id)("name",n.field.name)("readonly",n.props.readonly)("required",n.required)("formControl",n.formControl)("errorStateMatcher",n.errorStateMatcher)("cols",n.props.cols)("rows",n.props.rows)("formlyAttributes",n.field)("placeholder",n.props.placeholder)("tabindex",n.props.tabindex)("cdkTextareaAutosize",n.props.autosize)("cdkAutosizeMinRows",n.props.autosizeMinRows)("cdkAutosizeMaxRows",n.props.autosizeMaxRows))},dependencies:[le,V,_e,z,ve,_o,K],encapsulation:2,changeDetection:0})}}return i})();function pn(){return{types:[{name:"textarea",component:Jn,wrappers:["form-field"]}]}}var un=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[R,T,ce,Y,w.forChild(pn())]})}}return i})();var er=(()=>{class i{transform(e,t){return e instanceof gi?this.dispose():e=this.observableOf(e,t),e.pipe(X(n=>this.transformOptions(n,t)))}ngOnDestroy(){this.dispose()}transformOptions(e,t){let n=this.transformSelectProps(t),s=[],d={};return e?.forEach(f=>{let q=this.transformOption(f,n);if(q.group){let Pe=d[q.label];Pe===void 0?d[q.label]=s.push(q)-1:q.group.forEach(qe=>s[Pe].group.push(qe))}else s.push(q)}),s}transformOption(e,t){let n=t.groupProp(e);return Array.isArray(n)?{label:t.labelProp(e),group:n.map(s=>this.transformOption(s,t))}:(e={label:t.labelProp(e),value:t.valueProp(e),disabled:!!t.disabledProp(e)},n?{label:n,group:[e]}:e)}transformSelectProps(e){let t=e?.props||e?.templateOptions||{},n=s=>typeof s=="function"?s:d=>d[s];return{groupProp:n(t.groupProp||"group"),labelProp:n(t.labelProp||"label"),valueProp:n(t.valueProp||"value"),disabledProp:n(t.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(e,t){return this.dispose(),t&&t.options&&t.options.fieldChanges&&(this._subscription=t.options.fieldChanges.pipe(ot(({property:n,type:s,field:d})=>s==="expressionChanges"&&(n.indexOf("templateOptions.options")===0||n.indexOf("props.options")===0)&&d===t&&Array.isArray(d.props.options)&&!!this._options),Ci(()=>this._options.next(t.props.options))).subscribe()),this._options=new Qe(e),this._options.asObservable()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=ii({name:"formlySelectOptions",type:i,pure:!0})}}return i})(),He=(()=>{class i extends er{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=I(i)))(n||i)}})()}static{this.\u0275pipe=ii({name:"formlySelectOptions",type:i,pure:!0,standalone:!1})}}return i})(),Ge=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({})}}return i})();function tr(i,o){if(i&1&&(r(0,"mat-radio-button",1),l(1),a()),i&2){let e=o.$implicit,t=o.$index,n=m();u("id",n.id+"_"+t)("color",n.props.color)("labelPosition",n.props.labelPosition)("disabled",e.disabled)("value",e.value),c(),M(" ",e.label," ")}}var ir=(()=>{class i extends ee{constructor(){super(...arguments),this.defaultOptions={props:{hideFieldUnderline:!0,floatLabel:"always",tabindex:-1}}}ngAfterViewInit(){this.focusObserver=je(this.field,["focus"],({currentValue:e})=>{this.props.tabindex===-1&&e&&this.radioGroup._radios.length>0&&setTimeout(()=>{(this.radioGroup.selected?this.radioGroup.selected:this.radioGroup._radios.first).focus()})})}onContainerClick(){}ngOnDestroy(){super.ngOnDestroy(),this.focusObserver&&this.focusObserver.unsubscribe()}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=I(i)))(n||i)}})()}static{this.\u0275cmp=y({type:i,selectors:[["formly-field-mat-radio"]],viewQuery:function(t,n){if(t&1&&H(Lt,7),t&2){let s;E(s=D())&&(n.radioGroup=s.first)}},standalone:!1,features:[F],decls:5,vars:9,consts:[[3,"formControl","formlyAttributes","required","tabindex"],[3,"id","color","labelPosition","disabled","value"]],template:function(t,n){t&1&&(r(0,"mat-radio-group",0),O(1,tr,2,6,"mat-radio-button",1,ke),G(3,"formlySelectOptions"),G(4,"async"),a()),t&2&&(u("formControl",n.formControl)("formlyAttributes",n.field)("required",n.required)("tabindex",n.props.tabindex),c(),P(J(4,7,Te(3,4,n.props.options,n.field))))},dependencies:[V,_e,z,Lt,$o,K,ne,He],encapsulation:2,changeDetection:0})}}return i})();function fn(){return{types:[{name:"radio",component:ir,wrappers:["form-field"]}]}}var gn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[R,T,zo,Y,Ge,w.forChild(fn())]})}}return i})();function nr(i,o){i&1&&(r(0,"span",1),l(1,"*"),a())}var rr=(()=>{class i extends ee{constructor(e,t){super(),this.renderer=e,this.focusMonitor=t,this.defaultOptions={props:{hideFieldUnderline:!0,indeterminate:!0,floatLabel:"always",hideLabel:!0,color:"accent"}}}onContainerClick(e){this.checkbox.focus(),super.onContainerClick(e)}ngAfterViewInit(){this.checkbox&&this.focusMonitor.monitor(this.checkbox._inputElement,!0).subscribe(e=>{this.field.focus=!!e,this.stateChanges.next(),e?this.props.focus&&this.props.focus(this.field):this.props.blur&&this.props.blur(this.field)})}ngAfterViewChecked(){if(this.required!==this._required&&this.checkbox&&this.checkbox._inputElement){this._required=this.required;let e=this.checkbox._inputElement.nativeElement;this.required?this.renderer.setAttribute(e,"required","required"):this.renderer.removeAttribute(e,"required")}}ngOnDestroy(){super.ngOnDestroy(),this.checkbox&&this.focusMonitor.stopMonitoring(this.checkbox._inputElement)}static{this.\u0275fac=function(t){return new(t||i)(pe(dt),pe(xt))}}static{this.\u0275cmp=y({type:i,selectors:[["formly-field-mat-checkbox"]],viewQuery:function(t,n){if(t&1&&H(be,7),t&2){let s;E(s=D())&&(n.checkbox=s.first)}},standalone:!1,features:[F],decls:3,vars:10,consts:[[3,"formControl","id","name","formlyAttributes","tabIndex","indeterminate","color","labelPosition"],["aria-hidden","true",1,"mat-form-field-required-marker","mat-mdc-form-field-required-marker"]],template:function(t,n){t&1&&(r(0,"mat-checkbox",0),l(1),g(2,nr,2,0,"span",1),a()),t&2&&(u("formControl",n.formControl)("id",n.id)("name",n.field.name)("formlyAttributes",n.field)("tabIndex",n.props.tabindex)("indeterminate",n.props.indeterminate&&n.formControl.value==null)("color",n.props.color)("labelPosition",n.props.labelPosition),c(),M(" ",n.props.label," "),c(),h(n.props.required&&n.props.hideRequiredMarker!==!0?2:-1))},dependencies:[V,z,be,K],encapsulation:2,changeDetection:0})}}return i})();function hn(){return{types:[{name:"checkbox",component:rr,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]}}var _n=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[R,T,At,Y,w.forChild(hn())]})}}return i})();function ar(i,o){if(i&1){let e=A();r(0,"mat-checkbox",1),v("change",function(n){let s=S(e).$implicit,d=m();return k(d.onChange(s.value,n.checked))}),l(1),a()}if(i&2){let e=o.$implicit,t=o.$index,n=m();u("id",n.id+"_"+t)("formlyAttributes",n.field)("tabIndex",n.props.tabindex)("color",n.props.color)("labelPosition",n.props.labelPosition)("checked",n.isChecked(e))("disabled",n.formControl.disabled||e.disabled),c(),M(" ",e.label," ")}}var sr=(()=>{class i extends ee{constructor(){super(...arguments),this.defaultOptions={props:{hideFieldUnderline:!0,floatLabel:"always",color:"accent"}}}onChange(e,t){this.formControl.markAsDirty(),this.props.type==="array"?this.formControl.patchValue(t?[...this.formControl.value||[],e]:[...this.formControl.value||[]].filter(n=>n!==e)):this.formControl.patchValue(We(Ue({},this.formControl.value),{[e]:t})),this.formControl.markAsTouched()}onContainerClick(){}isChecked(e){let t=this.formControl.value;return t&&(this.props.type==="array"?t.indexOf(e.value)!==-1:t[e.value])}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=I(i)))(n||i)}})()}static{this.\u0275cmp=y({type:i,selectors:[["formly-field-mat-multicheckbox"]],viewQuery:function(t,n){if(t&1&&H(be,5),t&2){let s;E(s=D())&&(n.checkboxes=s)}},hostVars:1,hostBindings:function(t,n){t&2&&$i("id",n.id)},standalone:!1,features:[F],decls:4,vars:5,consts:[[3,"id","formlyAttributes","tabIndex","color","labelPosition","checked","disabled"],[3,"change","id","formlyAttributes","tabIndex","color","labelPosition","checked","disabled"]],template:function(t,n){t&1&&(O(0,ar,2,8,"mat-checkbox",0,ke),G(2,"formlySelectOptions"),G(3,"async")),t&2&&P(J(3,3,Te(2,0,n.props.options,n.field)))},dependencies:[be,K,ne,He],encapsulation:2,changeDetection:0})}}return i})();function yn(){return{types:[{name:"multicheckbox",component:sr,wrappers:["form-field"]}]}}var vn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[R,T,At,Y,Ge,w.forChild(yn())]})}}return i})();var dr=i=>({selectOptions:i});function mr(i,o){if(i&1){let e=A();r(0,"mat-option",2),v("click",function(){let n=S(e).selectOptions,s=m();return k(s.toggleSelectAll(n))}),_(1,"mat-pseudo-checkbox",3),l(2),a()}if(i&2){let e=o.selectOptions,t=m();c(),u("state",t.getSelectAllState(e)),c(),M(" ",t.props.selectAllOption," ")}}function pr(i,o){if(i&1&&te(0,4),i&2){let e=m();m();let t=Fe(1);u("ngTemplateOutlet",t)("ngTemplateOutletContext",oe(2,dr,e))}}function ur(i,o){if(i&1&&(r(0,"mat-option",6),l(1),a()),i&2){let e=o.$implicit;u("value",e.value)("disabled",e.disabled),c(),M(" ",e.label," ")}}function fr(i,o){if(i&1&&(r(0,"mat-optgroup",5),O(1,ur,2,3,"mat-option",6,ke),a()),i&2){let e=m().$implicit;u("label",e.label),c(),P(e.group)}}function gr(i,o){if(i&1&&(r(0,"mat-option",6),l(1),a()),i&2){let e=m().$implicit;u("value",e.value)("disabled",e.disabled),c(),b(e.label)}}function hr(i,o){if(i&1&&g(0,fr,3,1,"mat-optgroup",5)(1,gr,2,3,"mat-option",6),i&2){let e=o.$implicit;h(e.group?0:1)}}function _r(i,o){if(i&1&&(g(0,pr,1,4,"ng-container",4),O(1,hr,2,1,null,null,ke)),i&2){let e=m();h(e.props.multiple&&e.props.selectAllOption?0:-1),c(),P(o)}}var yr=(()=>{class i extends ee{constructor(){super(...arguments),this.defaultOptions={props:{compareWith(e,t){return e===t}}}}set select(e){je(e,["_parentFormField","_textField"],({currentValue:t})=>{t&&(e._preferredOverlayOrigin=e._parentFormField.getConnectedOverlayOrigin())})}getSelectAllState(e){return this.empty||this.value.length===0?null:this.value.length!==this.getSelectAllValue(e).length?"indeterminate":"checked"}toggleSelectAll(e){let t=this.getSelectAllValue(e);this.formControl.markAsDirty(),this.formControl.setValue(!this.value||this.value.length!==t.length?t:[])}change(e){this.props.change?.(this.field,e)}_getAriaLabelledby(){return this.props.attributes?.["aria-labelledby"]?this.props.attributes["aria-labelledby"]:this.formField?._labelId}_getAriaLabel(){return this.props.attributes?.["aria-label"]}getSelectAllValue(e){if(!this.selectAllValue||e!==this.selectAllValue.options){let t=[];e.forEach(n=>n.group?t.push(...n.group):t.push(n)),this.selectAllValue={options:e,value:t.filter(n=>!n.disabled).map(n=>n.value)}}return this.selectAllValue.value}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=I(i)))(n||i)}})()}static{this.\u0275cmp=y({type:i,selectors:[["formly-field-mat-select"]],viewQuery:function(t,n){if(t&1&&H(Rt,7),t&2){let s;E(s=D())&&(n.select=s.first)}},standalone:!1,features:[F],decls:6,vars:20,consts:[["selectAll",""],[3,"selectionChange","id","formControl","formlyAttributes","placeholder","tabIndex","required","compareWith","multiple","errorStateMatcher","aria-label","aria-labelledby","disableOptionCentering","typeaheadDebounceInterval","panelClass"],[3,"click"],[1,"mat-option-pseudo-checkbox",3,"state"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"label"],[3,"value","disabled"]],template:function(t,n){if(t&1){let s=A();mt(0,mr,3,2,"ng-template",null,0,gt),r(2,"mat-select",1),v("selectionChange",function(f){return S(s),k(n.change(f))}),g(3,_r,3,1),G(4,"formlySelectOptions"),G(5,"async"),a()}if(t&2){let s;c(2),u("id",n.id)("formControl",n.formControl)("formlyAttributes",n.field)("placeholder",n.props.placeholder)("tabIndex",n.props.tabindex)("required",n.required)("compareWith",n.props.compareWith)("multiple",n.props.multiple)("errorStateMatcher",n.errorStateMatcher),ji("aria-label",n._getAriaLabel())("aria-labelledby",n._getAriaLabelledby()),u("disableOptionCentering",n.props.disableOptionCentering)("typeaheadDebounceInterval",n.props.typeaheadDebounceInterval)("panelClass",n.props.panelClass),c(),h((s=J(5,18,Te(4,15,n.props.options,n.field)))?3:-1,s)}},dependencies:[_t,V,_e,z,Rt,Ze,li,si,K,ne,He],encapsulation:2,changeDetection:0})}}return i})();function bn(){return{types:[{name:"select",component:yr,wrappers:["form-field"]},{name:"enum",extends:"select"}]}}var Cn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[R,T,Eo,ci,Y,Ge,w.forChild(bn())]})}}return i})();var xn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=L({imports:[Y,mn,un,gn,_n,vn,Cn]})}}return i})();var vr=["assetInput"],br=(i,o)=>o.asset.accession_id;function Cr(i,o){if(i&1&&(r(0,"span",11),l(1),a()),i&2){let e=o.$implicit;c(),b(e)}}function xr(i,o){if(i&1&&(r(0,"span",8),l(1),a(),O(2,Cr,2,1,"span",11,W)),i&2){let e,t=m();c(),b((e=t.autoAsset())==null?null:e.name),c(),P(t.autoAssetTags())}}function Mr(i,o){i&1&&(r(0,"span",8),l(1,"Auto (Resolving...)"),a())}function wr(i,o){i&1&&(r(0,"span",8),l(1,"Auto"),a())}function Sr(i,o){if(i&1){let e=A();r(0,"button",18),v("click",function(n){S(e);let s=m(2);return k(s.clearAsset(n))}),r(1,"mat-icon"),l(2,"close"),a()()}}function kr(i,o){if(i&1&&(r(0,"span",24),l(1),a()),i&2){let e=o.$implicit;c(),b(e)}}function Fr(i,o){if(i&1&&(r(0,"div",23),O(1,kr,2,1,"span",24,W),a()),i&2){let e=m().$implicit;c(),P(e.tags)}}function Ir(i,o){if(i&1&&(r(0,"mat-option",16)(1,"div",19)(2,"div",20)(3,"span",21),l(4),a(),r(5,"span",22),l(6),a()(),g(7,Fr,3,0,"div",23),a()()),i&2){let e=o.$implicit;u("value",e.asset),c(4),b(e.asset.name),c(2),M("(",e.asset.accession_id,")"),c(),h(e.tags.length>0?7:-1)}}function Or(i,o){i&1&&(r(0,"mat-option",17),l(1,"No assets found"),a())}function Pr(i,o){if(i&1&&(r(0,"div",9)(1,"mat-form-field",12),_(2,"input",13,0),g(4,Sr,3,0,"button",14),a(),r(5,"mat-autocomplete",15,1),O(7,Ir,8,4,"mat-option",16,br,!1,Or,2,0,"mat-option",17),G(10,"async"),a()()),i&2){let e=Fe(6),t=m();c(2),u("formControl",t.formControl)("formlyAttributes",t.field)("matAutocomplete",e)("placeholder",t.props.placeholder||"Search..."),c(2),h(t.formControl.value?4:-1),c(),u("displayWith",t.displayFn),c(2),P(J(10,7,t.filteredOptions$))}}function Tr(i,o){if(i&1&&(r(0,"div",10),l(1),a()),i&2){let e=m();c(),b(e.props.description)}}var Ht=class i extends de{assetService=p(Pt);dialog=p(De);filteredOptions$;definitionsMap=new Map;allAssets=j([]);isAutoMode=j(!0);autoAsset=j(null);autoAssetTags=j([]);canUseAuto=j(!0);assetInput;ngOnInit(){let o=this.props.assetType||"machine";this.loadAssets(o),this.filteredOptions$=this.formControl.valueChanges.pipe(Ye(""),nt(300),rt(),fe(e=>{let t=typeof e=="string"?e:e?.name||"";return this.getFilteredOptions(t)})),this.formControl.setValue({mode:"auto"})}loadAssets(o){o==="machine"?this.assetService.getMachines().subscribe({next:e=>{this.allAssets.set(e),this.selectBestAuto(e)},error:e=>{console.error("[AssetSelector] Error loading machines:",e),this.canUseAuto.set(!1)}}):it({resources:this.assetService.getResources(),definitions:this.assetService.getResourceDefinitions()}).subscribe({next:({resources:e,definitions:t})=>{t.forEach(d=>this.definitionsMap.set(d.accession_id,d));let n=e,s=this.props.plrTypeFilter;if(s){let d=s.toLowerCase();n=n.filter(f=>{let q=this.definitionsMap.get(f.resource_definition_accession_id||"");return q?!!(q.plr_category?.toLowerCase()===d||q.name?.toLowerCase().includes(d)):!1})}this.allAssets.set(n),this.selectBestAuto(n)},error:e=>{console.error("[AssetSelector] Error loading resources:",e),this.canUseAuto.set(!1)}})}calculateAssetScore(o){let e=0;switch(o.status?.toLowerCase()||"unknown"){case"available":case"idle":e=0;break;case"in_use":case"running":e=10;break;case"reserved":e=20;break;case"maintenance":case"error":case"depleted":case"expired":e=100;break;default:e=50}return e+=(o.name?.length||0)/100,e}selectBestAuto(o){if(o.length===0){this.canUseAuto.set(!1),this.autoAsset.set(null);return}let e=[...o].sort((d,f)=>this.calculateAssetScore(d)-this.calculateAssetScore(f)),t=this.props.autoSelectIndex||0,n=Math.min(t,e.length-1),s=e[n];this.autoAsset.set(s),this.autoAssetTags.set(this.getAssetTags(s)),this.canUseAuto.set(!0),this.isAutoMode()&&this.formControl.setValue({mode:"auto",resolvedAsset:s})}toggleAutoMode(){let o=!this.isAutoMode();if(this.isAutoMode.set(o),o){let e=this.autoAsset();this.formControl.setValue({mode:"auto",resolvedAsset:e})}else this.formControl.setValue(null),this.formControl.updateValueAndValidity({emitEvent:!0})}getFilteredOptions(o){let e=this.allAssets(),t=e;if(o){let n=o.toLowerCase();t=e.filter(s=>s.name.toLowerCase().includes(n)||s.accession_id.toLowerCase().includes(n))}return t.sort((n,s)=>this.calculateAssetScore(n)-this.calculateAssetScore(s)),C(t.map(n=>({asset:n,label:n.name,tags:this.getAssetTags(n)})))}getAssetTags(o){let e=[];o.status&&e.push(o.status);let t=o;if(t.resource_definition_accession_id){let n=this.definitionsMap.get(t.resource_definition_accession_id);n&&(n.num_items&&e.push(`${n.num_items}`),n.plate_type&&e.push(n.plate_type),n.tip_volume_ul&&e.push(`${n.tip_volume_ul}\xB5L`))}else o.machine_type&&e.push(o.machine_type);return e}displayFn=o=>!o||"mode"in o?"":o.name||"";clearAsset(o){o.stopPropagation(),this.formControl.setValue(null),this.assetInput.nativeElement.focus()}static \u0275fac=(()=>{let o;return function(t){return(o||(o=I(i)))(t||i)}})();static \u0275cmp=y({type:i,selectors:[["app-asset-selector"]],viewQuery:function(e,t){if(e&1&&H(vr,5),e&2){let n;E(n=D())&&(t.assetInput=n.first)}},features:[F],decls:15,vars:11,consts:[["assetInput",""],["auto","matAutocomplete"],[1,"asset-field-container"],[1,"field-header"],[1,"variable-name"],[1,"type-hint"],[1,"selection-row"],["mat-stroked-button","",1,"auto-chip",3,"click","disabled"],[1,"auto-label"],[1,"manual-select"],[1,"field-description"],[1,"tag-badge"],["appearance","outline",1,"asset-input"],["type","text","matInput","",3,"formControl","formlyAttributes","matAutocomplete","placeholder"],["mat-icon-button","","matSuffix","","type","button"],["panelClass","praxis-select-panel",3,"displayWith"],[1,"asset-option",3,"value"],["disabled",""],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"asset-content"],[1,"asset-main"],[1,"asset-name"],[1,"accession-id"],[1,"asset-tags"],[1,"tag-chip"]],template:function(e,t){e&1&&(r(0,"div",2)(1,"div",3)(2,"span",4),l(3),a(),r(4,"span",5),l(5),a()(),r(6,"div",6)(7,"button",7),v("click",function(){return t.toggleAutoMode()}),r(8,"mat-icon"),l(9),a(),g(10,xr,4,1)(11,Mr,2,0,"span",8)(12,wr,2,0,"span",8),a(),g(13,Pr,11,9,"div",9),a(),g(14,Tr,2,1,"div",10),a()),e&2&&(c(3),b(t.props.variableName||t.key),c(2),b(t.props.plrTypeFilter),c(2),ie("auto-active",t.isAutoMode())("auto-inactive",!t.isAutoMode()),u("disabled",!t.canUseAuto()),c(2),b(t.isAutoMode()?"auto_awesome":"auto_awesome_outlined"),c(),h(t.isAutoMode()&&t.autoAsset()?10:t.isAutoMode()?11:12),c(3),h(t.isAutoMode()?-1:13),c(),h(t.props.description?14:-1))},dependencies:[R,T,le,V,z,qo,Ho,Ze,Go,ce,ve,ye,Ot,Ne,Q,se,ae,B,$,Tt,he,w,K,ne],styles:[".asset-field-container[_ngcontent-%COMP%]{margin-bottom:20px}.field-header[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px;margin-bottom:8px}.variable-name[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-weight:600;color:var(--sys-primary)}.type-hint[_ngcontent-%COMP%]{font-size:.8em;color:var(--sys-on-surface-variant);opacity:.7}.selection-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.auto-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border-radius:20px;transition:all .2s ease;min-height:40px}.auto-chip.auto-active[_ngcontent-%COMP%]{background:var(--sys-primary-container);border-color:var(--sys-primary);color:var(--sys-on-primary-container)}.auto-chip.auto-inactive[_ngcontent-%COMP%]{background:transparent;border-color:var(--sys-outline);color:var(--sys-on-surface-variant)}.auto-chip.auto-inactive[_ngcontent-%COMP%]:hover{border-color:var(--sys-primary)}.auto-chip[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.auto-label[_ngcontent-%COMP%]{font-weight:500}.tag-badge[_ngcontent-%COMP%]{background:var(--sys-secondary);color:var(--sys-on-secondary);padding:2px 8px;border-radius:10px;font-size:.75em;font-weight:500}.manual-select[_ngcontent-%COMP%]{flex:1}.asset-input[_ngcontent-%COMP%]{width:100%}.asset-option[_ngcontent-%COMP%]{line-height:1.3;padding:8px 16px;min-height:52px}.asset-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.asset-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.asset-name[_ngcontent-%COMP%]{font-weight:500}.accession-id[_ngcontent-%COMP%]{font-size:.8em;color:var(--sys-on-surface-variant)}.asset-tags[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.tag-chip[_ngcontent-%COMP%]{background:var(--sys-secondary-container);color:var(--sys-on-secondary-container);padding:2px 8px;border-radius:12px;font-size:.7em;font-weight:500}.field-description[_ngcontent-%COMP%]{font-size:.85em;color:var(--sys-on-surface-variant);margin-top:4px}"],changeDetection:0})};function Ar(i,o){if(i&1){let e=A();r(0,"div",1)(1,"mat-card",4)(2,"mat-card-content"),_(3,"formly-field",5),a(),r(4,"mat-card-actions",6)(5,"button",7),v("click",function(){let n=S(e).$index,s=m();return k(s.remove(n))}),r(6,"mat-icon"),l(7,"delete"),a()()()()()}if(i&2){let e=o.$implicit;c(3),u("field",e)}}var Gt=class i extends Qo{static \u0275fac=(()=>{let o;return function(t){return(o||(o=I(i)))(t||i)}})();static \u0275cmp=y({type:i,selectors:[["app-repeat-section"]],features:[F],decls:8,vars:1,consts:[[1,"repeat-container"],[1,"repeat-item"],[1,"add-button"],["mat-stroked-button","","color","primary",3,"click"],[1,"repeat-card"],[3,"field"],["align","end"],["mat-icon-button","","color","warn","matTooltip","Remove Item",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0),O(1,Ar,8,1,"div",1,W),r(3,"div",2)(4,"button",3),v("click",function(){return t.add()}),r(5,"mat-icon"),l(6,"add"),a(),l(7),a()()()),e&2&&(c(),P(t.field.fieldGroup),c(6),M(" ",t.to.addText||"Add Item"," "))},dependencies:[w,Wo,Q,se,ae,B,$,Me,Ce,Po,xe],styles:[".repeat-container[_ngcontent-%COMP%]{margin-top:8px}.repeat-item[_ngcontent-%COMP%]{margin-bottom:8px}.add-button[_ngcontent-%COMP%]{margin-top:8px}"],changeDetection:0})};function Er(i,o){if(i&1&&(r(0,"label"),l(1),a()),i&2){let e=m();c(),b(e.to.label)}}function Dr(i,o){if(i&1&&(r(0,"mat-chip-option",2),l(1),a()),i&2){let e=o.$implicit;u("value",e.value),c(),M(" ",e.label," ")}}var qt=class i extends de{get options$(){let o=this.to.options;return vi(o)?o:C(Array.isArray(o)?o:[])}static \u0275fac=(()=>{let o;return function(t){return(o||(o=I(i)))(t||i)}})();static \u0275cmp=y({type:i,selectors:[["app-chips-type"]],features:[F],decls:6,vars:6,consts:[[1,"chips-container"],[3,"multiple","formControl","selectable"],[3,"value"]],template:function(e,t){e&1&&(r(0,"div",0),g(1,Er,2,1,"label"),r(2,"mat-chip-listbox",1),O(3,Dr,2,2,"mat-chip-option",2,W),G(5,"async"),a()()),e&2&&(c(),h(t.to.label?1:-1),c(),u("multiple",t.to.multiple)("formControl",t.formControl)("selectable",!0),c(),P(J(5,4,t.options$)))},dependencies:[R,T,V,z,Tt,So,wo,B,w,ne],styles:[".chips-container[_ngcontent-%COMP%]{margin-bottom:16px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500}"],changeDetection:0})};var Ut=class i{linkGroups=new Map;selectorRegistry=new Map;registerSelector(o,e){this.selectorRegistry.has(o)||this.selectorRegistry.set(o,new Set),this.selectorRegistry.get(o).add(e),this.linkGroups.has(o)||this.linkGroups.set(o,new Qe({linkId:o,selectedIndices:[],sourceId:"",timestamp:0}))}unregisterSelector(o,e){let t=this.selectorRegistry.get(o);t&&(t.delete(e),t.size===0&&(this.selectorRegistry.delete(o),this.linkGroups.get(o)?.complete(),this.linkGroups.delete(o)))}updateSelection(o,e,t){let n=this.linkGroups.get(o);n&&n.next({linkId:o,selectedIndices:[...t],sourceId:e,timestamp:Date.now()})}getSelection$(o,e){let t=this.linkGroups.get(o);return t?t.pipe(ot(n=>!e||n.sourceId!==e),X(n=>n.selectedIndices)):new Qe([]).asObservable()}getCurrentSelection(o){return this.linkGroups.get(o)?.value.selectedIndices??[]}isLinked(o){let e=this.selectorRegistry.get(o);return!!e&&e.size>1}getLinkGroupSize(o){return this.selectorRegistry.get(o)?.size??0}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};function Rr(i,o){if(i&1&&(r(0,"div",1)(1,"span",9),l(2),a(),r(3,"span",10),l(4),a()()),i&2){let e=m();c(2),b(e.spec.label),c(2),b(e.getSelectionSummary())}}function Lr(i,o){if(i&1){let e=A();r(0,"div",12),v("click",function(){let n=S(e).$index,s=m(2);return k(s.selectColumn(n))}),l(1),a()}if(i&2){let e=o.$implicit,t=o.$index;oi("grid-column",t+2),c(),M(" ",e," ")}}function Nr(i,o){if(i&1&&O(0,Lr,2,3,"div",11,W),i&2){let e=m();P(e.columns)}}function Br(i,o){if(i&1){let e=A();r(0,"div",14),v("click",function(){let n=S(e).$index,s=m(2);return k(s.selectRow(n))}),l(1),a()}if(i&2){let e=o.$implicit,t=o.$index;oi("grid-row",t+2),c(),M(" ",e," ")}}function Vr(i,o){if(i&1&&O(0,Br,2,3,"div",13,W),i&2){let e=m();P(e.rows)}}function jr(i,o){if(i&1){let e=A();r(0,"div",16),v("click",function(n){let s=S(e).$index,d=m().$index,f=m();return k(f.onCellClick(d,s,n))})("mousedown",function(n){let s=S(e).$index,d=m().$index,f=m();return k(f.onCellMouseDown(d,s,n))})("mouseenter",function(){let n=S(e).$index,s=m().$index,d=m();return k(d.onCellMouseEnter(s,n))}),a()}if(i&2){let e=o.$index,t=m().$index,n=m();ie("selected",n.selectionGrid[t]==null?null:n.selectionGrid[t][e])("in-drag",n.isInDragRect(t,e))("disabled",n.disabled),u("title",n.getWellId(t,e))}}function $r(i,o){if(i&1&&(r(0,"div",7),O(1,jr,1,7,"div",15,W),a()),i&2){let e=m();c(),P(e.columns)}}function zr(i,o){if(i&1&&(r(0,"div",8)(1,"span",10),l(2),a()()),i&2){let e=m();c(2),b(e.getSelectionSummary())}}var Wt=class i{linkedSelectorService=p(Ut);linkSubscription;instanceId=`index - selector - ${Math.random().toString(36).substring(2,9)}`;spec={itemsX:12,itemsY:8};selectedIndices=[];mode="multiple";disabled=!1;selectionColor="var(--mat-primary-color, #3f51b5)";showRowLabels=!0;showColumnLabels=!0;selectionChange=new ti;wellIdsChange=new ti;rows=[];columns=[];selectionGrid=[];isDragging=!1;dragStartRow=-1;dragStartCol=-1;dragEndRow=-1;dragEndCol=-1;dragAddMode=!0;lastClickedRow=-1;lastClickedCol=-1;constructor(){this.initializeGrid()}ngOnInit(){this.spec.linkId&&(this.linkedSelectorService.registerSelector(this.spec.linkId,this.instanceId),this.linkSubscription=this.linkedSelectorService.getSelection$(this.spec.linkId,this.instanceId).subscribe(o=>{this.selectedIndices=o,this.syncGridFromIndices()}))}ngOnDestroy(){this.spec.linkId&&this.linkedSelectorService.unregisterSelector(this.spec.linkId,this.instanceId),this.linkSubscription?.unsubscribe()}ngOnChanges(o){if(o.spec&&(this.initializeGrid(),o.spec.previousValue?.linkId!==o.spec.currentValue?.linkId)){let e=o.spec.previousValue?.linkId;e&&(this.linkedSelectorService.unregisterSelector(e,this.instanceId),this.linkSubscription?.unsubscribe());let t=o.spec.currentValue?.linkId;t&&(this.linkedSelectorService.registerSelector(t,this.instanceId),this.linkSubscription=this.linkedSelectorService.getSelection$(t,this.instanceId).subscribe(n=>{this.selectedIndices=n,this.syncGridFromIndices()}))}o.selectedIndices&&this.syncGridFromIndices()}initializeGrid(){let{itemsX:o,itemsY:e}=this.spec;this.rows=Array.from({length:e},(t,n)=>this.indexToRowLabel(n)),this.columns=Array.from({length:o},(t,n)=>n+1),this.selectionGrid=Array.from({length:e},()=>Array.from({length:o},()=>!1)),this.syncGridFromIndices()}indexToRowLabel(o){if(o<26)return String.fromCharCode(65+o);let e=Math.floor(o/26)-1,t=o%26;return String.fromCharCode(65+e)+String.fromCharCode(65+t)}syncGridFromIndices(){let{itemsX:o,itemsY:e}=this.spec;for(let t=0;t<e;t++)for(let n=0;n<o;n++)this.selectionGrid[t]&&(this.selectionGrid[t][n]=!1);for(let t of this.selectedIndices){let n=Math.floor(t/o),s=t%o;n>=0&&n<e&&s>=0&&s<o&&this.selectionGrid[n]&&(this.selectionGrid[n][s]=!0)}}toFlatIndex(o,e){return o*this.spec.itemsX+e}getWellId(o,e){return`${this.rows[o]}${this.columns[e]}`}onCellClick(o,e,t){this.disabled||(t.preventDefault(),this.mode==="single"?(this.clearSelection(),this.selectionGrid[o][e]=!0):t.shiftKey&&this.lastClickedRow>=0?this.selectRange(this.lastClickedRow,this.lastClickedCol,o,e):t.ctrlKey||t.metaKey?this.selectionGrid[o][e]=!this.selectionGrid[o][e]:this.isDragging||(this.clearSelection(),this.selectionGrid[o][e]=!0),this.lastClickedRow=o,this.lastClickedCol=e,this.emitSelection())}onCellMouseDown(o,e,t){this.disabled||t.button!==0||(this.isDragging=!0,this.dragStartRow=o,this.dragStartCol=e,this.dragEndRow=o,this.dragEndCol=e,this.dragAddMode=!this.selectionGrid[o][e],t.preventDefault())}onCellMouseEnter(o,e){!this.isDragging||this.disabled||(this.dragEndRow=o,this.dragEndCol=e,this.updateDragSelection())}onMouseUp(o){this.isDragging&&(this.finalizeDragSelection(),this.isDragging=!1,this.emitSelection())}updateDragSelection(){}finalizeDragSelection(){let o=Math.min(this.dragStartRow,this.dragEndRow),e=Math.max(this.dragStartRow,this.dragEndRow),t=Math.min(this.dragStartCol,this.dragEndCol),n=Math.max(this.dragStartCol,this.dragEndCol);for(let s=o;s<=e;s++)for(let d=t;d<=n;d++)this.selectionGrid[s][d]=this.dragAddMode}selectRange(o,e,t,n){let s=Math.min(o,t),d=Math.max(o,t),f=Math.min(e,n),q=Math.max(e,n);for(let Pe=s;Pe<=d;Pe++)for(let qe=f;qe<=q;qe++)this.selectionGrid[Pe][qe]=!0}clearSelection(){for(let o=0;o<this.spec.itemsY;o++)for(let e=0;e<this.spec.itemsX;e++)this.selectionGrid[o]&&(this.selectionGrid[o][e]=!1)}selectAll(){if(!this.disabled){for(let o=0;o<this.spec.itemsY;o++)for(let e=0;e<this.spec.itemsX;e++)this.selectionGrid[o]&&(this.selectionGrid[o][e]=!0);this.emitSelection()}}selectRow(o){if(!this.disabled){for(let e=0;e<this.spec.itemsX;e++)this.selectionGrid[o][e]=!0;this.emitSelection()}}selectColumn(o){if(!this.disabled){for(let e=0;e<this.spec.itemsY;e++)this.selectionGrid[e][o]=!0;this.emitSelection()}}isInDragRect(o,e){if(!this.isDragging)return!1;let t=Math.min(this.dragStartRow,this.dragEndRow),n=Math.max(this.dragStartRow,this.dragEndRow),s=Math.min(this.dragStartCol,this.dragEndCol),d=Math.max(this.dragStartCol,this.dragEndCol);return o>=t&&o<=n&&e>=s&&e<=d}emitSelection(){let o=[],e=[];for(let t=0;t<this.spec.itemsY;t++)for(let n=0;n<this.spec.itemsX;n++)this.selectionGrid[t]?.[n]&&(o.push(this.toFlatIndex(t,n)),e.push(this.getWellId(t,n)));o.sort((t,n)=>t-n),e.sort((t,n)=>{let s=t.match(/[A-Z]+/)?.[0]??"",d=n.match(/[A-Z]+/)?.[0]??"",f=parseInt(t.replace(/[A-Z]+/,""),10),q=parseInt(n.replace(/[A-Z]+/,""),10);return s!==d?s.localeCompare(d):f-q}),this.selectionChange.emit(o),this.wellIdsChange.emit(e),this.spec.linkId&&this.linkedSelectorService.updateSelection(this.spec.linkId,this.instanceId,o)}getSelectionSummary(){let o=this.selectedIndices.length;return o===0?"No selection":o===1?"1 position selected":`${o} positions selected`}getGridStyle(){let o=Math.min(40,Math.max(20,400/this.spec.itemsX)),e=Math.min(40,Math.max(20,320/this.spec.itemsY));return{"grid-template-columns":`30px repeat(${this.spec.itemsX}, ${o}px)`,"grid-template-rows":`30px repeat(${this.spec.itemsY}, ${e}px)`}}getInnerGridStyle(){return{"grid-template-columns":`repeat(${this.spec.itemsX}, 1fr)`,"grid-template-rows":`repeat(${this.spec.itemsY}, 1fr)`,"grid-column":`2 / span ${this.spec.itemsX}`,"grid-row":`2 / span ${this.spec.itemsY}`}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-index-selector"]],hostBindings:function(e,t){e&1&&v("mouseup",function(s){return t.onMouseUp(s)},Li)},inputs:{spec:"spec",selectedIndices:"selectedIndices",mode:"mode",disabled:"disabled",selectionColor:"selectionColor",showRowLabels:"showRowLabels",showColumnLabels:"showColumnLabels"},outputs:{selectionChange:"selectionChange",wellIdsChange:"wellIdsChange"},features:[Ei],decls:16,vars:10,consts:[[1,"index-selector-container"],[1,"selector-header"],[1,"selector-toolbar"],["mat-icon-button","","matTooltip","Select All",3,"click","disabled"],["mat-icon-button","","matTooltip","Clear Selection",3,"click","disabled"],[1,"grid-container",3,"ngStyle"],[1,"main-grid",3,"ngStyle"],[1,"grid-row"],[1,"selector-footer"],[1,"selector-label"],[1,"selection-summary"],[1,"column-header",3,"grid-column"],[1,"column-header",3,"click"],[1,"row-header",3,"grid-row"],[1,"row-header",3,"click"],[1,"cell",3,"selected","in-drag","disabled","title"],[1,"cell",3,"click","mousedown","mouseenter","title"]],template:function(e,t){e&1&&(r(0,"div",0),g(1,Rr,5,2,"div",1),r(2,"div",2)(3,"button",3),v("click",function(){return t.selectAll()}),r(4,"mat-icon"),l(5,"select_all"),a()(),r(6,"button",4),v("click",function(){return t.clearSelection(),t.emitSelection()}),r(7,"mat-icon"),l(8,"deselect"),a()()(),r(9,"div",5),g(10,Nr,2,0),g(11,Vr,2,0),r(12,"div",6),O(13,$r,3,0,"div",7,W),a()(),g(15,zr,3,1,"div",8),a()),e&2&&(ie("disabled",t.disabled),c(),h(t.spec.label?1:-1),c(2),u("disabled",t.disabled),c(3),u("disabled",t.disabled),c(3),u("ngStyle",t.getGridStyle()),c(),h(t.showColumnLabels?10:-1),c(),h(t.showRowLabels?11:-1),c(),u("ngStyle",t.getInnerGridStyle()),c(),P(t.rows),c(2),h(t.spec.label?-1:15))},dependencies:[Gi,Ft,Q,ae,B,$,he,Ee],styles:["[_nghost-%COMP%]{display:block;font-family:var(--mat-font-family, Roboto, sans-serif);--selector-primary: var(--mat-primary-color, #3f51b5);--selector-selected-bg: var(--mat-primary-color, #3f51b5);--selector-selected-fg: white;--selector-hover-bg: rgba(63, 81, 181, .2);--selector-drag-bg: rgba(63, 81, 181, .3);--selector-border: #e0e0e0}.index-selector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.index-selector-container.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.selector-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 8px}.selector-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:var(--mat-on-surface-variant)}.selection-summary[_ngcontent-%COMP%]{font-size:12px;color:var(--mat-on-surface-variant, #666)}.selector-toolbar[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:4px}.selector-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.8}.selector-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.grid-container[_ngcontent-%COMP%]{display:grid;gap:2px;padding:4px;background:var(--mat-surface, #fafafa);border-radius:8px;border:1px solid var(--selector-border);-webkit-user-select:none;user-select:none}.column-header[_ngcontent-%COMP%], .row-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:var(--mat-on-surface-variant, #666);cursor:pointer;transition:background-color .15s ease;border-radius:4px}.column-header[_ngcontent-%COMP%]:hover, .row-header[_ngcontent-%COMP%]:hover{background:var(--selector-hover-bg)}.column-header[_ngcontent-%COMP%]{grid-row:1}.row-header[_ngcontent-%COMP%]{grid-column:1}.main-grid[_ngcontent-%COMP%]{display:grid;gap:2px;background:var(--mat-surface-container, #fff);border-radius:4px;overflow:hidden}.grid-row[_ngcontent-%COMP%]{display:contents}.cell[_ngcontent-%COMP%]{width:100%;height:100%;min-width:16px;min-height:16px;background:var(--mat-surface-container-high, #f5f5f5);border:1px solid var(--selector-border);border-radius:50%;cursor:pointer;transition:background-color .1s ease,transform .1s ease,border-color .1s ease}.cell[_ngcontent-%COMP%]:hover:not(.disabled){transform:scale(1.1);border-color:var(--selector-primary);z-index:1}.cell.selected[_ngcontent-%COMP%]{background:var(--selector-selected-bg);border-color:var(--selector-selected-bg);box-shadow:0 2px 4px #0003}.cell.selected[_ngcontent-%COMP%]:hover:not(.disabled){background:var(--selector-selected-bg);filter:brightness(1.1)}.cell.in-drag[_ngcontent-%COMP%]:not(.selected){background:var(--selector-drag-bg);border-color:var(--selector-primary)}.cell.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5}.selector-footer[_ngcontent-%COMP%]{padding:4px 8px;text-align:center}"],changeDetection:0})};function Hr(i,o){i&1&&(r(0,"span",5),l(1,"*"),a())}function Gr(i,o){if(i&1&&(r(0,"label",1),l(1),g(2,Hr,2,0,"span",5),a()),i&2){let e=m();c(),M(" ",e.props.label," "),c(),h(e.props.required?2:-1)}}function qr(i,o){if(i&1&&(r(0,"div",3),l(1),a()),i&2){let e=m();c(),M(" ",e.props.description," ")}}function Ur(i,o){if(i&1&&(r(0,"div",4),_(1,"formly-validation-message",6),a()),i&2){let e=m();c(),u("field",e.field)}}var Qt=class i extends de{resourceSpec=j({itemsX:12,itemsY:8});selectedIndices=j([]);selectionMode=j("multiple");ngOnInit(){this.resourceSpec.set({itemsX:this.props.itemsX||12,itemsY:this.props.itemsY||8,label:this.props.label,linkId:this.props.linkedTo}),this.props.mode&&this.selectionMode.set(this.props.mode);let o=this.formControl.value;Array.isArray(o)&&this.selectedIndices.set(o),this.formControl.valueChanges.subscribe(e=>{Array.isArray(e)&&this.selectedIndices.set(e)})}onSelectionChange(o){this.formControl.setValue(o),this.formControl.markAsTouched(),this.formControl.markAsDirty()}onWellIdsChange(o){}static \u0275fac=(()=>{let o;return function(t){return(o||(o=I(i)))(t||i)}})();static \u0275cmp=y({type:i,selectors:[["app-index-selector-field"]],features:[F],decls:5,vars:7,consts:[[1,"index-selector-field-wrapper"],[1,"field-label"],[3,"selectionChange","wellIdsChange","spec","selectedIndices","mode","disabled"],[1,"field-description"],[1,"field-error"],[1,"required-indicator"],[3,"field"]],template:function(e,t){e&1&&(r(0,"div",0),g(1,Gr,3,2,"label",1),r(2,"app-index-selector",2),v("selectionChange",function(s){return t.onSelectionChange(s)})("wellIdsChange",function(s){return t.onWellIdsChange(s)}),a(),g(3,qr,2,1,"div",3),g(4,Ur,2,1,"div",4),a()),e&2&&(c(),h(t.props.label?1:-1),c(),u("spec",t.resourceSpec())("selectedIndices",t.selectedIndices())("mode",t.selectionMode())("disabled",t.props.disabled||!1),c(),h(t.props.description?3:-1),c(),h(t.showError?4:-1))},dependencies:[T,w,$e,Wt],styles:[".index-selector-field-wrapper[_ngcontent-%COMP%]{margin-bottom:16px}.field-label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:8px;color:var(--mat-on-surface, #333)}.required-indicator[_ngcontent-%COMP%]{color:var(--mat-error, var(--status-error));margin-left:4px}.field-description[_ngcontent-%COMP%]{font-size:.85em;color:var(--mat-on-surface-variant, #666);margin-top:8px}.field-error[_ngcontent-%COMP%]{color:var(--mat-error, var(--status-error));font-size:.85em;margin-top:4px}"],changeDetection:0})};function Wr(i,o){i&1&&(r(0,"span",9),l(1,"*"),a())}function Qr(i,o){if(i&1&&(r(0,"label",1),l(1),g(2,Wr,2,0,"span",9),a()),i&2){let e=m();c(),M(" ",e.to.label," "),c(),h(e.to.required?2:-1)}}function Kr(i,o){if(i&1){let e=A();r(0,"div",4)(1,"mat-form-field",10)(2,"mat-label"),l(3,"Key"),a(),_(4,"input",11),a(),r(5,"mat-form-field",12)(6,"mat-label"),l(7,"Value"),a(),_(8,"input",13),a(),r(9,"button",14),v("click",function(){let n=S(e).$index,s=m();return k(s.removeItem(n))}),r(10,"mat-icon"),l(11,"delete"),a()()()}if(i&2){let e=o.$index;u("formGroupName",e)}}function Yr(i,o){if(i&1&&(r(0,"div",7),l(1),a()),i&2){let e=m();c(),M(" ",e.to.description," ")}}function Xr(i,o){if(i&1&&(r(0,"div",8),_(1,"formly-validation-message",15),a()),i&2){let e=m();c(),u("field",e.field)}}var Kt=class i extends de{itemsForm=new ai({items:new po([])});get items(){return this.itemsForm.get("items")}ngOnInit(){let o=this.formControl.value;o&&typeof o=="object"&&Object.entries(o).forEach(([e,t])=>{this.addItem(e,t)}),this.itemsForm.valueChanges.subscribe(e=>{let t={};e.items?.forEach(n=>{if(n.key){let s=n.value;!isNaN(Number(n.value))&&n.value!==""&&(s=Number(n.value)),t[n.key]=s}}),this.formControl.setValue(t),this.formControl.markAsDirty()})}addItem(o="",e=""){let t=new ai({key:new Xe(o,ri.required),value:new Xe(e,ri.required)});this.items.push(t)}removeItem(o){this.items.removeAt(o)}static \u0275fac=(()=>{let o;return function(t){return(o||(o=I(i)))(t||i)}})();static \u0275cmp=y({type:i,selectors:[["app-dict-input"]],features:[F],decls:13,vars:4,consts:[[1,"dict-container"],[1,"field-label"],[1,"dict-items",3,"formGroup"],["formArrayName","items"],[1,"dict-item",3,"formGroupName"],[1,"add-button"],["mat-stroked-button","","color","primary",3,"click"],[1,"field-description"],[1,"field-error"],[1,"required-indicator"],["appearance","outline","density","compact",1,"key-field"],["matInput","","formControlName","key","placeholder","Key"],["appearance","outline","density","compact",1,"value-field"],["matInput","","formControlName","value","placeholder","Value"],["mat-icon-button","","color","warn","matTooltip","Remove Item",3,"click"],[3,"field"]],template:function(e,t){e&1&&(r(0,"div",0),g(1,Qr,3,2,"label",1),r(2,"div",2),ut(3,3),O(4,Kr,12,1,"div",4,W),ft(),a(),r(6,"div",5)(7,"button",6),v("click",function(){return t.addItem()}),r(8,"mat-icon"),l(9,"add"),a(),l(10," Add Entry "),a()(),g(11,Yr,2,1,"div",7),g(12,Xr,2,1,"div",8),a()),e&2&&(c(),h(t.to.label?1:-1),c(),u("formGroup",t.itemsForm),c(2),P(t.items.controls),c(7),h(t.to.description?11:-1),c(),h(t.showError?12:-1))},dependencies:[T,le,V,co,ho,go,uo,fo,w,$e,Q,se,ae,B,$,ce,ve,ye,It,Ne],styles:[".dict-container[_ngcontent-%COMP%]{margin-bottom:16px}.field-label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:8px;color:var(--mat-on-surface, #333)}.required-indicator[_ngcontent-%COMP%]{color:var(--mat-error, var(--status-error));margin-left:4px}.dict-item[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-bottom:8px}.key-field[_ngcontent-%COMP%], .value-field[_ngcontent-%COMP%]{flex:1}.add-button[_ngcontent-%COMP%]{margin-top:8px}.field-description[_ngcontent-%COMP%]{font-size:.85em;color:var(--mat-on-surface-variant, #666);margin-top:8px}.field-error[_ngcontent-%COMP%]{color:var(--mat-error, var(--status-error));font-size:.85em;margin-top:4px}"],changeDetection:0})};var Yt=class i{assetService=p(Pt);router=p(ge);search(o){if(!o||o.length<2)return C([]);let e=o.toLowerCase();return it({machines:this.assetService.getMachines().pipe(Ke(()=>C([]))),resources:this.assetService.getResources().pipe(Ke(()=>C([])))}).pipe(X(({machines:t,resources:n})=>{let s=[];return t.forEach(d=>{this.matches(d,e)&&s.push({id:`machine-${d.accession_id}`,label:d.name,description:`Machine \u2022 ${d.status} \u2022 ${d.status_details||"No details"}`,category:"Asset",icon:"precision_manufacturing",action:()=>{this.router.navigate(["/app/assets"],{queryParams:{type:"machine"}})}})}),n.forEach(d=>{this.matches(d,e)&&s.push({id:`resource-${d.accession_id}`,label:d.name,description:`Resource \u2022 ${d.status} \u2022 ${d.status_details||"No details"}`,category:"Asset",icon:"science",action:()=>{this.router.navigate(["/app/assets"],{queryParams:{type:"resource"}})}})}),s}))}matches(o,e){return this.isMachine(o)?o.name.toLowerCase().includes(e)||(o.description||"").toLowerCase().includes(e)||(o.manufacturer||"").toLowerCase().includes(e)||(o.model||"").toLowerCase().includes(e):o.name.toLowerCase().includes(e)}isMachine(o){return o.model!==void 0||o.manufacturer!==void 0}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Zr=["searchInput"],Jr=["commandList"],ea=(i,o)=>o.id;function ta(i,o){if(i&1&&(r(0,"span",16),l(1),a()),i&2){let e=m().$implicit,t=m();c(),b(t.formatShortcut(e.shortcut))}}function ia(i,o){if(i&1&&(r(0,"div",17),l(1),a()),i&2){let e=m().$implicit;c(),M(" ",e.category," ")}}function oa(i,o){if(i&1){let e=A();r(0,"button",11),v("click",function(){let n=S(e).$implicit,s=m();return k(s.execute(n))})("mouseenter",function(){let n=S(e).$index,s=m();return k(s.selectedIndex.set(n))}),r(1,"mat-icon",12),l(2),a(),r(3,"div",13),l(4),a(),r(5,"div",14),l(6),a(),r(7,"div",15),g(8,ta,2,1,"span",16),g(9,ia,2,1,"div",17),a()()}if(i&2){let e=o.$implicit,t=o.$index,n=m();ie("selected-item",t===n.selectedIndex()),c(2),b(e.icon||"terminal"),c(2),b(e.label),c(2),b(e.description),c(2),h(e.shortcut?8:-1),c(),h(e.category?9:-1)}}function na(i,o){i&1&&(r(0,"div",8),l(1,"No commands found matching your search."),a())}var tt=class i{dialogRef=p(Mt);registry=p(we);assetSearchService=p(Yt);platformId=p(Di);searchControl=new Xe("");searchQuery=ni(this.searchControl.valueChanges,{initialValue:""});selectedIndex=j(0);isMac=j(!1);searchInput;commandList;filteredCommands=ni(this.searchControl.valueChanges.pipe(Ye(""),nt(200),rt(),fe(o=>{let e=(o||"").toLowerCase(),t=this.registry.commands().filter(n=>!e||n.label.toLowerCase().includes(e)||n.description?.toLowerCase().includes(e)||n.category?.toLowerCase().includes(e)||n.keywords?.some(s=>s.toLowerCase().includes(e)));return!e||e.length<2?C(t):this.assetSearchService.search(e).pipe(X(n=>[...t,...n]),Ye(t))})),{initialValue:[]});constructor(){Ti(()=>{let o=this.selectedIndex(),e=this.commandList?.nativeElement;if(e){let n=e.querySelectorAll("button[mat-list-item]")[o];n&&n.scrollIntoView({block:"nearest"})}})}ngOnInit(){this.searchControl.valueChanges.subscribe(()=>{this.selectedIndex.set(0)}),Ui(this.platformId)&&this.isMac.set(navigator.userAgent.includes("Mac"))}ngAfterViewInit(){setTimeout(()=>{this.searchInput?.nativeElement?.focus()})}handleKeyDown(o){switch(o.stopPropagation(),o.key){case"ArrowDown":o.preventDefault(),this.moveSelection(1);break;case"ArrowUp":o.preventDefault(),this.moveSelection(-1);break;case"Enter":o.preventDefault(),this.executeSelected();break;case"Escape":o.preventDefault(),this.dialogRef.close();break}}moveSelection(o){let e=this.filteredCommands().length;e!==0&&this.selectedIndex.update(t=>(t+o+e)%e)}executeSelected(){let o=this.filteredCommands();o.length>0&&this.execute(o[this.selectedIndex()])}execute(o){this.dialogRef.close(),o.action()}formatShortcut(o){return o?this.isMac()?o.replace("Alt","\u2325").replace("Control","\u2303").replace("Ctrl","\u2303").replace("Shift","\u21E7").replace("Meta","\u2318").replace("Cmd","\u2318"):o:""}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-command-palette"]],viewQuery:function(e,t){if(e&1&&H(Zr,5)(Jr,5,lt),e&2){let n;E(n=D())&&(t.searchInput=n.first),E(n=D())&&(t.commandList=n.first)}},decls:24,vars:2,consts:[["searchInput",""],["commandList",""],[1,"command-palette-container"],[1,"search-header"],["placeholder","Type a command or search...","autoFocus","",3,"keydown","formControl"],[1,"esc-hint"],[1,"command-list"],["mat-list-item","","tabindex","-1",3,"selected-item"],[1,"no-results"],[1,"palette-footer"],[1,"shortcuts"],["mat-list-item","","tabindex","-1",3,"click","mouseenter"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine","",1,"description"],["matListItemMeta","",1,"meta-container"],[1,"shortcut-badge"],[1,"category-chip"]],template:function(e,t){if(e&1){let n=A();r(0,"div",2)(1,"div",3)(2,"mat-icon"),l(3,"search"),a(),r(4,"input",4,0),v("keydown",function(d){return S(n),k(t.handleKeyDown(d))}),a(),r(6,"span",5),l(7,"ESC to close"),a()(),_(8,"mat-divider"),r(9,"mat-action-list",6,1),O(11,oa,10,7,"button",7,ea,!1,na,2,0,"div",8),a(),r(14,"div",9)(15,"div",10)(16,"span")(17,"kbd"),l(18,"\u2191\u2193"),a(),l(19," to navigate"),a(),r(20,"span")(21,"kbd"),l(22,"\u21B5"),a(),l(23," to select"),a()()()()}e&2&&(c(4),u("formControl",t.searchControl),c(7),P(t.filteredCommands()))},dependencies:[T,le,V,z,wt,ce,jo,Bo,Vo,No,To,Ro,Do,Lo,B,$,Ao],styles:[`.command-palette-panel .mat-mdc-dialog-container .mat-mdc-dialog-surface{background:transparent!important;box-shadow:none!important;overflow:visible!important}.command-palette-container{width:600px;max-width:90vw;background:var(--mat-sys-surface-container-high);border-radius:12px;overflow:hidden;box-shadow:0 16px 64px #00000080;border:1px solid var(--theme-border)}.search-header{display:flex;align-items:center;padding:16px;gap:12px}.search-header mat-icon{color:var(--theme-text-secondary)}.search-header input{flex:1;background:transparent;border:none;outline:none;color:var(--theme-text-primary);font-size:1.1rem;font-family:inherit}.search-header input::placeholder{color:var(--theme-text-tertiary)}.search-header .esc-hint{font-size:.75rem;color:var(--theme-text-tertiary);text-transform:uppercase;letter-spacing:.5px}.command-list{max-height:400px;overflow-y:auto;padding:8px 0;scroll-behavior:smooth}.command-list button{transition:background-color .15s ease}.command-list button:hover:not(.selected-item){background-color:var(--mat-sys-surface-variant)!important}.command-list .selected-item{background-color:#ed7a9b26!important;position:relative}.command-list .selected-item:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background-color:var(--primary-color);border-radius:0 4px 4px 0}.command-list .selected-item .mat-mdc-list-item-title{color:var(--theme-text-primary)!important;font-weight:600!important}.command-list .selected-item mat-icon{color:var(--primary-color)!important}.command-list .selected-item .description{color:var(--theme-text-secondary)!important}.command-list .selected-item .shortcut-badge{background:#ed7a9b33!important;border-color:var(--primary-color)!important;color:var(--primary-color)!important}.command-list .description{font-size:.85rem;color:var(--theme-text-secondary)}.command-list .meta-container{display:flex;flex-direction:row;align-items:center;gap:8px;flex-shrink:0;margin-left:12px}.command-list .shortcut-badge{font-size:.7rem;font-weight:600;background:var(--theme-surface);color:var(--theme-text-secondary);padding:3px 8px;border-radius:4px;border:1px solid var(--theme-border);font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,monospace;white-space:nowrap;letter-spacing:.02em}.command-list .category-chip{font-size:.65rem;background:var(--mat-sys-surface-variant);padding:3px 8px;border-radius:12px;color:var(--theme-text-tertiary);text-transform:uppercase;letter-spacing:.04em;font-weight:500;white-space:nowrap}.no-results{padding:32px;text-align:center;color:var(--theme-text-tertiary)}.palette-footer{padding:12px 16px;background:var(--theme-surface);border-top:1px solid var(--theme-border)}.palette-footer .shortcuts{display:flex;gap:16px;font-size:.75rem;color:var(--theme-text-tertiary)}.palette-footer .shortcuts kbd{background:var(--theme-surface-elevated);padding:2px 4px;border-radius:3px;border:1px solid var(--theme-border);font-family:monospace}
`],encapsulation:2})};var Xt=class i{dialog=p(De);router=p(ge);registry=p(we);rendererFactory=p(ct);renderer;store=p(Re);constructor(){this.renderer=this.rendererFactory.createRenderer(null,null),this.initGlobalListeners(),this.registerDefaultCommands()}initGlobalListeners(){this.renderer.listen("window","keydown",o=>{let e=document.activeElement,t=e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable,n=o.metaKey||o.ctrlKey,s=o.altKey;if(n&&o.key.toLowerCase()==="k"&&(o.preventDefault(),this.openCommandPalette()),!t&&s)switch(o.code){case"Backquote":o.preventDefault(),this.router.navigate(["/app/playground"]);break;case"KeyP":o.preventDefault(),this.router.navigate(["/app/protocols"]);break;case"KeyR":o.preventDefault(),this.router.navigate(["/app/assets"],{queryParams:{type:"resource"}});break;case"KeyM":o.preventDefault(),this.router.navigate(["/app/assets"],{queryParams:{type:"machine"}});break;case"KeyD":o.preventDefault(),this.registry.executeCommand("hardware-discovery");break;case"KeyH":o.preventDefault(),this.router.navigate(["/app/home"]);break}})}openCommandPalette(){this.dialog.openDialogs.some(o=>o.componentInstance instanceof tt)||this.dialog.open(tt,{width:"600px",maxWidth:"90vw",panelClass:["command-palette-panel","!bg-transparent","!shadow-none"],position:{top:"10%"}})}registerDefaultCommands(){this.registry.registerCommand({id:"nav-home",label:"Go to Home",description:"Navigate to the dashboard",icon:"home",category:"Navigation",shortcut:"Alt+H",action:()=>this.router.navigate(["/app/home"]),keywords:["dashboard","main"]}),this.registry.registerCommand({id:"nav-protocols",label:"Go to Protocols",description:"View the protocol library",icon:"science",category:"Navigation",shortcut:"Alt+P",action:()=>this.router.navigate(["/app/protocols"]),keywords:["scripts","definitions"]}),this.registry.registerCommand({id:"nav-playground",label:"Open Playground",description:"Interactive Python console for hardware control",icon:"terminal",category:"Navigation",shortcut:"Alt+`",action:()=>this.router.navigate(["/app/playground"]),keywords:["console","terminal","python","interactive","repl"]}),this.registry.registerCommand({id:"nav-assets",label:"Go to Assets",description:"Manage machines and resources",icon:"inventory_2",category:"Navigation",shortcut:"Alt+A",action:()=>this.router.navigate(["/app/assets"]),keywords:["machines","labware","equipment"]}),this.registry.registerCommand({id:"hardware-discovery",label:"Discover Hardware",description:"Scan for connected USB and serial devices",icon:"usb",category:"Actions",shortcut:"Alt+D",action:()=>{this.router.navigate(["/app/assets"],{queryParams:{type:"machine"}}).then(()=>{setTimeout(()=>{let o=new CustomEvent("open-hardware-discovery");window.dispatchEvent(o)},100)})},keywords:["usb","serial","scan","detect","connect"]}),this.registry.registerCommand({id:"theme-toggle",label:"Toggle Theme",description:"Switch between light and dark mode",icon:"contrast",category:"Settings",action:()=>{let e=this.store.theme()==="light"?"dark":"light";this.store.setTheme(e)}})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Zt=class i{iconRegistry=p(no);sanitizer=p(Zi);init(){this.registerCustomIcons()}registerCustomIcons(){this.iconRegistry.addSvgIconLiteral("tip_rack_custom",this.sanitizer.bypassSecurityTrustHtml(`
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="6" cy="6" r="2" fill="currentColor"/>
          <circle cx="12" cy="6" r="2" fill="currentColor"/>
          <circle cx="18" cy="6" r="2" fill="currentColor"/>
          <circle cx="6" cy="12" r="2" fill="currentColor"/>
          <circle cx="12" cy="12" r="2" fill="currentColor"/>
          <circle cx="18" cy="12" r="2" fill="currentColor"/>
          <circle cx="6" cy="18" r="2" fill="currentColor"/>
          <circle cx="12" cy="18" r="2" fill="currentColor"/>
          <circle cx="18" cy="18" r="2" fill="currentColor"/>
        </svg>
      `)),this.iconRegistry.addSvgIconLiteral("erlenmeyer",this.sanitizer.bypassSecurityTrustHtml(`
        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
           <path d="M14,6V5.5C14,4.12 12.88,3 11.5,3C10.12,3 9,4.12 9,5.5V6L3,18V20H20V18L14,6M11,5.5C11,5.22 11.22,5 11.5,5C11.78,5 12,5.22 12,5.5V7H11V5.5M16.92,18H6.08L10,10.16V8H13V10.16L16.92,18Z" />
        </svg>
      `)),this.iconRegistry.addSvgIconLiteral("test_tube",this.sanitizer.bypassSecurityTrustHtml(`
               <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                 <path d="M7,2H17V4H16V17A5,5 0 0,1 11,22A5,5 0 0,1 6,17V4H5V2H7Z" />
               </svg>
             `))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};function ra(i){return()=>i.init({onLoad:"check-sso"})}function aa(i){return()=>Promise.resolve()}function sa(i){return()=>i.init()}var la=(i,o)=>{if(p(re).isBrowserMode())return o(i);let t=p(ue);return!i.url.includes("/api/")||i.url.includes("assets/")?o(i):_i(t.getToken()).pipe(fe(n=>{if(n){let s=i.clone({setHeaders:{Authorization:`Bearer ${n}`}});return o(s)}return o(i)}))},Mn={providers:[Oi(),eo(on,io(),to({anchorScrolling:"enabled",scrollPositionRestoration:"enabled"})),Zo(),Yi(Xi([sn,la,nn])),oo({loader:Ki,mermaid:!0}),{provide:pt,useFactory:ra,deps:[ue],multi:!0},{provide:pt,useFactory:aa,deps:[Xt],multi:!0},{provide:pt,useFactory:sa,deps:[Zt],multi:!0},Si(Fo,w.forRoot({types:[{name:"asset-selector",component:Ht},{name:"chips",component:qt},{name:"repeat",component:Gt},{name:"index-selector",component:Qt},{name:"dict-input",component:Kt}],wrappers:[],validationMessages:[{name:"required",message:"This field is required"},{name:"min",message:"Value should be greater than or equal to minimum"},{name:"max",message:"Value should be less than or equal to maximum"},{name:"minLength",message:"Minimum length is required"},{name:"maxLength",message:"Maximum length exceeded"},{name:"pattern",message:"Value does not match required pattern"}]}),xn)]};var Jt=class i{initialize(){St.BASE=window.location.origin,console.debug("[API-CONFIG] Initialized OpenAPI.BASE:",St.BASE)}setToken(o){St.TOKEN=o}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var ei=class i{constructor(o){this.sqlite=o;this.apiConfig.initialize(),window.sqliteService=this.sqlite}title=j("web-client");apiConfig=p(Jt);static \u0275fac=function(e){return new(e||i)(pe(kt))};static \u0275cmp=y({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){e&1&&_(0,"router-outlet")},dependencies:[vt],encapsulation:2})};Yo.setPlotly(window.Plotly);Ae.browserMode&&(console.log("[main.ts] Detected Browser Mode from environment. Setting localStorage flag."),localStorage.setItem("praxis_mode","browser"));Qi(ei,Mn).catch(i=>console.error(i));
