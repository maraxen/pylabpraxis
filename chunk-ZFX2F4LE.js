import{a as Ue}from"./chunk-LCWNOMSF.js";import{a as Ft}from"./chunk-2ZVIT425.js";import{a as Nt,b as Ht}from"./chunk-FT4635ZQ.js";import{a as qt}from"./chunk-A7LM7HQJ.js";import"./chunk-VQOEKRHS.js";import"./chunk-Q55R55OU.js";import"./chunk-NG722E7F.js";import"./chunk-42JCN6QD.js";import"./chunk-ZNLOPHES.js";import{a as Wt,c as Gt}from"./chunk-NYY2LCFY.js";import{A as Ye,C as Vt,D as oe,E as $t,F as Ut,s as zt}from"./chunk-LXLEHQQF.js";import"./chunk-EV5GBPL4.js";import{$ as pe,A as me,F as It,L as At,N as Bt,aa as Pe,f as Mt,g as St,i as kt,j as Se,k as Ge,l as ke,m as Dt,n as Pt,p as De,s as qe,t as Et,u as Ot,v as Tt,w as je,x as Lt,y as ae,z as Rt}from"./chunk-3DDOVMEB.js";import{b as n,d as f,e as We,j as U}from"./chunk-JWWJNFEM.js";import{d as Xe}from"./chunk-BIHNL7XX.js";import"./chunk-SUN732H5.js";import{a as be,c as _e,d as Ct}from"./chunk-ZQZJX7DH.js";import"./chunk-VTEHCM5Y.js";import{b as Me}from"./chunk-QFTYFRTT.js";import{a as bt,b as _t,c as wt}from"./chunk-QPZUELQO.js";import{a as vt,c as ht,d as xt,e as yt}from"./chunk-XG2SDX2Y.js";import"./chunk-PWVAMWZ2.js";import"./chunk-5XV7PTQI.js";import"./chunk-F4M4TAIC.js";import"./chunk-5R36QA5Q.js";import{P as Ce,S as re}from"./chunk-YMB734HE.js";import{a as ft}from"./chunk-HUJ7WYYJ.js";import{b as we,c as te}from"./chunk-M6LIKZVL.js";import{A as ut,s as pt,y as gt}from"./chunk-Q6UYEA4T.js";import{$b as D,Aa as nt,Bb as ee,Bc as _,Cc as lt,Ga as I,Hb as xe,I as ve,Ja as it,Pa as st,Rb as ct,Sb as q,Tb as j,Yb as A,Zb as l,Zc as ye,_b as g,bd as mt,gb as dt,gc as z,jb as he,kc as C,lb as w,ma as J,mc as b,r as ot,sa as N,ta as H}from"./chunk-ZXFVGPYG.js";import{a as K,b as le}from"./chunk-RNQFGQA5.js";var ne=class e{diagramHtml=mt.required();closed=new nt;onEscape(){this.close()}close(){this.closed.emit()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ee({type:e,selectors:[["app-diagram-overlay"]],hostBindings:function(r,a){r&1&&C("keydown.escape",function(){return a.onEscape()},he)},inputs:{diagramHtml:[1,"diagramHtml"]},outputs:{closed:"closed"},decls:6,vars:1,consts:[[1,"diagram-overlay",3,"click"],[1,"overlay-content",3,"click"],["mat-icon-button","","title","Close",1,"close-btn",3,"click"],[1,"diagram-container",3,"innerHTML"]],template:function(r,a){r&1&&(l(0,"div",0),C("click",function(){return a.close()}),l(1,"div",1),C("click",function(i){return i.stopPropagation()}),l(2,"button",2),C("click",function(){return a.close()}),l(3,"mat-icon"),_(4,"close"),g()(),D(5,"div",3),g()()),r&2&&(w(5),A("innerHTML",a.diagramHtml(),dt))},dependencies:[pt,re,Ce,te,we],styles:[".diagram-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:2000;display:flex;align-items:center;justify-content:center;padding:32px;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.overlay-content[_ngcontent-%COMP%]{background:var(--mat-sys-surface);border-radius:20px;padding:56px 40px 40px;max-width:95vw;max-height:95vh;overflow:auto;position:relative;box-shadow:0 24px 48px #00000080;border:1px solid var(--theme-border);animation:_ngcontent-%COMP%_scaleUp .3s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_scaleUp{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}.close-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:var(--mat-sys-surface-variant);color:var(--theme-text-primary)}.close-btn[_ngcontent-%COMP%]:hover{background:var(--theme-surface-elevated)}.diagram-container[_ngcontent-%COMP%]{min-width:800px;display:flex;justify-content:center}[_nghost-%COMP%]     .mermaid{background:none!important;border:none!important;padding:0!important;margin:0!important}[_nghost-%COMP%]     .expand-btn{display:none!important}"]})};function ga(e,t){if(e&1){let r=z();l(0,"div",9)(1,"button",10),C("click",function(o){N(r);let i=b();return H(i.expandDiagram(o))}),l(2,"mat-icon"),_(3,"fullscreen"),g()(),D(4,"markdown",11),l(5,"div",12)(6,"div",13),D(7,"span",14),_(8," Frontend"),g(),l(9,"div",13),D(10,"span",15),_(11," API Layer"),g(),l(12,"div",13),D(13,"span",16),_(14," Core Engine"),g()()()}if(e&2){let r=b();w(4),A("data",r.productionDiagram)("mermaidOptions",r.mermaidOptions())}}function ua(e,t){if(e&1){let r=z();l(0,"div",9)(1,"button",10),C("click",function(o){N(r);let i=b();return H(i.expandDiagram(o))}),l(2,"mat-icon"),_(3,"fullscreen"),g()(),D(4,"markdown",11),g()}if(e&2){let r=b();w(4),A("data",r.liteDiagram)("mermaidOptions",r.mermaidOptions())}}function fa(e,t){if(e&1){let r=z();l(0,"div",9)(1,"button",10),C("click",function(o){N(r);let i=b();return H(i.expandDiagram(o))}),l(2,"mat-icon"),_(3,"fullscreen"),g()(),D(4,"markdown",11),g()}if(e&2){let r=b();w(4),A("data",r.browserDiagram)("mermaidOptions",r.mermaidOptions())}}function va(e,t){if(e&1){let r=z();l(0,"app-diagram-overlay",17),C("closed",function(){N(r);let o=b();return H(o.closeExpanded())}),g()}if(e&2){let r=b();A("diagramHtml",r.expandedDiagram())}}var Ee=class e{store=J(Me);expandedDiagram=I(null);expandDiagram(t){let o=t.currentTarget.closest(".diagram-container")?.querySelector(".mermaid");o&&this.expandedDiagram.set(o.innerHTML)}closeExpanded(){this.expandedDiagram.set(null)}mermaidOptions=ye(()=>{let t=this.store.theme(),r=t==="dark";t==="system"&&(r=window.matchMedia("(prefers-color-scheme: dark)").matches);let a={fontFamily:'"Roboto Flex", sans-serif',fontSize:"16px"};return{theme:"base",flowchart:{htmlLabels:!0,useMaxWidth:!1,nodeSpacing:60,rankSpacing:60,curve:"basis"},themeVariables:r?le(K({},a),{darkMode:!0,background:"transparent",mainBkg:"transparent",primaryColor:"#2a2a3c",primaryTextColor:"#ffffff",primaryBorderColor:"var(--primary-color)",secondaryColor:"var(--mat-sys-surface-container-low)",secondaryTextColor:"#ffffff",secondaryBorderColor:"var(--tertiary-color)",lineColor:"rgba(255, 255, 255, 0.6)",textColor:"#ffffff"}):le(K({},a),{darkMode:!1,background:"transparent",mainBkg:"transparent",primaryColor:"#fbf9e6",primaryTextColor:"#020617",primaryBorderColor:"var(--primary-color)",secondaryColor:"#ffffff",secondaryTextColor:"#020617",secondaryBorderColor:"var(--tertiary-color)",lineColor:"#1e293b",textColor:"#020617"})}});productionDiagram=`
\`\`\`mermaid
graph TD
    subgraph Frontend ["Frontend (Angular)"]
        UI[Web UI]
        Store[NgRx Store]
        Services[Frontend Services]
    end
    style Frontend fill:transparent,stroke:var(--primary-color),stroke-width:2px

    subgraph API ["API Layer"]
        Server[FastAPI Server]
        WS[WebSocket Handler]
    end
    style API fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    subgraph Core ["Core Engine"]
        Orch[Orchestrator]
        Sched[Scheduler]
        Proto[Protocol Engine]
        Asset[Asset Manager]
    end
    style Core fill:transparent,stroke:var(--primary-color),stroke-width:2px

    subgraph Runtime ["Runtime"]
        WCR[WorkcellRuntime]
        PLR[PyLabRobot]
        Sim[Simulators]
    end
    style Runtime fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    subgraph Data ["Data Layer"]
        PG[(PostgreSQL)]
        Redis[(Redis)]
    end
    style Data fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    UI --> Server
    UI --> WS
    Store --> Services
    Services --> Server
    Server --> Orch
    WS --> Orch
    Orch --> Proto
    Orch --> Sched
    Orch --> WCR
    WCR --> PLR
    Server --> PG
    Orch --> Redis
\`\`\`
`;liteDiagram=`
\`\`\`mermaid
graph TD
    subgraph Frontend_Lite ["Frontend (Angular)"]
        UI_L[Web UI]
        Store_L[NgRx Store]
    end
    style Frontend_Lite fill:transparent,stroke:var(--primary-color),stroke-width:2px

    subgraph API_Lite ["Local API"]
        Server_L[FastAPI Process]
    end
    style API_Lite fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    subgraph Core_Lite ["Core Engine"]
        Orch_L[Orchestrator]
        Asset_L[Asset Manager]
    end
    style Core_Lite fill:transparent,stroke:var(--primary-color),stroke-width:2px

    subgraph Runtime_Lite ["Runtime"]
        WCR_L[WorkcellRuntime]
        PLR_L[PyLabRobot]
    end
    style Runtime_Lite fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    subgraph Data_Lite ["Data Layer"]
        SQLite[(SQLite)]
    end
    style Data_Lite fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    UI_L --> Server_L
    Store_L --> Server_L
    Server_L --> Orch_L
    Server_L --> Asset_L
    Orch_L --> WCR_L
    Asset_L --> WCR_L
    WCR_L --> PLR_L
    Server_L --> SQLite
    WCR_L --> SQLite
\`\`\`
`;browserDiagram=`
\`\`\`mermaid
graph TD
    subgraph Frontend_Browser ["Frontend (Browser Only)"]
        UI_B[Web UI]
        Store_B[NgRx Store]
        IO_Shim[IO Shim Service]
    end
    style Frontend_Browser fill:transparent,stroke:var(--primary-color),stroke-width:2px

    subgraph WebWorker ["Web Worker (Pyodide)"]
        PyBridge[Python Bridge]
        Core_B[Core Engine]
        PLR_B[PyLabRobot]
    end
    style WebWorker fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    subgraph BrowserData ["Browser Storage"]
        IDB[(IndexedDB)]
        LocalStorage[(LocalStorage)]
    end
    style BrowserData fill:transparent,stroke:var(--primary-color),stroke-width:2px

    subgraph Hardware ["Physical Hardware"]
        USB[WebSerial / USB]
        Bluetooth[WebBluetooth]
    end
    style Hardware fill:transparent,stroke:var(--tertiary-color),stroke-width:2px

    UI_B --> Store_B
    Store_B --> PyBridge
    PyBridge --> Core_B
    Core_B --> PLR_B
    PLR_B --> IO_Shim
    IO_Shim --> USB
    Store_B --> IDB
\`\`\`
`;static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ee({type:e,selectors:[["app-system-topology"]],decls:14,vars:1,consts:[[1,"system-topology","surface-elevated"],[1,"header"],[1,"text-secondary"],["animationDuration","0ms",1,"topology-tabs"],["label","Production"],["matTabContent",""],["label","Lite Mode"],["label","Browser (Pyodide)"],[3,"diagramHtml"],[1,"diagram-container"],["mat-icon-button","","title","Fullscreen",1,"expand-btn",3,"click"],["mermaid","",3,"data","mermaidOptions"],[1,"legend"],[1,"item"],[1,"dot","angular"],[1,"dot","api"],[1,"dot","core"],[3,"closed","diagramHtml"]],template:function(r,a){r&1&&(l(0,"div",0)(1,"div",1)(2,"h3"),_(3,"System Architecture"),g(),l(4,"p",2),_(5,"Explore the architecture across different deployment modes."),g()(),l(6,"mat-tab-group",3)(7,"mat-tab",4),xe(8,ga,15,2,"ng-template",5),g(),l(9,"mat-tab",6),xe(10,ua,5,2,"ng-template",5),g(),l(11,"mat-tab",7),xe(12,fa,5,2,"ng-template",5),g()(),q(13,va,1,1,"app-diagram-overlay",8),g()),r&2&&(w(13),j(a.expandedDiagram()?13:-1))},dependencies:[yt,vt,ht,xt,re,Ce,te,we,_e,be,ne],styles:[".system-topology[_ngcontent-%COMP%]{border-radius:16px;margin:32px 0;overflow:hidden;border:1px solid var(--theme-border)}.header[_ngcontent-%COMP%]{padding:24px 24px 0}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--theme-text-primary)}.diagram-container[_ngcontent-%COMP%]{padding:24px;min-height:400px;display:flex;flex-direction:column;align-items:center;position:relative}.expand-btn[_ngcontent-%COMP%]{position:absolute;top:32px;right:32px;z-index:10;background:var(--mat-sys-surface-container-highest);color:var(--theme-text-primary);box-shadow:0 4px 12px #0003}.expand-btn[_ngcontent-%COMP%]:hover{background:var(--theme-surface-elevated);transform:scale(1.1)}.legend[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px;font-size:.9rem;color:var(--theme-text-secondary)}.item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;border:2px solid}.dot.angular[_ngcontent-%COMP%]{border-color:var(--primary-color);background:#ed7a9b33}.dot.api[_ngcontent-%COMP%]{border-color:var(--tertiary-color);background:#73a9c233}.dot.core[_ngcontent-%COMP%]{border-color:var(--primary-color);background:#ed7a9b33}[_nghost-%COMP%]     .mermaid{background:none!important;border:none!important;padding:0!important;margin:0!important}"]})};var Oe="comm",Te="rule",Le="decl";var Xt="@import";var Qt="@namespace",Kt="@keyframes";var Jt="@layer";var Qe=Math.abs,ge=String.fromCharCode;function Re(e){return e.trim()}function ue(e,t,r){return e.replace(t,r)}function Zt(e,t,r){return e.indexOf(t,r)}function Y(e,t){return e.charCodeAt(t)|0}function X(e,t,r){return e.slice(t,r)}function S(e){return e.length}function er(e){return e.length}function ie(e,t){return t.push(e),e}var Ie=1,se=1,tr=0,P=0,x=0,ce="";function Ae(e,t,r,a,o,i,s,d){return{value:e,root:t,parent:r,type:a,props:o,children:i,line:Ie,column:se,length:s,return:"",siblings:d}}function rr(){return x}function ar(){return x=P>0?Y(ce,--P):0,se--,x===10&&(se=1,Ie--),x}function E(){return x=P<tr?Y(ce,P++):0,se++,x===10&&(se=1,Ie++),x}function W(){return Y(ce,P)}function fe(){return P}function Be(e,t){return X(ce,e,t)}function de(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function or(e){return Ie=se=1,tr=S(ce=e),P=0,[]}function nr(e){return ce="",e}function Fe(e){return Re(Be(P-1,Ke(e===91?e+2:e===40?e+1:e)))}function ir(e){for(;(x=W())&&x<33;)E();return de(e)>2||de(x)>3?"":" "}function sr(e,t){for(;--t&&E()&&!(x<48||x>102||x>57&&x<65||x>70&&x<97););return Be(e,fe()+(t<6&&W()==32&&E()==32))}function Ke(e){for(;E();)switch(x){case e:return P;case 34:case 39:e!==34&&e!==39&&Ke(x);break;case 40:e===41&&Ke(e);break;case 92:E();break}return P}function dr(e,t){for(;E()&&e+x!==57;)if(e+x===84&&W()===47)break;return"/*"+Be(t,P-1)+"*"+ge(e===47?e:E())}function cr(e){for(;!de(W());)E();return Be(e,P)}function pr(e){return nr(Ne("",null,null,null,[""],e=or(e),0,[0],e))}function Ne(e,t,r,a,o,i,s,d,c){for(var v=0,y=0,m=s,M=0,B=0,O=0,u=1,V=1,T=1,h=0,L="",$=o,F=i,k=a,p=L;V;)switch(O=h,h=E()){case 40:if(O!=108&&Y(p,m-1)==58){Zt(p+=ue(Fe(h),"&","&\f"),"&\f",Qe(v?d[v-1]:0))!=-1&&(T=-1);break}case 34:case 39:case 91:p+=Fe(h);break;case 9:case 10:case 13:case 32:p+=ir(O);break;case 92:p+=sr(fe()-1,7);continue;case 47:switch(W()){case 42:case 47:ie(ha(dr(E(),fe()),t,r,c),c),(de(O||1)==5||de(W()||1)==5)&&S(p)&&X(p,-1,void 0)!==" "&&(p+=" ");break;default:p+="/"}break;case 123*u:d[v++]=S(p)*T;case 125*u:case 59:case 0:switch(h){case 0:case 125:V=0;case 59+y:T==-1&&(p=ue(p,/\f/g,"")),B>0&&(S(p)-m||u===0&&O===47)&&ie(B>32?mr(p+";",a,r,m-1,c):mr(ue(p," ","")+";",a,r,m-2,c),c);break;case 59:p+=";";default:if(ie(k=lr(p,t,r,v,y,o,d,L,$=[],F=[],m,i),i),h===123)if(y===0)Ne(p,t,k,k,$,i,m,d,F);else{switch(M){case 99:if(Y(p,3)===110)break;case 108:if(Y(p,2)===97)break;default:y=0;case 100:case 109:case 115:}y?Ne(e,k,k,a&&ie(lr(e,k,k,0,0,o,d,L,o,$=[],m,F),F),o,F,m,d,a?$:F):Ne(p,k,k,k,[""],F,0,d,F)}}v=y=B=0,u=T=1,L=p="",m=s;break;case 58:m=1+S(p),B=O;default:if(u<1){if(h==123)--u;else if(h==125&&u++==0&&ar()==125)continue}switch(p+=ge(h),h*u){case 38:T=y>0?1:(p+="\f",-1);break;case 44:d[v++]=(S(p)-1)*T,T=1;break;case 64:W()===45&&(p+=Fe(E())),M=W(),y=m=S(L=p+=cr(fe())),h++;break;case 45:O===45&&S(p)==2&&(u=0)}}return i}function lr(e,t,r,a,o,i,s,d,c,v,y,m){for(var M=o-1,B=o===0?i:[""],O=er(B),u=0,V=0,T=0;u<a;++u)for(var h=0,L=X(e,M+1,M=Qe(V=s[u])),$=e;h<O;++h)($=Re(V>0?B[h]+" "+L:ue(L,/&\f/g,B[h])))&&(c[T++]=$);return Ae(e,t,r,o===0?Te:d,c,v,y,m)}function ha(e,t,r,a){return Ae(e,t,r,Oe,ge(rr()),X(e,2,-2),0,a)}function mr(e,t,r,a,o){return Ae(e,t,r,Le,X(e,0,a),X(e,a+1,-1),a,o)}function He(e,t){for(var r="",a=0;a<e.length;a++)r+=t(e[a],a,e,t)||"";return r}function gr(e,t,r,a){switch(e.type){case Jt:if(e.children.length)break;case Xt:case Qt:case Le:return e.return=e.return||e.value;case Oe:return"";case Kt:return e.return=e.value+"{"+He(e.children,a)+"}";case Te:if(!S(e.value=e.props.join(",")))return""}return S(r=He(e.children,a))?e.return=e.value+"{"+r+"}":""}var xr="c4",xa=n(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),ya=n(async()=>{let{diagram:e}=await import("./chunk-W3EFP44W.js");return{id:xr,diagram:e}},"loader"),ba={id:xr,detector:xa,loader:ya},_a=ba,yr="flowchart",wa=n((e,t)=>t?.flowchart?.defaultRenderer==="dagre-wrapper"||t?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),Ca=n(async()=>{let{diagram:e}=await import("./chunk-RDMCZ7MY.js");return{id:yr,diagram:e}},"loader"),Ma={id:yr,detector:wa,loader:Ca},Sa=Ma,br="flowchart-v2",ka=n((e,t)=>t?.flowchart?.defaultRenderer==="dagre-d3"?!1:(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),Da=n(async()=>{let{diagram:e}=await import("./chunk-RDMCZ7MY.js");return{id:br,diagram:e}},"loader"),Pa={id:br,detector:ka,loader:Da},Ea=Pa,_r="er",Oa=n(e=>/^\s*erDiagram/.test(e),"detector"),Ta=n(async()=>{let{diagram:e}=await import("./chunk-5OEPZSVE.js");return{id:_r,diagram:e}},"loader"),La={id:_r,detector:Oa,loader:Ta},Ra=La,wr="gitGraph",Ia=n(e=>/^\s*gitGraph/.test(e),"detector"),Aa=n(async()=>{let{diagram:e}=await import("./chunk-H7X27AP7.js");return{id:wr,diagram:e}},"loader"),Ba={id:wr,detector:Ia,loader:Aa},Fa=Ba,Cr="gantt",Na=n(e=>/^\s*gantt/.test(e),"detector"),Ha=n(async()=>{let{diagram:e}=await import("./chunk-U54NA2GA.js");return{id:Cr,diagram:e}},"loader"),za={id:Cr,detector:Na,loader:Ha},Va=za,Mr="info",$a=n(e=>/^\s*info/.test(e),"detector"),Ua=n(async()=>{let{diagram:e}=await import("./chunk-7QZKSF5C.js");return{id:Mr,diagram:e}},"loader"),Wa={id:Mr,detector:$a,loader:Ua},Sr="pie",Ga=n(e=>/^\s*pie/.test(e),"detector"),qa=n(async()=>{let{diagram:e}=await import("./chunk-Z6VFSAGZ.js");return{id:Sr,diagram:e}},"loader"),ja={id:Sr,detector:Ga,loader:qa},kr="quadrantChart",Ya=n(e=>/^\s*quadrantChart/.test(e),"detector"),Xa=n(async()=>{let{diagram:e}=await import("./chunk-YUKCN3SM.js");return{id:kr,diagram:e}},"loader"),Qa={id:kr,detector:Ya,loader:Xa},Ka=Qa,Dr="xychart",Ja=n(e=>/^\s*xychart(-beta)?/.test(e),"detector"),Za=n(async()=>{let{diagram:e}=await import("./chunk-AEE44BF7.js");return{id:Dr,diagram:e}},"loader"),eo={id:Dr,detector:Ja,loader:Za},to=eo,Pr="requirement",ro=n(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),ao=n(async()=>{let{diagram:e}=await import("./chunk-5L32WROE.js");return{id:Pr,diagram:e}},"loader"),oo={id:Pr,detector:ro,loader:ao},no=oo,Er="sequence",io=n(e=>/^\s*sequenceDiagram/.test(e),"detector"),so=n(async()=>{let{diagram:e}=await import("./chunk-B4Q75R4N.js");return{id:Er,diagram:e}},"loader"),co={id:Er,detector:io,loader:so},lo=co,Or="class",mo=n((e,t)=>t?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),po=n(async()=>{let{diagram:e}=await import("./chunk-QDSHCHIJ.js");return{id:Or,diagram:e}},"loader"),go={id:Or,detector:mo,loader:po},uo=go,Tr="classDiagram",fo=n((e,t)=>/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),vo=n(async()=>{let{diagram:e}=await import("./chunk-36S52DBG.js");return{id:Tr,diagram:e}},"loader"),ho={id:Tr,detector:fo,loader:vo},xo=ho,Lr="state",yo=n((e,t)=>t?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),bo=n(async()=>{let{diagram:e}=await import("./chunk-7HRD6C55.js");return{id:Lr,diagram:e}},"loader"),_o={id:Lr,detector:yo,loader:bo},wo=_o,Rr="stateDiagram",Co=n((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),Mo=n(async()=>{let{diagram:e}=await import("./chunk-YBWHQWZ4.js");return{id:Rr,diagram:e}},"loader"),So={id:Rr,detector:Co,loader:Mo},ko=So,Ir="journey",Do=n(e=>/^\s*journey/.test(e),"detector"),Po=n(async()=>{let{diagram:e}=await import("./chunk-YYGXQTAL.js");return{id:Ir,diagram:e}},"loader"),Eo={id:Ir,detector:Do,loader:Po},Oo=Eo,To=n((e,t,r)=>{f.debug(`rendering svg for syntax error
`);let a=Ft(t),o=a.append("g");a.attr("viewBox","0 0 2412 512"),At(a,100,512,!0),o.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),o.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),o.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),o.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),o.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),o.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),o.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),o.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),Ar={draw:To},Lo=Ar,Ro={db:{},renderer:Ar,parser:{parse:n(()=>{},"parse")}},Io=Ro,Br="flowchart-elk",Ao=n((e,t={})=>/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk"?(t.layout="elk",!0):!1,"detector"),Bo=n(async()=>{let{diagram:e}=await import("./chunk-RDMCZ7MY.js");return{id:Br,diagram:e}},"loader"),Fo={id:Br,detector:Ao,loader:Bo},No=Fo,Fr="timeline",Ho=n(e=>/^\s*timeline/.test(e),"detector"),zo=n(async()=>{let{diagram:e}=await import("./chunk-HPZJYKBJ.js");return{id:Fr,diagram:e}},"loader"),Vo={id:Fr,detector:Ho,loader:zo},$o=Vo,Nr="mindmap",Uo=n(e=>/^\s*mindmap/.test(e),"detector"),Wo=n(async()=>{let{diagram:e}=await import("./chunk-6EPFIA6L.js");return{id:Nr,diagram:e}},"loader"),Go={id:Nr,detector:Uo,loader:Wo},qo=Go,Hr="kanban",jo=n(e=>/^\s*kanban/.test(e),"detector"),Yo=n(async()=>{let{diagram:e}=await import("./chunk-SSQVCLCD.js");return{id:Hr,diagram:e}},"loader"),Xo={id:Hr,detector:jo,loader:Yo},Qo=Xo,zr="sankey",Ko=n(e=>/^\s*sankey(-beta)?/.test(e),"detector"),Jo=n(async()=>{let{diagram:e}=await import("./chunk-A6J6A4GW.js");return{id:zr,diagram:e}},"loader"),Zo={id:zr,detector:Ko,loader:Jo},en=Zo,Vr="packet",tn=n(e=>/^\s*packet(-beta)?/.test(e),"detector"),rn=n(async()=>{let{diagram:e}=await import("./chunk-ZUXCWLOT.js");return{id:Vr,diagram:e}},"loader"),an={id:Vr,detector:tn,loader:rn},$r="radar",on=n(e=>/^\s*radar-beta/.test(e),"detector"),nn=n(async()=>{let{diagram:e}=await import("./chunk-O45BOKRT.js");return{id:$r,diagram:e}},"loader"),sn={id:$r,detector:on,loader:nn},Ur="block",dn=n(e=>/^\s*block(-beta)?/.test(e),"detector"),cn=n(async()=>{let{diagram:e}=await import("./chunk-MNRYXCJZ.js");return{id:Ur,diagram:e}},"loader"),ln={id:Ur,detector:dn,loader:cn},mn=ln,Wr="architecture",pn=n(e=>/^\s*architecture/.test(e),"detector"),gn=n(async()=>{let{diagram:e}=await import("./chunk-G5PSOSX2.js");return{id:Wr,diagram:e}},"loader"),un={id:Wr,detector:pn,loader:gn},fn=un,Gr="treemap",vn=n(e=>/^\s*treemap/.test(e),"detector"),hn=n(async()=>{let{diagram:e}=await import("./chunk-B4SRL7K6.js");return{id:Gr,diagram:e}},"loader"),xn={id:Gr,detector:vn,loader:hn},ur=!1,Ve=n(()=>{ur||(ur=!0,pe("error",Io,e=>e.toLowerCase().trim()==="error"),pe("---",{db:{clear:n(()=>{},"clear")},styles:{},renderer:{draw:n(()=>{},"draw")},parser:{parse:n(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:n(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),ke(No,qo,fn),ke(_a,Qo,xo,uo,Ra,Va,Wa,ja,no,lo,Ea,Sa,$o,Fa,ko,wo,Oo,Ka,en,an,to,mn,sn,xn))},"addDiagrams"),yn=n(async()=>{f.debug("Loading registered diagrams");let t=(await Promise.allSettled(Object.entries(Se).map(async([r,{detector:a,loader:o}])=>{if(o)try{Pe(r)}catch{try{let{diagram:i,id:s}=await o();pe(s,i,a)}catch(i){throw f.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete Se[r],i}}}))).filter(r=>r.status==="rejected");if(t.length>0){f.error(`Failed to load ${t.length} external diagrams`);for(let r of t)f.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),bn="graphics-document document";function qr(e,t){e.attr("role",bn),t!==""&&e.attr("aria-roledescription",t)}n(qr,"setA11yDiagramInfo");function jr(e,t,r,a){if(e.insert!==void 0){if(r){let o=`chart-desc-${a}`;e.attr("aria-describedby",o),e.insert("desc",":first-child").attr("id",o).text(r)}if(t){let o=`chart-title-${a}`;e.attr("aria-labelledby",o),e.insert("title",":first-child").attr("id",o).text(t)}}}n(jr,"addSVGa11yTitleDescription");var Ze=class Yr{constructor(t,r,a,o,i){this.type=t,this.text=r,this.db=a,this.parser=o,this.renderer=i}static{n(this,"Diagram")}static async fromText(t,r={}){let a=ae(),o=Ge(t,a);t=$t(t)+`
`;try{Pe(o)}catch{let v=Dt(o);if(!v)throw new kt(`Diagram ${o} not found.`);let{id:y,diagram:m}=await v();pe(y,m)}let{db:i,parser:s,renderer:d,init:c}=Pe(o);return s.parser&&(s.parser.yy=i),i.clear?.(),c?.(a),r.title&&i.setDiagramTitle?.(r.title),await s.parse(t),new Yr(o,t,i,s,d)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},fr=[],_n=n(()=>{fr.forEach(e=>{e()}),fr=[]},"attachFunctions"),wn=n(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Xr(e){let t=e.match(St);if(!t)return{text:e,metadata:{}};let r=Ht(t[1],{schema:Nt})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};let a={};return r.displayMode&&(a.displayMode=r.displayMode.toString()),r.title&&(a.title=r.title.toString()),r.config&&(a.config=r.config),{text:e.slice(t[0].length),metadata:a}}n(Xr,"extractFrontMatter");var Cn=n(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,a)=>"<"+r+a.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),Mn=n(e=>{let{text:t,metadata:r}=Xr(e),{displayMode:a,title:o,config:i={}}=r;return a&&(i.gantt||(i.gantt={}),i.gantt.displayMode=a),{title:o,config:i,text:t}},"processFrontmatter"),Sn=n(e=>{let t=oe.detectInit(e)??{},r=oe.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:a})=>a==="wrap"):r?.type==="wrap"&&(t.wrap=!0),{text:zt(e),directive:t}},"processDirectives");function tt(e){let t=Cn(e),r=Mn(t),a=Sn(r.text),o=Vt(r.config,a.directive);return e=wn(a.text),{code:e,title:r.title,config:o}}n(tt,"preprocessDiagram");function Qr(e){let t=new TextEncoder().encode(e),r=Array.from(t,a=>String.fromCodePoint(a)).join("");return btoa(r)}n(Qr,"toBase64");var kn=5e4,Dn="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",Pn="sandbox",En="loose",On="http://www.w3.org/2000/svg",Tn="http://www.w3.org/1999/xlink",Ln="http://www.w3.org/1999/xhtml",Rn="100%",In="100%",An="border:0;margin:0;",Bn="margin:0",Fn="allow-top-navigation-by-user-activation allow-popups",Nn='The "iframe" tag is not supported by your browser.',Hn=["foreignobject"],zn=["dominant-baseline"];function rt(e){let t=tt(e);return me(),Rt(t.config??{}),t}n(rt,"processAndSetConfigs");async function Kr(e,t){Ve();try{let{code:r,config:a}=rt(e);return{diagramType:(await Zr(r)).type,config:a}}catch(r){if(t?.suppressErrors)return!1;throw r}}n(Kr,"parse");var vr=n((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),Vn=n((e,t=new Map)=>{let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){let s=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(d=>{Xe(d.styles)||s.forEach(c=>{r+=vr(d.id,c,d.styles)}),Xe(d.textStyles)||(r+=vr(d.id,"tspan",(d?.textStyles||[]).map(c=>c.replace("color","fill"))))})}return r},"createCssStyles"),$n=n((e,t,r,a)=>{let o=Vn(e,r),i=Bt(t,o,e.themeVariables);return He(pr(`${a}{${i}}`),gr)},"createUserStyles"),Un=n((e="",t,r)=>{let a=e;return!r&&!t&&(a=a.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),a=Ut(a),a=a.replace(/<br>/g,"<br/>"),a},"cleanUpSvgCode"),Wn=n((e="",t)=>{let r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":In,a=Qr(`<body style="${Bn}">${e}</body>`);return`<iframe style="width:${Rn};height:${r};${An}" src="data:text/html;charset=UTF-8;base64,${a}" sandbox="${Fn}">
  ${Nn}
</iframe>`},"putIntoIFrame"),hr=n((e,t,r,a,o)=>{let i=e.append("div");i.attr("id",r),a&&i.attr("style",a);let s=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",On);return o&&s.attr("xmlns:xlink",o),s.append("g"),e},"appendDivSvgG");function et(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}n(et,"sandboxedIframe");var Gn=n((e,t,r,a)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(a)?.remove()},"removeExistingElements"),qn=n(async function(e,t,r){Ve();let a=rt(t);t=a.code;let o=ae();f.debug(o),t.length>(o?.maxTextSize??kn)&&(t=Dn);let i="#"+e,s="i"+e,d="#"+s,c="d"+e,v="#"+c,y=n(()=>{let $e=U(M?d:v).node();$e&&"remove"in $e&&$e.remove()},"removeTempElements"),m=U("body"),M=o.securityLevel===Pn,B=o.securityLevel===En,O=o.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),M){let R=et(U(r),s);m=U(R.nodes()[0].contentDocument.body),m.node().style.margin=0}else m=U(r);hr(m,e,c,`font-family: ${O}`,Tn)}else{if(Gn(document,e,c,s),M){let R=et(U("body"),s);m=U(R.nodes()[0].contentDocument.body),m.node().style.margin=0}else m=U("body");hr(m,e,c)}let u,V;try{u=await Ze.fromText(t,{title:a.title})}catch(R){if(o.suppressErrorRendering)throw y(),R;u=await Ze.fromText("error"),V=R}let T=m.select(v).node(),h=u.type,L=T.firstChild,$=L.firstChild,F=u.renderer.getClasses?.(t,u),k=$n(o,h,F,i),p=document.createElement("style");p.innerHTML=k,L.insertBefore(p,$);try{await u.renderer.draw(t,e,Ue.version,u)}catch(R){throw o.suppressErrorRendering?y():Lo.draw(t,e,Ue.version),R}let sa=m.select(`${v} svg`),da=u.db.getAccTitle?.(),ca=u.db.getAccDescription?.();ea(h,sa,da,ca),m.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Ln);let Q=m.select(v).node().innerHTML;if(f.debug("config.arrowMarkerAbsolute",o.arrowMarkerAbsolute),Q=Un(Q,M,It(o.arrowMarkerAbsolute)),M){let R=m.select(v+" svg").node();Q=Wn(Q,R)}else B||(Q=Mt.sanitize(Q,{ADD_TAGS:Hn,ADD_ATTR:zn,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(_n(),V)throw V;return y(),{diagramType:h,svg:Q,bindFunctions:u.db.bindFunctions}},"render");function Jr(e={}){let t=Pt({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),Ot(t),t?.theme&&t.theme in De?t.themeVariables=De[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=De.default.getThemeVariables(t.themeVariables));let r=typeof t=="object"?Et(t):je();We(r.logLevel),Ve()}n(Jr,"initialize");var Zr=n((e,t={})=>{let{code:r}=tt(e);return Ze.fromText(r,t)},"getDiagramFromText");function ea(e,t,r,a){qr(t,e),jr(t,r,a,t.attr("id"))}n(ea,"addA11yInfo");var Z=Object.freeze({render:qn,parse:Kr,getDiagramFromText:Zr,initialize:Jr,getConfig:ae,setConfig:Lt,getSiteConfig:je,updateSiteConfig:Tt,reset:n(()=>{me()},"reset"),globalReset:n(()=>{me(qe)},"globalReset"),defaultConfig:qe});We(ae().logLevel);me(ae());var jn=n((e,t,r)=>{f.warn(e),Ye(e)?(r&&r(e.str,e.hash),t.push(le(K({},e),{message:e.str,error:e}))):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),ta=n(async function(e={querySelector:".mermaid"}){try{await Yn(e)}catch(t){if(Ye(t)&&f.error(t.str),G.parseError&&G.parseError(t),!e.suppressErrors)throw f.error("Use the suppressErrors option to suppress these errors"),t}},"run"),Yn=n(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){let a=Z.getConfig();f.debug(`${e?"":"No "}Callback function found`);let o;if(r)o=r;else if(t)o=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");f.debug(`Found ${o.length} diagrams`),a?.startOnLoad!==void 0&&(f.debug("Start On Load: "+a?.startOnLoad),Z.updateSiteConfig({startOnLoad:a?.startOnLoad}));let i=new oe.InitIDGenerator(a.deterministicIds,a.deterministicIDSeed),s,d=[];for(let c of Array.from(o)){if(f.info("Rendering diagram: "+c.id),c.getAttribute("data-processed"))continue;c.setAttribute("data-processed","true");let v=`mermaid-${i.next()}`;s=c.innerHTML,s=Wt(oe.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");let y=oe.detectInit(s);y&&f.debug("Detected early reinit: ",y);try{let{svg:m,bindFunctions:M}=await na(v,s,c);c.innerHTML=m,e&&await e(v),M&&M(c)}catch(m){jn(m,d,G.parseError)}}if(d.length>0)throw d[0]},"runThrowsErrors"),ra=n(function(e){Z.initialize(e)},"initialize"),Xn=n(async function(e,t,r){f.warn("mermaid.init is deprecated. Please use run instead."),e&&ra(e);let a={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?a.querySelector=t:t&&(t instanceof HTMLElement?a.nodes=[t]:a.nodes=t),await ta(a)},"init"),Qn=n(async(e,{lazyLoad:t=!0}={})=>{Ve(),ke(...e),t===!1&&await yn()},"registerExternalDiagrams"),aa=n(function(){if(G.startOnLoad){let{startOnLoad:e}=Z.getConfig();e&&G.run().catch(t=>f.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",aa,!1);var Kn=n(function(e){G.parseError=e},"setParseErrorHandler"),ze=[],Je=!1,oa=n(async()=>{if(!Je){for(Je=!0;ze.length>0;){let e=ze.shift();if(e)try{await e()}catch(t){f.error("Error executing queue",t)}}Je=!1}},"executeQueue"),Jn=n(async(e,t)=>new Promise((r,a)=>{let o=n(()=>new Promise((i,s)=>{Z.parse(e,t).then(d=>{i(d),r(d)},d=>{f.error("Error parsing",d),G.parseError?.(d),s(d),a(d)})}),"performCall");ze.push(o),oa().catch(a)}),"parse"),na=n((e,t,r)=>new Promise((a,o)=>{let i=n(()=>new Promise((s,d)=>{Z.render(e,t,r).then(c=>{s(c),a(c)},c=>{f.error("Error parsing",c),G.parseError?.(c),d(c),o(c)})}),"performCall");ze.push(i),oa().catch(o)}),"render"),Zn=n(()=>Object.keys(Se).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),G={startOnLoad:!0,mermaidAPI:Z,parse:Jn,render:na,init:Xn,run:ta,registerExternalDiagrams:Qn,registerLayoutLoaders:qt,initialize:ra,parseError:void 0,contentLoaded:aa,setParseErrorHandler:Kn,detectType:Ge,registerIconPacks:Gt,getRegisteredDiagramsMetadata:Zn},at=G;function ei(e,t){if(e&1){let r=z();l(0,"div",1)(1,"mat-button-toggle-group",4),C("change",function(o){N(r);let i=b();return H(i.viewMode.set(o.value))}),l(2,"mat-button-toggle",5),_(3,"Production Mode"),g(),l(4,"mat-button-toggle",6),_(5,"Browser Mode"),g()()()}if(e&2){let r=b();w(),A("value",r.viewMode())}}function ti(e,t){e&1&&(l(0,"div",2),D(1,"div",7),l(2,"p"),_(3,"Loading documentation..."),g()())}function ri(e,t){if(e&1&&(l(0,"div",3)(1,"h2"),_(2,"Page Not Found"),g(),l(3,"p"),_(4),g()()),e&2){let r=b();w(4),lt(r.error())}}function ai(e,t){if(e&1){let r=z();l(0,"button",13),C("click",function(){N(r);let o=b(2);return H(o.viewSource())}),l(1,"i",14),_(2,"code"),g(),l(3,"span"),_(4,"View Source"),g()()}if(e&2){let r=b(2);ct("title",r.sourcePath())}}function oi(e,t){e&1&&D(0,"app-system-topology")}function ni(e,t){if(e&1){let r=z();l(0,"app-diagram-overlay",15),C("closed",function(){N(r);let o=b(2);return H(o.closeExpanded())}),g()}if(e&2){let r=b(2);A("diagramHtml",r.expandedDiagram())}}function ii(e,t){if(e&1){let r=z();l(0,"div",8),q(1,ai,5,1,"button",9),g(),l(2,"article",10),q(3,oi,1,0,"app-system-topology"),l(4,"markdown",11),C("ready",function(){N(r);let o=b();return H(o.onMarkdownReady())}),g()(),q(5,ni,1,1,"app-diagram-overlay",12)}if(e&2){let r=b();w(),j(r.sourcePath()?1:-1),w(2),j(r.showSystemTopology()?3:-1),w(),A("data",r.markdownContent()),w(),j(r.expandedDiagram()?5:-1)}}var ia=class e{route=J(ft);http=J(ut);store=J(Me);el=J(st);expandedDiagram=I(null);mermaidOptions=ye(()=>{let t=this.store.theme(),r=t==="dark";return t==="system"&&(r=window.matchMedia("(prefers-color-scheme: dark)").matches),{theme:"base",flowchart:{htmlLabels:!0,useMaxWidth:!1,nodeSpacing:60,rankSpacing:60,curve:"basis"},themeVariables:{fontFamily:'"Roboto Flex", sans-serif',fontSize:"18px",darkMode:r,background:"transparent",mainBkg:"transparent",primaryColor:"var(--mat-sys-primary-container)",primaryTextColor:"var(--mat-sys-on-primary-container)",primaryBorderColor:"var(--mat-sys-outline)",lineColor:"var(--mat-sys-outline)",secondaryColor:"var(--mat-sys-secondary-container)",tertiaryColor:"var(--mat-sys-tertiary-container)",nodeBkg:"var(--mat-sys-surface-container-high)",textColor:"var(--mat-sys-on-surface)",noteBkgColor:"var(--mat-sys-surface-container-low)",noteTextColor:"var(--mat-sys-on-surface)",noteBorderColor:"var(--mat-sys-outline)",actorBkg:"var(--mat-sys-surface-container-high)",actorBorder:"var(--mat-sys-outline)",actorTextColor:"var(--mat-sys-on-surface)",actorLineColor:"var(--mat-sys-outline)",signalColor:"var(--mat-sys-on-surface)",signalTextColor:"var(--mat-sys-on-surface)",labelBoxBkgColor:"var(--mat-sys-surface-container-high)",labelBoxBorderColor:"var(--mat-sys-outline)",labelTextColor:"var(--mat-sys-on-surface)",loopTextColor:"var(--mat-sys-on-surface)",sequenceNumberColor:"var(--mat-sys-on-primary-container)"}}});markdownContent=I("");sourcePath=I(null);loading=I(!0);error=I(null);viewMode=I("production");showModeSwitch=I(!1);showSystemTopology=I(!1);constructor(){it(()=>{let t=this.route.snapshot.params,r=this.route.snapshot.data,a=this.viewMode(),o=r.section||t.section,i=t.page||r.page||"index";this.loadMarkdown(o,i,a),this.showModeSwitch.set(o==="architecture"&&(i==="overview"||i==="backend")),this.showSystemTopology.set(!1)},{allowSignalWrites:!0}),this.route.params.subscribe(()=>{let t=this.route.snapshot.params,r=this.route.snapshot.data,a=r.section||t.section,o=t.page||r.page||"index";this.loadMarkdown(a,o,this.viewMode()),this.showModeSwitch.set(a==="architecture"&&(o==="overview"||o==="backend")),this.showSystemTopology.set(!1)})}loadMarkdown(t,r,a){this.loading.set(!0),this.error.set(null),this.sourcePath.set(null);let o=`assets/docs/${t}/${r}-${a}.md`,i=`assets/docs/${t}/${r}.md`;this.http.get(o,{responseType:"text",context:new gt().set(Ct,!0)}).pipe(ve(()=>this.http.get(i,{responseType:"text"}).pipe(ve(()=>this.http.get(`assets/docs/${r}.md`,{responseType:"text"}).pipe(ve(()=>ot(null))))))).subscribe({next:s=>{if(s){let d=s,c=s.match(/^Source:\s*(.+)$/m);c&&(this.sourcePath.set(c[1].trim()),d=d.replace(/^Source:\s*.+$/m,"").trim()),this.markdownContent.set(d),this.loading.set(!1)}else this.error.set(`Documentation page "${t}/${r}" not found.`),this.loading.set(!1)},error:()=>{this.error.set("Failed to load documentation."),this.loading.set(!1)}})}viewSource(){let t=this.sourcePath();t&&window.open(`https://github.com/maraxen/praxis/blob/main/${t}`,"_blank")}async onMarkdownReady(){let t=this.el.nativeElement.querySelector(".docs-article");if(!t)return;let r=t.querySelectorAll("code.language-mermaid");if(r.length>0){at.initialize(K({startOnLoad:!1},this.mermaidOptions()));let o=[];if(r.forEach(i=>{let s=i.parentElement;if(s&&s.tagName==="PRE"){let d=document.createElement("div");d.className="mermaid",d.textContent=i.textContent||"",s.parentNode?.replaceChild(d,s),o.push(d)}}),o.length>0)try{await at.run({nodes:o})}catch(i){console.error("Mermaid render error:",i)}}t.querySelectorAll(".mermaid").forEach(o=>{if(o.parentElement?.classList.contains("diagram-wrapper"))return;let i=document.createElement("div");i.className="diagram-wrapper",o.parentNode?.insertBefore(i,o),i.appendChild(o);let s=document.createElement("button");s.className="expand-btn",s.title="Fullscreen",s.innerHTML='<i class="material-icons">fullscreen</i>',s.onclick=d=>{d.stopPropagation(),this.expandedDiagram.set(o.innerHTML)},i.appendChild(s)})}closeExpanded(){this.expandedDiagram.set(null)}onEscape(){this.closeExpanded()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ee({type:e,selectors:[["app-docs-page"]],hostBindings:function(r,a){r&1&&C("keydown.escape",function(){return a.onEscape()},he)},decls:5,vars:2,consts:[[1,"docs-page"],[1,"mode-switch-container"],[1,"loading"],[1,"error"],["aria-label","Documentation Mode",3,"change","value"],["value","production"],["value","browser"],[1,"loading-spinner"],[1,"docs-header-actions"],[1,"source-btn"],[1,"docs-article"],[3,"ready","data"],[3,"diagramHtml"],[1,"source-btn",3,"click"],[1,"material-icons"],[3,"closed","diagramHtml"]],template:function(r,a){r&1&&(l(0,"div",0),q(1,ei,6,1,"div",1),q(2,ti,4,0,"div",2)(3,ri,5,1,"div",3)(4,ii,6,4),g()),r&2&&(w(),j(a.showModeSwitch()?1:-1),w(),j(a.loading()?2:a.error()?3:4))},dependencies:[_e,be,Ee,re,wt,bt,_t,te,ne],styles:[".docs-page[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:32px 48px;position:relative}.mode-switch-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:32px}.docs-header-actions[_ngcontent-%COMP%]{position:absolute;top:32px;right:48px;z-index:10}.source-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:8px;background:var(--mat-sys-surface-variant);border:1px solid var(--theme-border);color:var(--theme-text-secondary);font-size:.8rem;cursor:pointer;transition:all .2s}.source-btn[_ngcontent-%COMP%]:hover{background:var(--theme-surface-elevated);border-color:var(--primary-color);color:var(--theme-text-primary)}.source-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;color:var(--theme-text-secondary)}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--theme-border);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error[_ngcontent-%COMP%]{text-align:center;padding:48px;color:var(--theme-text-secondary)}.error[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--theme-text-primary);margin-bottom:8px}.docs-article[_ngcontent-%COMP%]{color:var(--theme-text-primary);line-height:1.7}[_nghost-%COMP%]     h1{font-size:2.5rem;font-weight:700;color:var(--theme-text-primary);margin:0 0 16px;padding-bottom:16px;border-bottom:1px solid var(--theme-border)}[_nghost-%COMP%]     h2{font-size:1.75rem;font-weight:600;color:var(--theme-text-primary);margin:48px 0 16px}[_nghost-%COMP%]     h3{font-size:1.25rem;font-weight:600;color:var(--theme-text-primary);margin:32px 0 12px}[_nghost-%COMP%]     h4{font-size:1rem;font-weight:600;color:var(--theme-text-primary);margin:24px 0 8px}[_nghost-%COMP%]     p{margin:0 0 16px;color:var(--theme-text-secondary)}[_nghost-%COMP%]     a{color:var(--primary-color);text-decoration:none;transition:opacity .2s}[_nghost-%COMP%]     a:hover{opacity:.8;text-decoration:underline}[_nghost-%COMP%]     code{font-family:JetBrains Mono,Fira Code,monospace;font-size:.9em;background:var(--mat-sys-surface-variant);padding:2px 6px;border-radius:4px;color:var(--primary-color)}[_nghost-%COMP%]     kbd{display:inline-block;padding:2px 6px;font-family:JetBrains Mono,Fira Code,monospace;font-size:.85em;line-height:1.2;color:var(--theme-text-primary);vertical-align:middle;background-color:var(--mat-sys-surface-container);border:1px solid var(--theme-border);border-radius:6px;box-shadow:0 2px 0 var(--theme-border);margin:0 2px}[_nghost-%COMP%]     pre{background:var(--mat-sys-surface-container);border:1px solid var(--theme-border);border-radius:12px;padding:20px;overflow-x:auto;margin:16px 0 24px}[_nghost-%COMP%]     pre code{background:none;padding:0;color:var(--theme-text-primary);font-size:.85rem;line-height:1.6}[_nghost-%COMP%]     ul, [_nghost-%COMP%]     ol{margin:0 0 16px;padding-left:24px}[_nghost-%COMP%]     li{margin-bottom:8px;color:var(--theme-text-secondary)}[_nghost-%COMP%]     table{width:100%;border-collapse:collapse;margin:16px 0 24px;font-size:.9rem}[_nghost-%COMP%]     th{text-align:left;padding:12px 16px;background:var(--mat-sys-surface-variant);border:1px solid var(--theme-border);color:var(--theme-text-primary);font-weight:600}[_nghost-%COMP%]     td{padding:12px 16px;border:1px solid var(--theme-border);color:var(--theme-text-secondary)}[_nghost-%COMP%]     tr:hover td{background:var(--mat-sys-surface-variant)}[_nghost-%COMP%]     blockquote{margin:16px 0;padding:16px 20px;background:var(--mat-sys-surface-variant);border-left:4px solid var(--primary-color);border-radius:0 8px 8px 0}[_nghost-%COMP%]     blockquote p{margin:0;color:var(--theme-text-secondary)}[_nghost-%COMP%]     hr{border:none;height:1px;background:var(--theme-border);margin:32px 0}[_nghost-%COMP%]     .admonition{padding:16px 20px;margin:16px 0;border-radius:8px;border-left:4px solid}[_nghost-%COMP%]     .admonition.note{background:#3b82f61a;border-color:#3b82f6}[_nghost-%COMP%]     .admonition.warning{background:#f59e0b1a;border-color:#f59e0b}[_nghost-%COMP%]     .admonition.danger{background:#ef44441a;border-color:#ef4444}[_nghost-%COMP%]     .admonition-title{font-weight:600;margin-bottom:8px;color:var(--theme-text-primary)}[_nghost-%COMP%]     .mermaid{background:linear-gradient(145deg,var(--mat-sys-surface-variant) 0%,transparent 100%);border:1px solid var(--theme-border);border-radius:16px;padding:32px;margin:24px 0;display:flex;justify-content:center;overflow-x:auto;position:relative}[_nghost-%COMP%]     .diagram-wrapper{position:relative;margin:24px 0}[_nghost-%COMP%]     .diagram-wrapper .mermaid{margin:0}[_nghost-%COMP%]     .expand-btn{position:absolute;top:12px;right:12px;z-index:20;background:var(--mat-sys-surface-container-highest)!important;color:var(--theme-text-primary)!important;box-shadow:0 4px 12px #0003;opacity:.7;transition:all .2s ease!important;border:none;border-radius:8px;padding:8px;cursor:pointer;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .expand-btn:hover{opacity:1;transform:scale(1.05);background:var(--theme-surface-elevated)!important}[_nghost-%COMP%]     .expand-btn i{font-size:20px!important}@media(max-width:768px){.docs-page[_ngcontent-%COMP%]{padding:24px 20px}[_nghost-%COMP%]     h1{font-size:2rem}[_nghost-%COMP%]     h2{font-size:1.5rem}[_nghost-%COMP%]     pre{padding:16px;border-radius:8px}[_nghost-%COMP%]     table{display:block;overflow-x:auto}}"]})};export{ia as DocsPageComponent};
