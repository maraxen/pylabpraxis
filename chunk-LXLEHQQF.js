import{a as be}from"./chunk-EV5GBPL4.js";import{K as $,h as O,k as V,n as E,r as K}from"./chunk-3DDOVMEB.js";import{$ as ct,I as X,L as Y,M as J,N as Z,O as Q,P as k,Q as tt,R as et,S as rt,T as nt,U as it,V as ot,W as at,X as st,Y as lt,Z as ft,_ as ut,aa as dt,b as f,ba as mt,d as v,j as q}from"./chunk-JWWJNFEM.js";import{A as Mt,B as L,a as pt,c as ht,d as p,e as gt,g as vt,h as y,k as C,l as yt,m as xt,n as F,o as bt,p as A,q as I,r as N,s as R,u as x,v as wt,y as Ot,z as Pt}from"./chunk-SUN732H5.js";import{i as xe}from"./chunk-RNQFGQA5.js";var ae=xe(be(),1);var we=(function(){try{var t=vt(Object,"defineProperty");return t({},"",{}),t}catch{}})(),b=we;function Oe(t,e,r){e=="__proto__"&&b?b(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var w=Oe;function Pe(t,e,r){(r!==void 0&&!y(t[e],r)||r===void 0&&!(e in t))&&w(t,e,r)}var P=Pe;var Ct=typeof exports=="object"&&exports&&!exports.nodeType&&exports,St=Ct&&typeof module=="object"&&module&&!module.nodeType&&module,Me=St&&St.exports===Ct,Tt=Me?pt.Buffer:void 0,$t=Tt?Tt.allocUnsafe:void 0;function Se(t,e){if(e)return t.slice();var r=t.length,n=$t?$t(r):new t.constructor(r);return t.copy(n),n}var At=Se;function Te(t){var e=new t.constructor(t.byteLength);return new F(e).set(new F(t)),e}var It=Te;function $e(t,e){var r=e?It(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Lt=$e;function Ce(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Bt=Ce;var _t=Object.create,Ae=(function(){function t(){}return function(e){if(!p(e))return{};if(_t)return _t(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}})(),Wt=Ae;var Ie=bt(Object.getPrototypeOf,Object),B=Ie;function Le(t){return typeof t.constructor=="function"&&!A(t)?Wt(B(t)):{}}var Et=Le;function Be(t){return I(t)&&x(t)}var Ft=Be;var _e="[object Object]",We=Function.prototype,Ee=Object.prototype,Nt=We.toString,Fe=Ee.hasOwnProperty,Ne=Nt.call(Object);function Re(t){if(!I(t)||ht(t)!=_e)return!1;var e=B(t);if(e===null)return!0;var r=Fe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Nt.call(r)==Ne}var Rt=Re;function De(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var M=De;var He=Object.prototype,je=He.hasOwnProperty;function Ue(t,e,r){var n=t[e];(!(je.call(t,e)&&y(n,r))||r===void 0&&!(e in t))&&w(t,e,r)}var Dt=Ue;function ze(t,e,r,n){var i=!r;r||(r={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=n?n(r[s],t[s],s,r,t):void 0;l===void 0&&(l=t[s]),i?w(r,s,l):Dt(r,s,l)}return r}var Ht=ze;function Ge(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var jt=Ge;var Ve=Object.prototype,Ke=Ve.hasOwnProperty;function qe(t){if(!p(t))return jt(t);var e=A(t),r=[];for(var n in t)n=="constructor"&&(e||!Ke.call(t,n))||r.push(n);return r}var Ut=qe;function Xe(t){return x(t)?Mt(t,!0):Ut(t)}var _=Xe;function Ye(t){return Ht(t,_(t))}var zt=Ye;function Je(t,e,r,n,i,o,a){var s=M(t,r),l=M(e,r),c=a.get(l);if(c){P(t,r,c);return}var u=o?o(s,l,r+"",t,e,a):void 0,m=u===void 0;if(m){var h=R(l),d=!h&&wt(l),g=!h&&!d&&Ot(l);u=l,h||d||g?R(s)?u=s:Ft(s)?u=Bt(s):d?(m=!1,u=At(l,!0)):g?(m=!1,u=Lt(l,!0)):u=[]:Rt(l)||N(l)?(u=s,N(s)?u=zt(s):(!p(s)||gt(s))&&(u=Et(l))):m=!1}m&&(a.set(l,u),i(u,l,n,o,a),a.delete(l)),P(t,r,u)}var Gt=Je;function Vt(t,e,r,n,i){t!==e&&xt(e,function(o,a){if(i||(i=new yt),p(o))Gt(t,e,a,r,Vt,n,i);else{var s=n?n(M(t,a),o,a+"",t,e,i):void 0;s===void 0&&(s=o),P(t,a,s)}},_)}var Kt=Vt;function Ze(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var qt=Ze;var Xt=Math.max;function Qe(t,e,r){return e=Xt(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=Xt(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(a),qt(t,this,s)}}var Yt=Qe;function ke(t){return function(){return t}}var Jt=ke;var tr=b?function(t,e){return b(t,"toString",{configurable:!0,enumerable:!1,value:Jt(e),writable:!0})}:L,Zt=tr;var er=800,rr=16,nr=Date.now;function ir(t){var e=0,r=0;return function(){var n=nr(),i=rr-(n-r);if(r=n,i>0){if(++e>=er)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Qt=ir;var or=Qt(Zt),kt=or;function ar(t,e){return kt(Yt(t,e,L),t+"")}var te=ar;function sr(t,e,r){if(!p(r))return!1;var n=typeof e;return(n=="number"?x(r)&&Pt(e,r.length):n=="string"&&e in r)?y(r[e],t):!1}var ee=sr;function lr(t){return te(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&ee(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,o)}return e})}var re=lr;var fr=re(function(t,e,r){Kt(t,e,r)}),ne=fr;var ur="\u200B",cr={curveBasis:Z,curveBasisClosed:Q,curveBasisOpen:k,curveBumpX:Y,curveBumpY:J,curveBundle:tt,curveCardinalClosed:rt,curveCardinalOpen:nt,curveCardinal:et,curveCatmullRomClosed:ot,curveCatmullRomOpen:at,curveCatmullRom:it,curveLinear:X,curveLinearClosed:st,curveMonotoneX:lt,curveMonotoneY:ft,curveNatural:ut,curveStep:ct,curveStepAfter:mt,curveStepBefore:dt},dr=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,mr=f(function(t,e){let r=se(t,/(?:init\b)|(?:initialize\b)/),n={};if(Array.isArray(r)){let a=r.map(s=>s.args);K(a),n=E(n,[...a])}else n=r.args;if(!n)return;let i=V(t,e),o="config";return n[o]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),n[i]=n[o],delete n[o]),n},"detectInit"),se=f(function(t,e=null){try{let r=new RegExp(`[%]{2}(?![{]${dr.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(r,"").replace(/'/gm,'"'),v.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let n,i=[];for(;(n=O.exec(t))!==null;)if(n.index===O.lastIndex&&O.lastIndex++,n&&!e||e&&n[1]?.match(e)||e&&n[2]?.match(e)){let o=n[1]?n[1]:n[2],a=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;i.push({type:o,args:a})}return i.length===0?{type:t,args:null}:i.length===1?i[0]:i}catch(r){return v.error(`ERROR: ${r.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),Si=f(function(t){return t.replace(O,"")},"removeDirectives"),pr=f(function(t,e){for(let[r,n]of e.entries())if(n.match(t))return r;return-1},"isSubstringInArray");function le(t,e){if(!t)return e;let r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return cr[r]??e}f(le,"interpolateToCurve");function fe(t,e){let r=t.trim();if(r)return e.securityLevel!=="loose"?(0,ae.sanitizeUrl)(r):r}f(fe,"formatUrl");var hr=f((t,...e)=>{let r=t.split("."),n=r.length-1,i=r[n],o=window;for(let a=0;a<n;a++)if(o=o[r[a]],!o){v.error(`Function name: ${t} not found in window`);return}o[i](...e)},"runFunc");function D(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}f(D,"distance");function ue(t){let e,r=0;t.forEach(i=>{r+=D(i,e),e=i});let n=r/2;return H(t,n)}f(ue,"traverseEdge");function ce(t){return t.length===1?t[0]:ue(t)}f(ce,"calcLabelPosition");var ie=f((t,e=2)=>{let r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),H=f((t,e)=>{let r,n=e;for(let i of t){if(r){let o=D(i,r);if(o===0)return r;if(o<n)n-=o;else{let a=n/o;if(a<=0)return r;if(a>=1)return{x:i.x,y:i.y};if(a>0&&a<1)return{x:ie((1-a)*r.x+a*i.x,5),y:ie((1-a)*r.y+a*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),gr=f((t,e,r)=>{v.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());let i=H(e,25),o=t?10:5,a=Math.atan2(e[0].y-i.y,e[0].x-i.x),s={x:0,y:0};return s.x=Math.sin(a)*o+(e[0].x+i.x)/2,s.y=-Math.cos(a)*o+(e[0].y+i.y)/2,s},"calcCardinalityPosition");function de(t,e,r){let n=structuredClone(r);v.info("our points",n),e!=="start_left"&&e!=="start_right"&&n.reverse();let i=25+t,o=H(n,i),a=10+t*.5,s=Math.atan2(n[0].y-o.y,n[0].x-o.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(s+Math.PI)*a+(n[0].x+o.x)/2,l.y=-Math.cos(s+Math.PI)*a+(n[0].y+o.y)/2):e==="end_right"?(l.x=Math.sin(s-Math.PI)*a+(n[0].x+o.x)/2-5,l.y=-Math.cos(s-Math.PI)*a+(n[0].y+o.y)/2-5):e==="end_left"?(l.x=Math.sin(s)*a+(n[0].x+o.x)/2-5,l.y=-Math.cos(s)*a+(n[0].y+o.y)/2-5):(l.x=Math.sin(s)*a+(n[0].x+o.x)/2,l.y=-Math.cos(s)*a+(n[0].y+o.y)/2),l}f(de,"calcTerminalLabelPosition");function me(t){let e="",r="";for(let n of t)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":e=e+n+";");return{style:e,labelStyle:r}}f(me,"getStylesFromArray");var oe=0,vr=f(()=>(oe++,"id-"+Math.random().toString(36).substr(2,12)+"-"+oe),"generateId");function pe(t){let e="",r="0123456789abcdef",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}f(pe,"makeRandomHex");var yr=f(t=>pe(t.length),"random"),xr=f(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),br=f(function(t,e){let r=e.text.replace($.lineBreakRegex," "),[,n]=U(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",n),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);let o=i.append("tspan");return o.attr("x",e.x+e.textMargin*2),o.attr("fill",e.fill),o.text(r),i},"drawSimpleText"),wr=C((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),$.lineBreakRegex.test(t)))return t;let n=t.split(" ").filter(Boolean),i=[],o="";return n.forEach((a,s)=>{let l=S(`${a} `,r),c=S(o,r);if(l>e){let{hyphenatedStrings:h,remainingWord:d}=Or(a,e,"-",r);i.push(o,...h),o=d}else c+l>=e?(i.push(o),o=a):o=[o,a].filter(Boolean).join(" ");s+1===n.length&&i.push(o)}),i.filter(a=>a!=="").join(r.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Or=C((t,e,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);let i=[...t],o=[],a="";return i.forEach((s,l)=>{let c=`${a}${s}`;if(S(c,n)>=e){let m=l+1,h=i.length===m,d=`${c}${r}`;o.push(h?c:d),a=""}else a=c}),{hyphenatedStrings:o,remainingWord:a}},(t,e,r="-",n)=>`${t}${e}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function he(t,e){return j(t,e).height}f(he,"calculateTextHeight");function S(t,e){return j(t,e).width}f(S,"calculateTextWidth");var j=C((t,e)=>{let{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};let[,o]=U(r),a=["sans-serif",n],s=t.split($.lineBreakRegex),l=[],c=q("body");if(!c.remove)return{width:0,height:0,lineHeight:0};let u=c.append("svg");for(let h of a){let d=0,g={width:0,height:0,lineHeight:0};for(let ye of s){let z=xr();z.text=ye||ur;let G=br(u,z).style("font-size",o).style("font-weight",i).style("font-family",h),T=(G._groups||G)[0][0].getBBox();if(T.width===0&&T.height===0)throw new Error("svg element not in render tree");g.width=Math.round(Math.max(g.width,T.width)),d=Math.round(T.height),g.height+=d,g.lineHeight=Math.round(Math.max(g.lineHeight,d))}l.push(g)}u.remove();let m=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[m]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),Pr=class{constructor(t=!1,e){this.count=0,this.count=e?e.length:0,this.next=t?()=>this.count++:()=>Date.now()}static{f(this,"InitIDGenerator")}},W,Mr=f(function(t){return W=W||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),W.innerHTML=t,unescape(W.textContent)},"entityDecode");function Sr(t){return"str"in t}f(Sr,"isDetailedError");var Tr=f((t,e,r,n)=>{if(!n)return;let i=t.node()?.getBBox();i&&t.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",e)},"insertTitle"),U=f(t=>{if(typeof t=="number")return[t,t+"px"];let e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function ge(t,e){return ne({},t,e)}f(ge,"cleanAndMerge");var Ti={assignWithDepth:E,wrapLabel:wr,calculateTextHeight:he,calculateTextWidth:S,calculateTextDimensions:j,cleanAndMerge:ge,detectInit:mr,detectDirective:se,isSubstringInArray:pr,interpolateToCurve:le,calcLabelPosition:ce,calcCardinalityPosition:gr,calcTerminalLabelPosition:de,formatUrl:fe,getStylesFromArray:me,generateId:vr,random:yr,runFunc:hr,entityDecode:Mr,insertTitle:Tr,isLabelCoordinateInPath:ve,parseFontSize:U,InitIDGenerator:Pr},$i=f(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/#\w+;/g,function(r){let n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?"\uFB02\xB0\xB0"+n+"\xB6\xDF":"\uFB02\xB0"+n+"\xB6\xDF"}),e},"encodeEntities"),Ci=f(function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Ai=f((t,e,{counter:r=0,prefix:n,suffix:i},o)=>o||`${n?`${n}_`:""}${t}_${e}_${r}${i?`_${i}`:""}`,"getEdgeId");function $r(t){return t??null}f($r,"handleUndefinedAttr");function ve(t,e){let r=Math.round(t.x),n=Math.round(t.y),i=e.replace(/(\d+\.\d+)/g,o=>Math.round(parseFloat(o)).toString());return i.includes(r.toString())||i.includes(n.toString())}f(ve,"isLabelCoordinateInPath");export{w as a,At as b,It as c,Lt as d,Bt as e,B as f,Et as g,Ft as h,Dt as i,Ht as j,_ as k,Yt as l,Jt as m,kt as n,te as o,ee as p,ne as q,ur as r,Si as s,le as t,me as u,vr as v,yr as w,wr as x,he as y,S as z,Sr as A,U as B,ge as C,Ti as D,$i as E,Ci as F,Ai as G,$r as H};
