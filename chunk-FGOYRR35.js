import{c as kt,d as Et,e as wt}from"./chunk-XG2SDX2Y.js";import{a as Pt}from"./chunk-AX73K3ZC.js";import{d as yt}from"./chunk-H6I4HB4C.js";import"./chunk-OFJDRZ5L.js";import{g as Rt}from"./chunk-MO32ZQKK.js";import"./chunk-LAXWCL6A.js";import"./chunk-ZERELBVC.js";import"./chunk-JG6HUHEY.js";import{a as Vt}from"./chunk-J7WD5ZND.js";import{a as Ot,b as Dt}from"./chunk-DV7VBFQH.js";import"./chunk-VFPGQJKT.js";import"./chunk-GX2D2L2X.js";import"./chunk-O2OSWUJ6.js";import"./chunk-ULQGHXUB.js";import{a as lt,b as H}from"./chunk-ERJX7L3L.js";import"./chunk-5XV7PTQI.js";import{a as Ct,b as St}from"./chunk-FFXGIJC7.js";import{f as Tt}from"./chunk-7F4BNMQ6.js";import{a as tt,b as A}from"./chunk-HJ4PUJUU.js";import"./chunk-GW7MQSL6.js";import"./chunk-F4M4TAIC.js";import"./chunk-FGBSBVHW.js";import"./chunk-5R36QA5Q.js";import{a as nt,b as at,c as rt,d as Mt,f as ot,g as It,h as st}from"./chunk-SJZ6P2DA.js";import"./chunk-SKMC2KSJ.js";import{P as et,Q as xt,R as bt,S as it}from"./chunk-YMB734HE.js";import{a as ft,d as gt}from"./chunk-HUJ7WYYJ.js";import{b as E,c as w}from"./chunk-M6LIKZVL.js";import{G as vt,c as _t,d as ht,s as Y}from"./chunk-Q6UYEA4T.js";import{$b as g,Ac as L,Bb as M,Bc as r,Cb as ut,Cc as _,Dc as h,Ec as Z,Ga as V,Ja as pt,Oc as W,Sb as d,Tb as c,Ub as z,Wb as y,Xb as C,Yb as f,Zb as a,Zc as D,_b as n,ad as J,bd as k,gc as U,ia as mt,kc as I,lb as s,ma as N,mc as l,sa as R,ta as O,xc as $,yc as T}from"./chunk-ZXFVGPYG.js";import"./chunk-RNQFGQA5.js";var At=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=ut({type:i});static \u0275inj=mt({imports:[xt,vt]})}return i})();var Ft=(i,e)=>e.resource;function Bt(i,e){if(i&1&&(a(0,"div",4)(1,"span",5),r(2),n(),a(3,"span",6),r(4),n()()),i&2){let t=e.$implicit;s(2),_(t.resource),s(2),_(t.summary)}}function zt(i,e){if(i&1&&(a(0,"div",1)(1,"mat-icon"),r(2,"water_drop"),n(),a(3,"span",2),r(4,"Liquids"),n()(),y(5,Bt,5,2,"div",4,Ft)),i&2){let t=l();s(5),C(t.liquidSummary())}}var X=class i{state=k.required();liquidSummary=D(()=>{let e=this.state().liquids;return e?Object.entries(e).map(([t,o])=>{let m=Object.keys(o).length,p=Object.values(o).reduce((v,x)=>v+x,0);return{resource:t,summary:`${m} wells, ${p.toFixed(0)}\xB5L total`}}):[]});static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-state-display"]],inputs:{state:[1,"state"]},decls:16,vars:6,consts:[[1,"state-display"],[1,"state-row"],[1,"state-label"],[1,"state-value"],[1,"liquid-entry"],[1,"resource-name"],[1,"volume-summary"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"mat-icon"),r(3),n(),a(4,"span",2),r(5,"Tips"),n(),a(6,"span",3),r(7),n()(),a(8,"div",1)(9,"mat-icon"),r(10,"grid_view"),n(),a(11,"span",2),r(12,"On Deck"),n(),a(13,"span",3),r(14),n()(),d(15,zt,7,0),n()),t&2&&(s(2),T("active",o.state().tips.tips_loaded),s(),h(" ",o.state().tips.tips_loaded?"check_circle":"radio_button_unchecked"," "),s(4),h(" ",o.state().tips.tips_loaded?o.state().tips.tips_count+" loaded":"None"," "),s(7),h("",o.state().on_deck.length," items"),s(),c(o.liquidSummary().length>0?15:-1))},dependencies:[w,E],styles:[".state-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.state-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.75rem}.state-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:var(--sys-on-surface-variant)}.state-row[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{color:var(--sys-primary)}.state-label[_ngcontent-%COMP%]{flex:1;color:var(--sys-on-surface-variant)}.state-value[_ngcontent-%COMP%]{font-family:Fira Code,monospace;color:var(--sys-on-surface)}.liquid-entry[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:24px;font-size:.625rem}.resource-name[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant)}.volume-summary[_ngcontent-%COMP%]{font-family:Fira Code,monospace;color:var(--sys-on-surface)}"]})};var jt=(i,e)=>e.key;function qt(i,e){if(i&1&&(a(0,"span",2),r(1),n()),i&2){let t=l();s(),Z(" ",t.currentOperationIndex()+1," / ",t.stateHistory().operations.length," ")}}function Qt(i,e){i&1&&(a(0,"div",3)(1,"mat-icon"),r(2,"hourglass_empty"),n(),a(3,"p"),r(4,"No state history available for this run."),n()())}function Gt(i,e){if(i&1&&r(0),i&2){let t=l(2);h(" ",t.currentOperation().resource," ")}}function Kt(i,e){if(i&1&&r(0),i&2){let t=l(2);h(" \xB7 ",t.formatTime(t.currentOperation().timestamp)," ")}}function Zt(i,e){if(i&1&&(a(0,"div",15)(1,"span",23),r(2,"Duration:"),n(),a(3,"span",24),r(4),n()()),i&2){let t=l(2);s(4),h("",t.currentOperation().duration_ms.toFixed(0),"ms")}}function Jt(i,e){if(i&1&&(a(0,"div",16)(1,"mat-icon"),r(2,"error"),n(),r(3),n()),i&2){let t=l(2);s(3),h(" ",t.currentOperation().error_message," ")}}function Yt(i,e){if(i&1&&g(0,"app-state-display",20),i&2){let t=l(2);f("state",t.currentOperation().state_before)}}function te(i,e){if(i&1&&g(0,"app-state-display",20),i&2){let t=l(2);f("state",t.currentOperation().state_after)}}function ee(i,e){if(i&1&&(a(0,"div",27)(1,"span",28),r(2),n(),a(3,"span",29)(4,"span",30),r(5),n(),a(6,"mat-icon",31),r(7,"arrow_forward"),n(),a(8,"span",32),r(9),n()()()),i&2){let t=e.$implicit;T("increase",t.direction==="increase")("decrease",t.direction==="decrease"),s(2),_(t.key),s(3),_(t.before),s(4),_(t.after)}}function ie(i,e){if(i&1&&(a(0,"div",22)(1,"h4")(2,"mat-icon"),r(3,"difference"),n(),r(4," Changes "),n(),a(5,"div",25),y(6,ee,10,7,"div",26,jt),n()()),i&2){let t=l(2);s(6),C(t.stateDiff())}}function ne(i,e){if(i&1){let t=U();a(0,"div",4)(1,"div",5)(2,"button",6),I("click",function(){R(t);let m=l();return O(m.goToFirst())}),a(3,"mat-icon"),r(4,"first_page"),n()(),a(5,"button",7),I("click",function(){R(t);let m=l();return O(m.goToPrevious())}),a(6,"mat-icon"),r(7,"chevron_left"),n()(),a(8,"div",8)(9,"input",9),I("input",function(m){R(t);let p=l();return O(p.onScrub(m))}),n(),a(10,"div",10)(11,"span"),r(12,"Start"),n(),a(13,"span"),r(14,"End"),n()()(),a(15,"button",11),I("click",function(){R(t);let m=l();return O(m.goToNext())}),a(16,"mat-icon"),r(17,"chevron_right"),n()(),a(18,"button",12),I("click",function(){R(t);let m=l();return O(m.goToLast())}),a(19,"mat-icon"),r(20,"last_page"),n()()()(),a(21,"mat-card",13)(22,"mat-card-header")(23,"mat-icon",14),r(24),n(),a(25,"mat-card-title"),r(26),n(),a(27,"mat-card-subtitle"),d(28,Gt,1,1),d(29,Kt,1,1),n()(),a(30,"mat-card-content"),d(31,Zt,5,1,"div",15),d(32,Jt,4,1,"div",16),n()(),a(33,"div",17)(34,"div",18)(35,"h4")(36,"mat-icon"),r(37,"arrow_back"),n(),r(38," State Before "),n(),a(39,"div",19),d(40,Yt,1,1,"app-state-display",20),n()(),a(41,"div",21)(42,"mat-icon"),r(43,"arrow_forward"),n()(),a(44,"div",18)(45,"h4")(46,"mat-icon"),r(47,"arrow_forward"),n(),r(48," State After "),n(),a(49,"div",19),d(50,te,1,1,"app-state-display",20),n()()(),d(51,ie,8,0,"div",22)}if(i&2){let t,o,m,p,v,x,P,u=l();s(2),f("disabled",u.currentOperationIndex()===0),s(3),f("disabled",u.currentOperationIndex()===0),s(4),f("min",0)("max",u.maxIndex())("value",u.currentOperationIndex()),s(6),f("disabled",u.currentOperationIndex()>=u.maxIndex()),s(3),f("disabled",u.currentOperationIndex()>=u.maxIndex()),s(5),L(u.operationStatusClass()),s(),h(" ",u.operationStatusIcon()," "),s(2),_(((t=u.currentOperation())==null?null:t.method_name)||"Unknown"),s(2),c((o=u.currentOperation())!=null&&o.resource?28:-1),s(),c((m=u.currentOperation())!=null&&m.timestamp?29:-1),s(2),c((p=u.currentOperation())!=null&&p.duration_ms?31:-1),s(),c((v=u.currentOperation())!=null&&v.error_message?32:-1),s(8),c((x=u.currentOperation())!=null&&x.state_before?40:-1),s(10),c((P=u.currentOperation())!=null&&P.state_after?50:-1),s(),c(u.stateDiff().length>0?51:-1)}}var Q=class i{stateHistory=k(null);initialOperationIndex=k(0);operationSelected=J();currentOperationIndex=V(0);maxIndex=D(()=>{let e=this.stateHistory();return e?Math.max(0,e.operations.length-1):0});currentOperation=D(()=>{let e=this.stateHistory();return!e||e.operations.length===0?null:e.operations[this.currentOperationIndex()]||null});stateDiff=D(()=>{let e=this.currentOperation();return e?this.computeStateDiff(e.state_before,e.state_after):[]});constructor(){pt(()=>{let e=this.initialOperationIndex();this.currentOperationIndex.set(e)},{allowSignalWrites:!0})}operationStatusClass(){return this.currentOperation()?.status||"completed"}operationStatusIcon(){switch(this.currentOperation()?.status){case"completed":return"check_circle";case"failed":return"error";case"skipped":return"skip_next";default:return"radio_button_unchecked"}}formatTime(e){if(!e)return"";try{return new Date(e).toLocaleTimeString()}catch{return e}}goToFirst(){this.currentOperationIndex.set(0),this.operationSelected.emit(0)}goToPrevious(){let e=Math.max(0,this.currentOperationIndex()-1);this.currentOperationIndex.set(e),this.operationSelected.emit(e)}goToNext(){let e=Math.min(this.maxIndex(),this.currentOperationIndex()+1);this.currentOperationIndex.set(e),this.operationSelected.emit(e)}goToLast(){let e=this.maxIndex();this.currentOperationIndex.set(e),this.operationSelected.emit(e)}onScrub(e){let t=e.target,o=parseInt(t.value,10);this.currentOperationIndex.set(o),this.operationSelected.emit(o)}computeStateDiff(e,t){let o=[],m=(p,v,x="")=>{let P=new Set([...Object.keys(p||{}),...Object.keys(v||{})]);for(let u of P){let b=p?.[u],S=v?.[u],B=x?`${x}.${u}`:u;if(b===S||JSON.stringify(b)===JSON.stringify(S))continue;if(typeof b=="object"&&b!==null&&typeof S=="object"&&S!==null&&!Array.isArray(b)&&!Array.isArray(S)){m(b,S,B);continue}if(Array.isArray(b)||Array.isArray(S)){o.push({key:B,before:JSON.stringify(b||[]),after:JSON.stringify(S||[]),direction:"change"});continue}let Lt=this.formatValue(B,b),Ht=this.formatValue(B,S),K="change";typeof b=="number"&&typeof S=="number"?K=S>b?"increase":"decrease":b==null||b===!1?K="increase":(S==null||S===!1)&&(K="decrease"),o.push({key:B,before:Lt,after:Ht,direction:K})}};return m(e,t),o}formatValue(e,t){return t==null?"None":typeof t=="boolean"?t?"Yes":"No":e.includes("liquids.")?`${t}\xB5L`:String(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-state-inspector"]],inputs:{stateHistory:[1,"stateHistory"],initialOperationIndex:[1,"initialOperationIndex"]},outputs:{operationSelected:"operationSelected"},decls:9,vars:2,consts:[[1,"state-inspector"],[1,"inspector-header"],[1,"operation-count"],[1,"empty-state"],[1,"timeline-section"],[1,"timeline-controls"],["mat-icon-button","","matTooltip","First operation",3,"click","disabled"],["mat-icon-button","","matTooltip","Previous operation",3,"click","disabled"],[1,"scrubber-container"],["type","range",1,"timeline-scrubber",3,"input","min","max","value"],[1,"scrubber-labels"],["mat-icon-button","","matTooltip","Next operation",3,"click","disabled"],["mat-icon-button","","matTooltip","Last operation",3,"click","disabled"],[1,"operation-card"],["mat-card-avatar",""],[1,"operation-meta"],[1,"error-banner"],[1,"state-comparison"],[1,"state-column"],[1,"state-content"],[3,"state"],[1,"state-arrow"],[1,"state-diff"],[1,"meta-label"],[1,"meta-value"],[1,"diff-list"],[1,"diff-item",3,"increase","decrease"],[1,"diff-item"],[1,"diff-key"],[1,"diff-values"],[1,"old-value"],[1,"diff-arrow"],[1,"new-value"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"mat-icon"),r(3,"timeline"),n(),a(4,"h3"),r(5,"State Inspector"),n(),d(6,qt,2,2,"span",2),n(),d(7,Qt,5,0,"div",3)(8,ne,52,18),n()),t&2&&(s(6),c(o.stateHistory()?6:-1),s(),c(!o.stateHistory()||o.stateHistory().operations.length===0?7:8))},dependencies:[w,E,it,et,At,st,nt,It,rt,ot,Mt,at,A,tt,H,X],styles:[".state-inspector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px;background:var(--sys-surface-container-low);border-radius:12px}.inspector-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.inspector-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:1;margin:0;font-size:1rem;font-weight:600}.inspector-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--sys-primary)}.operation-count[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;background:var(--sys-primary-container);color:var(--sys-on-primary-container);font-size:.75rem;font-weight:500}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:48px 24px;color:var(--sys-on-surface-variant);text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.timeline-section[_ngcontent-%COMP%]{padding:12px 16px;background:var(--sys-surface-container);border-radius:8px}.timeline-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.scrubber-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.timeline-scrubber[_ngcontent-%COMP%]{width:100%;height:8px;appearance:none;background:var(--sys-surface-variant);border-radius:4px;cursor:pointer}.timeline-scrubber[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background:var(--sys-primary);cursor:pointer;transition:transform .15s ease}.timeline-scrubber[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2)}.scrubber-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.625rem;color:var(--sys-on-surface-variant)}.operation-card[_ngcontent-%COMP%]{background:var(--sys-surface-container);border:1px solid var(--sys-outline-variant)}.operation-card[_ngcontent-%COMP%]   mat-icon[mat-card-avatar][_ngcontent-%COMP%]{font-size:24px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--sys-surface-container-high)}.operation-card[_ngcontent-%COMP%]   mat-icon[mat-card-avatar].completed[_ngcontent-%COMP%]{color:var(--sys-primary)}.operation-card[_ngcontent-%COMP%]   mat-icon[mat-card-avatar].failed[_ngcontent-%COMP%]{color:var(--sys-error)}.operation-meta[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:.75rem}.meta-label[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant)}.error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;margin-top:12px;background:color-mix(in srgb,var(--sys-error) 10%,var(--sys-surface));border-radius:6px;color:var(--sys-error);font-size:.75rem}.state-comparison[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:12px;align-items:start}.state-column[_ngcontent-%COMP%]{padding:12px;background:var(--sys-surface-container);border-radius:8px}.state-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin:0 0 12px;font-size:.75rem;font-weight:600;color:var(--sys-on-surface-variant)}.state-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.state-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:40px;color:var(--sys-primary)}.state-diff[_ngcontent-%COMP%]{padding:12px;background:var(--sys-surface-container);border-radius:8px}.state-diff[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin:0 0 12px;font-size:.75rem;font-weight:600;color:var(--sys-on-surface-variant)}.diff-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.diff-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:var(--sys-surface-container-high);border-radius:6px;font-size:.75rem}.diff-key[_ngcontent-%COMP%]{font-family:Fira Code,monospace;color:var(--sys-on-surface)}.diff-values[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.old-value[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant);text-decoration:line-through}.new-value[_ngcontent-%COMP%]{font-weight:600}.diff-item.increase[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:var(--sys-primary)}.diff-item.decrease[_ngcontent-%COMP%]   .new-value[_ngcontent-%COMP%]{color:var(--sys-error)}.diff-arrow[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:var(--sys-on-surface-variant)}"]})};var ae=(i,e)=>e.id;function re(i,e){i&1&&(a(0,"div",2)(1,"span"),r(2,"No state data available"),n()())}function oe(i,e){if(i&1){let t=U();a(0,"div",15),I("click",function(){let m=R(t).$index,p=l(3);return O(p.onBarClick(m))}),n()}if(i&2){let t=e.$implicit,o=e.$index,m=l().$implicit,p=l(2);$("height",p.normalizeValue(t,m),"%"),T("active",o===p.currentIndex())("filled",t>0),f("matTooltip",p.formatTooltip(m,t,o))}}function se(i,e){if(i&1&&(a(0,"span",14),r(1),n()),i&2){let t=l().$implicit;s(),_(t.unit)}}function le(i,e){if(i&1&&(a(0,"div",4)(1,"span",10),r(2),n(),a(3,"div",11)(4,"div",12),y(5,oe,1,7,"div",13,z),n()(),d(7,se,2,1,"span",14),n()),i&2){let t=e.$implicit;s(),f("matTooltip",t.id),s(),h(" ",t.label," "),s(3),C(t.values),s(2),c(t.unit?7:-1)}}function de(i,e){if(i&1&&(a(0,"div",3),y(1,le,8,3,"div",4,ae),n(),a(3,"div",5)(4,"span",6),g(5,"span",7),r(6," Unchanged "),n(),a(7,"span",6),g(8,"span",8),r(9," Value present "),n(),a(10,"span",6),g(11,"span",9),r(12," Current "),n()()),i&2){let t=l();s(),C(t.metrics())}}var G=class i{stateHistory=k(null);currentIndex=k(0);operationSelected=J();metrics=D(()=>{let e=this.stateHistory();return!e||e.operations.length===0?[]:this.extractMetrics(e.operations)});onBarClick(e){this.operationSelected.emit(e)}normalizeValue(e,t){let o=Math.max(...t.values,1);return Math.max(10,e/o*100)}formatTooltip(e,t,o){let m=e.unit||"";return`Op ${o+1}: ${t}${m}`}extractMetrics(e){let t=[],o=e.map(p=>p.state_after.tips.tips_loaded?p.state_after.tips.tips_count:0);t.push({id:"tips",label:"Tips",values:o,unit:"tips"});let m=new Set;e.forEach(p=>{Object.keys(p.state_after.liquids||{}).forEach(v=>m.add(v))});for(let p of m){let v=e.map(x=>{let P=x.state_after.liquids?.[p]||{};return Object.values(P).reduce((u,b)=>u+b,0)});v.some(x=>x>0)&&t.push({id:`liquid_${p}`,label:p.slice(0,10),values:v,unit:"\xB5L"})}return t}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-state-history-timeline"]],inputs:{stateHistory:[1,"stateHistory"],currentIndex:[1,"currentIndex"]},outputs:{operationSelected:"operationSelected"},decls:8,vars:1,consts:[[1,"timeline-container"],[1,"timeline-header"],[1,"empty-state"],[1,"metrics-container"],[1,"metric-row"],[1,"timeline-legend"],[1,"legend-item"],[1,"legend-color","unchanged"],[1,"legend-color","filled"],[1,"legend-color","active"],[1,"metric-label",3,"matTooltip"],[1,"sparkline-container"],[1,"sparkline"],[1,"bar",3,"active","filled","height","matTooltip"],[1,"metric-unit"],[1,"bar",3,"click","matTooltip"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"mat-icon"),r(3,"insights"),n(),a(4,"h4"),r(5,"State Timeline"),n()(),d(6,re,3,0,"div",2)(7,de,13,0),n()),t&2&&(s(6),c(!o.stateHistory()||o.stateHistory().operations.length===0?6:7))},dependencies:[w,E,A,tt],styles:[".timeline-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--sys-surface-container-low);border-radius:12px;border:1px solid var(--sys-outline-variant)}.timeline-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.timeline-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.875rem;font-weight:600;color:var(--sys-on-surface)}.timeline-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--sys-primary);font-size:20px;width:20px;height:20px}.empty-state[_ngcontent-%COMP%]{padding:24px;text-align:center;color:var(--sys-on-surface-variant);font-size:.75rem}.metrics-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.metric-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.metric-label[_ngcontent-%COMP%]{width:80px;font-size:.625rem;font-weight:500;color:var(--sys-on-surface-variant);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sparkline-container[_ngcontent-%COMP%]{flex:1;height:24px;background:var(--sys-surface-container);border-radius:4px;overflow:hidden}.sparkline[_ngcontent-%COMP%]{display:flex;height:100%;gap:1px;align-items:flex-end;padding:2px}.bar[_ngcontent-%COMP%]{flex:1;min-height:2px;background:var(--sys-surface-variant);border-radius:1px;transition:all .15s ease;cursor:pointer}.bar[_ngcontent-%COMP%]:hover{background:var(--sys-primary-container)}.bar.filled[_ngcontent-%COMP%]{background:var(--sys-primary);opacity:.6}.bar.active[_ngcontent-%COMP%]{background:var(--sys-tertiary);opacity:1}.metric-unit[_ngcontent-%COMP%]{width:40px;font-size:.625rem;color:var(--sys-on-surface-variant);text-align:right}.timeline-legend[_ngcontent-%COMP%]{display:flex;gap:16px;padding-top:8px;border-top:1px solid var(--sys-outline-variant)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.625rem;color:var(--sys-on-surface-variant)}.legend-color[_ngcontent-%COMP%]{width:12px;height:8px;border-radius:2px}.legend-color.unchanged[_ngcontent-%COMP%]{background:var(--sys-surface-variant)}.legend-color.filled[_ngcontent-%COMP%]{background:var(--sys-primary);opacity:.6}.legend-color.active[_ngcontent-%COMP%]{background:var(--sys-tertiary)}"]})};var ce=(i,e)=>e.key;function me(i,e){i&1&&(a(0,"mat-icon",6),r(1,"arrow_upward"),n())}function pe(i,e){i&1&&(a(0,"mat-icon",6),r(1,"arrow_downward"),n())}function ue(i,e){if(i&1&&(a(0,"div",3)(1,"span",4),r(2),n(),a(3,"span",5),d(4,me,2,0,"mat-icon",6)(5,pe,2,0,"mat-icon",6),r(6),n(),a(7,"span",7),r(8),n()()),i&2){let t=e.$implicit,o=l();T("positive",o.isPositive(t))("negative",o.isNegative(t)),s(2),_(o.formatKey(t.key)),s(2),c(o.isPositive(t)?4:o.isNegative(t)?5:-1),s(2),h(" ",o.formatChange(t.change)," "),s(2),Z(" ",t.before," \u2192 ",t.after," ")}}function _e(i,e){i&1&&(a(0,"div",2),r(1,"No state changes"),n())}var dt=class i{deltas=k([]);isPositive(e){return typeof e.change=="number"&&e.change>0}isNegative(e){return typeof e.change=="number"&&e.change<0}formatKey(e){return e.replace(/.*\['?([^']+)'?\]\./,"$1.")}formatChange(e){return typeof e=="number"?e>0?`+${e}`:`${e}`:String(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-state-delta"]],inputs:{deltas:[1,"deltas"]},decls:4,vars:1,consts:[[1,"state-delta-container"],[1,"delta-row",3,"positive","negative"],[1,"no-changes"],[1,"delta-row"],[1,"delta-key"],[1,"delta-change"],[1,"icon-sm"],[1,"delta-values"]],template:function(t,o){t&1&&(a(0,"div",0),y(1,ue,9,9,"div",1,ce),d(3,_e,2,0,"div",2),n()),t&2&&(s(),C(o.deltas()),s(2),c(o.deltas().length===0?3:-1))},dependencies:[Y,w,E,A],styles:[".state-delta-container[_ngcontent-%COMP%]{font-size:.875rem;padding:8px}.delta-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 0;border-bottom:1px solid var(--mat-sys-outline-variant)}.delta-key[_ngcontent-%COMP%]{flex:1;font-family:monospace;color:var(--mat-sys-on-surface)}.delta-change[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px;font-weight:600}.delta-values[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);font-size:.75rem}.positive[_ngcontent-%COMP%]   .delta-change[_ngcontent-%COMP%]{color:#22c55e}.negative[_ngcontent-%COMP%]   .delta-change[_ngcontent-%COMP%]{color:#ef4444}.icon-sm[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.no-changes[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);font-style:italic}"],changeDetection:0})};var fe=(i,e)=>e.path;function ge(i,e){if(i&1&&(a(0,"span",7),r(1),n()),i&2){let t=l().$implicit,o=l(2);f("ngClass",o.getValueClass(t.value)),s(),h(" ",o.formatValue(t.value)," ")}}function ve(i,e){i&1&&g(0,"mat-divider",8)}function xe(i,e){if(i&1&&(a(0,"div",4)(1,"div",5)(2,"span",6),r(3),n(),d(4,ge,2,2,"span",7),n(),d(5,ve,1,0,"mat-divider",8),n()),i&2){let t=e.$implicit;$("padding-left",t.level*16,"px"),s(2),T("parent",t.isParent),s(),h(" ",t.key," "),s(),c(t.isParent?-1:4),s(),c(t.isParent?5:-1)}}function be(i,e){if(i&1&&(a(0,"div",1),y(1,xe,6,7,"div",3,fe),n()),i&2){let t=l();s(),C(t.flattenParameters(t.parameters()))}}function ye(i,e){i&1&&(a(0,"div",2)(1,"mat-icon"),r(2,"info_outline"),n(),a(3,"span"),r(4,"No parameters provided"),n()())}var ct=class i{parameters=k(null);hasKeys(e){return!!e&&Object.keys(e).length>0}flattenParameters(e,t="",o=0){let m=[],p=Object.keys(e||{});for(let v of p){let x=e[v],P=t?`${t}.${v}`:v;typeof x=="object"&&x!==null&&!Array.isArray(x)?(m.push({key:v,value:null,path:P,level:o,isParent:!0}),m=[...m,...this.flattenParameters(x,P,o+1)]):m.push({key:v,value:x,path:P,level:o,isParent:!1})}return m}formatValue(e){return e==null?"null":Array.isArray(e)?`[ ${e.join(", ")} ]`:String(e)}getValueClass(e){return e==null?"value-null":typeof e=="number"?"value-number":typeof e=="boolean"?"value-boolean":"value-string"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-parameter-viewer"]],inputs:{parameters:[1,"parameters"]},decls:3,vars:1,consts:[[1,"parameter-viewer"],[1,"parameter-grid"],[1,"empty-params"],[1,"parameter-item",3,"padding-left"],[1,"parameter-item"],[1,"parameter-content"],[1,"parameter-key"],[1,"parameter-value",3,"ngClass"],[1,"parent-divider"]],template:function(t,o){t&1&&(a(0,"div",0),d(1,be,3,0,"div",1)(2,ye,5,0,"div",2),n()),t&2&&(s(),c(o.parameters()&&o.hasKeys(o.parameters())?1:2))},dependencies:[Y,ht,w,E,H,lt,A],styles:[".parameter-viewer[_ngcontent-%COMP%]{background:var(--sys-surface-container-low);border-radius:8px;overflow:hidden}.parameter-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.parameter-item[_ngcontent-%COMP%]{padding:8px 16px;border-bottom:1px solid var(--sys-outline-variant);transition:background-color .2s}.parameter-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.parameter-item[_ngcontent-%COMP%]:hover:not(:has(.parent)){background-color:var(--sys-surface-container-high)}.parameter-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px}.parameter-key[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--sys-on-surface-variant);font-family:Inter,sans-serif}.parameter-key.parent[_ngcontent-%COMP%]{color:var(--sys-primary);text-transform:uppercase;font-size:.75rem;letter-spacing:.05em;font-weight:700;padding-top:8px}.parent-divider[_ngcontent-%COMP%]{margin-top:4px;border-color:var(--sys-primary-container);opacity:.5}.parameter-value[_ngcontent-%COMP%]{font-size:.875rem;font-family:Fira Code,monospace;font-weight:600;word-break:break-all;text-align:right}.value-number[_ngcontent-%COMP%]{color:var(--sys-primary)}.value-boolean[_ngcontent-%COMP%]{color:var(--sys-tertiary)}.value-string[_ngcontent-%COMP%]{color:var(--sys-on-surface)}.value-null[_ngcontent-%COMP%]{color:var(--sys-outline);font-style:italic}.empty-params[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;color:var(--sys-on-surface-variant);font-style:italic;font-size:.875rem}.empty-params[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}"]})};var Ce=()=>({height:"100px","border-radius":"12px"}),Nt=()=>({height:"300px","border-radius":"12px"}),Se=()=>({}),Te=(i,e)=>e.label,Me=(i,e)=>e.operation_index;function Ie(i,e){if(i&1&&r(0),i&2){let t,o=l();h(" ",((t=o.run())==null?null:t.protocol_name)||((t=o.run())==null?null:t.name)||"Run Details"," ")}}function ke(i,e){i&1&&r(0," Run Details ")}function Ee(i,e){i&1&&(a(0,"div",6)(1,"div",8),g(2,"ngx-skeleton-loader",9),a(3,"div",10),g(4,"ngx-skeleton-loader",11)(5,"ngx-skeleton-loader",12),n()()()),i&2&&(s(2),f("theme",W(3,Ce)),s(2),f("theme",W(4,Nt)),s(),f("theme",W(5,Nt)))}function we(i,e){i&1&&(a(0,"div",7)(1,"mat-icon",13),r(2,"error_outline"),n(),a(3,"p",14),r(4,"Run not found"),n(),a(5,"a",15)(6,"mat-icon"),r(7,"arrow_back"),n(),r(8," Back to Monitor "),n()())}function Re(i,e){i&1&&(a(0,"mat-icon",27),r(1,"check"),n())}function Oe(i,e){i&1&&(a(0,"mat-icon",27),r(1,"error"),n())}function De(i,e){if(i&1&&(a(0,"span",42),r(1),n()),i&2){let t=l().$implicit;s(),_(t.index)}}function Pe(i,e){if(i&1&&(a(0,"div",18)(1,"div",41),d(2,Re,2,0,"mat-icon",27)(3,Oe,2,0,"mat-icon",27)(4,De,2,1,"span",42),n(),a(5,"span",43),r(6),n()()),i&2){let t=e.$implicit;s(),T("border-primary",t.state==="completed"||t.state==="active")("bg-primary",t.state==="completed")("text-[var(--mat-sys-on-primary)]",t.state==="completed")("border-error",t.state==="error")("text-error",t.state==="error")("border-outline-variant",t.state==="pending"),s(),c(t.state==="completed"?2:t.state==="error"?3:4),s(3),T("text-primary",t.state==="active")("opacity-60",t.state==="pending"),s(),_(t.label)}}function Ve(i,e){if(i&1&&(a(0,"div",24)(1,"span",25),r(2,"Started"),n(),a(3,"span"),r(4),n()()),i&2){let t=l(2);s(4),_(t.formatDateTime(t.run().start_time))}}function Ae(i,e){if(i&1&&(a(0,"div",24)(1,"span",25),r(2,"Completed"),n(),a(3,"span"),r(4),n()()),i&2){let t=l(2);s(4),_(t.formatDateTime(t.run().end_time))}}function Ne(i,e){if(i&1&&(a(0,"div",24)(1,"span",25),r(2,"Duration"),n(),a(3,"span"),r(4),n()()),i&2){let t=l(2);s(4),_(t.runHistoryService.formatDuration(t.run().duration_ms))}}function Ue(i,e){if(i&1&&(a(0,"div",29)(1,"h3",44),r(2,"Input Parameters"),n(),g(3,"app-parameter-viewer",45),n()),i&2){let t=l(2);s(3),f("parameters",t.run().input_parameters_json)}}function Le(i,e){if(i&1&&(a(0,"mat-card",31)(1,"mat-card-header")(2,"mat-card-title"),r(3,"Output Data"),n()(),a(4,"mat-card-content",23),g(5,"app-parameter-viewer",45),n()()),i&2){let t=l(2);s(5),f("parameters",t.run().output_data_json)}}function He(i,e){if(i&1&&(a(0,"span",54),r(1),n()),i&2){let t=l().$implicit;s(),_(t.resource)}}function Fe(i,e){if(i&1&&(a(0,"span",55),r(1),n()),i&2){let t=l().$implicit;s(),h("",(t.duration_ms/1e3).toFixed(1),"s")}}function Be(i,e){if(i&1&&(a(0,"div",56),r(1),n()),i&2){let t=l().$implicit;s(),h(" ",t.error_message," ")}}function ze(i,e){if(i&1&&g(0,"app-state-delta",57),i&2){let t=l().$implicit,o=l(3);f("deltas",o.formatDeltas(t.state_delta))}}function $e(i,e){if(i&1&&(a(0,"div",48)(1,"div",50)(2,"div",51)(3,"span",52),r(4),n(),a(5,"span",53),r(6),n(),d(7,He,2,1,"span",54),n(),a(8,"div",26),d(9,Fe,2,1,"span",55),a(10,"mat-icon",27),r(11),n()()(),d(12,Be,2,1,"div",56),d(13,ze,1,1,"app-state-delta",57),n()),i&2){let t=e.$implicit,o=l(3);s(4),h("",t.operation_index+1,"."),s(2),_(t.method_name),s(),c(t.resource?7:-1),s(2),c(t.duration_ms?9:-1),s(),L(t.status==="failed"?"text-sys-error":"text-sys-success"),s(),h(" ",t.status==="failed"?"error":"check_circle"," "),s(),c(t.error_message?12:-1),s(),c(t.state_delta&&o.hasKeys(t.state_delta)?13:-1)}}function We(i,e){i&1&&(a(0,"div",49),r(1," No operations recorded. "),n())}function Xe(i,e){if(i&1&&(a(0,"mat-card",31)(1,"mat-card-content",46)(2,"div",47),y(3,$e,14,9,"div",48,Me),d(5,We,2,0,"div",49),n()()()),i&2){let t=e;s(3),C(t),s(2),c(t.length===0?5:-1)}}function je(i,e){i&1&&(a(0,"div",58),g(1,"mat-spinner",59),n())}function qe(i,e){if(i&1&&d(0,je,2,0,"div",58),i&2){let t=l(2);c(t.isLoadingStateHistory()?0:-1)}}function Qe(i,e){if(i&1&&(a(0,"div",61),r(1),n()),i&2){let t=e.$implicit;s(),_(t)}}function Ge(i,e){if(i&1&&(a(0,"mat-card",36)(1,"mat-card-header")(2,"mat-card-title"),r(3,"Execution Logs"),n()(),a(4,"mat-card-content",23)(5,"div",60),y(6,Qe,2,1,"div",61,z),n()()()),i&2){let t=l(2);s(6),C(t.run().logs)}}function Ke(i,e){i&1&&(a(0,"div",6),g(1,"mat-spinner",59),n())}function Ze(i,e){i&1&&(a(0,"div",7)(1,"mat-icon",62),r(2,"hourglass_empty"),n(),a(3,"p"),r(4,"No state history available for this run."),n(),a(5,"p",63),r(6,"State history is recorded during protocol execution."),n()())}function Je(i,e){if(i&1){let t=U();a(0,"div",21)(1,"div",64)(2,"app-state-inspector",65),I("operationSelected",function(m){R(t);let p=l(2);return O(p.onOperationSelected(m))}),n()(),a(3,"div")(4,"app-state-history-timeline",66),I("operationSelected",function(m){R(t);let p=l(2);return O(p.onOperationSelected(m))}),n()()()}if(i&2){let t=l(2);s(2),f("stateHistory",t.stateHistory())("initialOperationIndex",t.currentOperationIndex()),s(2),f("stateHistory",t.stateHistory())("currentIndex",t.currentOperationIndex())}}function Ye(i,e){if(i&1&&g(0,"app-deck-view",67),i&2){let t=l();f("resource",t.plr_definition)("state",t.wellState||W(2,Se))}}function ti(i,e){i&1&&(a(0,"div",7)(1,"mat-icon",62),r(2,"view_quilt"),n(),a(3,"p"),r(4,"Deck layout not available for this run"),n()())}function ei(i,e){i&1&&d(0,Ye,1,3,"app-deck-view",67)(1,ti,5,0,"div",7),i&2&&c(e.plr_definition?0:1)}function ii(i,e){if(i&1&&d(0,ei,2,1),i&2){let t,o=l(2);c((t=o.executionService.currentRun())?0:-1,t)}}function ni(i,e){if(i&1&&(a(0,"div",7)(1,"mat-icon",62),r(2,"history"),n(),a(3,"p"),r(4,"Live view only available for active runs."),n(),a(5,"p",63),r(6),n()()),i&2){let t,o=l(2);s(6),h("This run is currently in terminal state: ",(t=o.run())==null?null:t.status)}}function ai(i,e){if(i&1&&(a(0,"div",16),g(1,"div",17),y(2,Pe,7,18,"div",18,Te),n(),a(4,"mat-tab-group",19)(5,"mat-tab",20)(6,"div",21)(7,"mat-card",22)(8,"mat-card-header")(9,"mat-card-title"),r(10,"Run Information"),n()(),a(11,"mat-card-content",23)(12,"div",24)(13,"span",25),r(14,"Status"),n(),a(15,"div",26)(16,"mat-icon",27),r(17),n(),a(18,"span",28),r(19),n()()(),g(20,"mat-divider"),a(21,"div",24)(22,"span",25),r(23,"Created"),n(),a(24,"span"),r(25),n()(),d(26,Ve,5,1,"div",24),d(27,Ae,5,1,"div",24),d(28,Ne,5,1,"div",24),g(29,"mat-divider"),d(30,Ue,4,1,"div",29),n()(),a(31,"div",30)(32,"mat-card",31)(33,"mat-card-header")(34,"mat-card-title"),r(35,"Actions"),n()(),a(36,"mat-card-content",32)(37,"button",33)(38,"mat-icon"),r(39,"replay"),n(),r(40," Re-run Protocol "),n(),a(41,"button",33)(42,"mat-icon"),r(43,"download"),n(),r(44," Export Logs "),n()()(),d(45,Le,6,1,"mat-card",31),n()(),a(46,"div",34)(47,"h3",35),r(48,"Operation Timeline"),n(),d(49,Xe,6,1,"mat-card",31)(50,qe,1,1),n(),d(51,Ge,8,0,"mat-card",36),n(),a(52,"mat-tab",37)(53,"div",38),d(54,Ke,2,0,"div",6)(55,Ze,7,0,"div",7)(56,Je,5,4,"div",21),n()(),a(57,"mat-tab",39)(58,"div",40),d(59,ii,1,1)(60,ni,7,1,"div",7),n()()()),i&2){let t,o=l();s(2),C(o.timelineSteps()),s(14),L(o.runHistoryService.getStatusColor(o.run().status)),s(),h(" ",o.runHistoryService.getStatusIcon(o.run().status)," "),s(2),_(o.run().status),s(6),_(o.formatDateTime(o.run().created_at)),s(),c(o.run().start_time?26:-1),s(),c(o.run().end_time?27:-1),s(),c(o.run().duration_ms?28:-1),s(2),c(o.run().input_parameters_json&&o.hasKeys(o.run().input_parameters_json)?30:-1),s(15),c(o.run().output_data_json&&o.hasKeys(o.run().output_data_json)?45:-1),s(4),c((t=(t=o.stateHistory())==null?null:t.operations)?49:50,t),s(2),c(o.run().logs&&o.run().logs.length>0?51:-1),s(3),c(o.isLoadingStateHistory()?54:o.stateHistory()?56:55),s(5),c(o.isLive()?59:60)}}var Ut=class i{route=N(ft);location=N(_t);simulationService=N(Pt);runHistoryService=N(Vt);run=V(null);isLoading=V(!0);stateHistory=V(null);isLoadingStateHistory=V(!1);currentOperationIndex=V(0);executionService=N(yt);isLive=D(()=>{let e=this.run();return e&&["RUNNING","PAUSED","PREPARING"].includes(e.status)});timelineSteps=D(()=>{let e=this.run();if(!e)return[];let t=e.status,o="pending",m="pending",p="pending";return["QUEUED","PREPARING","PENDING"].includes(t)?o="active":o="completed",t==="RUNNING"||t==="PAUSED"?m="active":["COMPLETED","FAILED","CANCELLED"].includes(t)&&(m="completed"),t==="COMPLETED"?p="completed":(t==="FAILED"||t==="CANCELLED")&&(p="error"),[{label:"Setup",index:1,state:o},{label:"Running",index:2,state:m},{label:"Complete",index:3,state:p}]});runId="";ngOnInit(){this.runId=this.route.snapshot.paramMap.get("id")||"",this.runId?(this.loadRunDetail(),this.loadStateHistory()):this.isLoading.set(!1)}ngOnDestroy(){this.executionService.disconnect()}loadRunDetail(){this.isLoading.set(!0),this.runHistoryService.getRunDetail(this.runId).subscribe({next:e=>{this.run.set(e),this.isLoading.set(!1),this.isLive()&&this.executionService.connectWebSocket(this.runId)},error:e=>{console.error("[RunDetail] Error loading run:",e),this.isLoading.set(!1)}})}goBack(){this.location.back()}formatDateTime(e){if(!e)return"-";try{return new Date(e).toLocaleString()}catch{return e}}formatJson(e){return e?JSON.stringify(e,null,2):""}hasKeys(e){return!!e&&Object.keys(e).length>0}formatDeltas(e){return Object.entries(e).map(([t,o])=>({key:t,before:"-",after:"-",change:o}))}loadStateHistory(){this.isLoadingStateHistory.set(!0),this.simulationService.getStateHistory(this.runId).subscribe({next:e=>{this.stateHistory.set(e),this.isLoadingStateHistory.set(!1)},error:e=>{console.error("[RunDetail] Error loading state history:",e),this.isLoadingStateHistory.set(!1)}})}onOperationSelected(e){this.currentOperationIndex.set(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-run-detail"]],decls:14,vars:3,consts:[[1,"p-6","max-w-screen-xl","mx-auto"],[1,"flex","items-center","gap-4","mb-6"],["mat-icon-button","","aria-label","Go back",3,"click"],[1,"flex-1"],[1,"text-2xl","font-bold","text-sys-text-primary"],[1,"text-sys-text-secondary"],[1,"flex","justify-center","py-12"],[1,"empty-state","text-center","py-12","text-sys-text-tertiary"],[1,"w-full","max-w-3xl","space-y-4"],["count","1","appearance","line",3,"theme"],[1,"grid","grid-cols-3","gap-4"],["count","1","appearance","line",1,"col-span-2",3,"theme"],["count","1","appearance","line",1,"col-span-1",3,"theme"],[1,"!w-16","!h-16","!text-[64px]","opacity-30","mb-4"],[1,"text-lg"],["mat-button","","routerLink","/app/monitor",1,"mt-4"],[1,"timeline-container","relative","flex","items-center","justify-between","mb-8","px-8","max-w-3xl","mx-auto"],[1,"absolute","left-8","right-8","top-1/2","h-1","bg-[var(--mat-sys-surface-variant)]","-z-10","translate-y-[-50%]"],[1,"flex","flex-col","items-center","gap-2","bg-surface","px-4","z-10"],["animationDuration","200ms",1,"run-tabs"],["label","Overview"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","detail-card"],[1,"pt-4"],[1,"info-row"],[1,"info-label"],[1,"flex","items-center","gap-2"],[1,"!w-5","!h-5","!text-[20px]"],[1,"font-semibold"],[1,"mt-4"],[1,"space-y-4"],[1,"detail-card"],[1,"pt-4","space-y-2"],["mat-stroked-button","","disabled","",1,"w-full"],[1,"mt-8"],[1,"text-lg","font-bold","mb-4","text-sys-text-primary"],[1,"detail-card","mt-6"],["label","State Inspector"],[1,"tab-content","p-4"],["label","Live View"],[1,"tab-content","flex","flex-col","items-center","justify-center","min-h-[500px]","p-6","bg-[var(--plr-bg)]","rounded-b-xl","border-x","border-b","border-[var(--theme-border)]"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","border-2","transition-colors","duration-300"],[1,"text-xs","font-bold"],[1,"text-xs","font-medium"],[1,"font-semibold","text-sys-text-primary","mb-2"],[3,"parameters"],[1,"p-0"],[1,"operation-list"],[1,"operation-item","p-4","border-b","border-sys-outline-variant","last:border-0","hover:bg-sys-surface-container-high","transition-colors"],[1,"p-8","text-center","text-sys-text-tertiary"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-3"],[1,"font-mono","text-sm","font-semibold","text-sys-primary"],[1,"font-mono","text-sm","font-bold","text-sys-on-surface"],[1,"text-xs","px-2","py-0.5","rounded-full","bg-sys-surface-variant","text-sys-on-surface-variant"],[1,"text-xs","font-mono","text-sys-on-surface-variant"],[1,"mb-2","text-xs","text-sys-error","bg-sys-error-container","p-2","rounded"],[3,"deltas"],[1,"flex","justify-center","p-8"],["diameter","32"],[1,"bg-[#1e1e1e]","text-green-400","p-4","rounded-lg","font-mono","text-sm","max-h-96","overflow-y-auto"],[1,"log-line"],[1,"!w-12","!h-12","!text-[48px]","opacity-30","mb-4"],[1,"text-sm"],[1,"lg:col-span-2"],[3,"operationSelected","stateHistory","initialOperationIndex"],[3,"operationSelected","stateHistory","currentIndex"],[3,"resource","state"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),I("click",function(){return o.goBack()}),a(3,"mat-icon"),r(4,"arrow_back"),n()(),a(5,"div",3)(6,"h1",4),d(7,Ie,1,1)(8,ke,1,0),n(),a(9,"p",5),r(10),n()()(),d(11,Ee,6,6,"div",6)(12,we,9,0,"div",7)(13,ai,61,14),n()),t&2&&(s(7),c(o.run()?7:8),s(3),_(o.runId),s(),c(o.isLoading()?11:o.run()?13:12))},dependencies:[gt,st,nt,rt,ot,at,w,E,it,bt,et,St,Ct,Tt,H,lt,wt,kt,Et,Dt,Ot,Q,G,dt,ct,Rt],styles:[".detail-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container-low);border:1px solid var(--mat-sys-outline-variant)}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0}.info-label[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);font-weight:500}.log-line[_ngcontent-%COMP%]{padding:2px 0;white-space:pre-wrap;word-break:break-all}pre[_ngcontent-%COMP%]{margin:0;font-family:Fira Code,Monaco,monospace}.run-tabs[_ngcontent-%COMP%]{margin-top:24px}.tab-content[_ngcontent-%COMP%]{min-height:400px}"]})};export{Ut as RunDetailComponent};
