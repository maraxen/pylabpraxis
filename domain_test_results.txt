============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.2, pluggy-1.6.0 -- /Users/mar/Projects/pylabpraxis/.venv/bin/python3
cachedir: .pytest_cache
Database: SQLite (in-memory)
rootdir: /Users/mar/Projects/pylabpraxis
configfile: pyproject.toml
plugins: playwright-0.7.2, asyncio-1.2.0, anyio-4.11.0, socket-0.7.0, xdist-3.8.0, timeout-2.4.0, Faker-37.11.0, base-url-2.1.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
timeout: 300.0s
timeout method: signal
timeout func_only: False
collecting ... collected 305 items

tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_creation_minimal PASSED [  0%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_creation_with_all_fields PASSED [  0%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_persist_to_database PASSED [  0%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_unique_constraint PASSED [  1%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_optional_flag PASSED [  1%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_type_hints PASSED [  1%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_jsonb_constraints PASSED [  2%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_jsonb_location_constraints PASSED [  2%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_relationship_to_protocol PASSED [  2%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_query_by_protocol PASSED [  3%]
tests/models/test_domain/test_asset_requirement.py::test_asset_requirement_orm_repr PASSED [  3%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_creation_minimal FAILED [  3%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_creation_with_all_fields PASSED [  4%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_persist_to_database PASSED [  4%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_status_transitions PASSED [  4%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_redis_lock_fields PASSED [  5%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_timing_fields FAILED [  5%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_asset_type_field PASSED [  5%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_relationship_to_protocol_run FAILED [  6%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_relationship_to_schedule_entry PASSED [  6%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_relationship_to_asset FAILED [  6%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_query_by_status PASSED [  7%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_query_active_reservations PASSED [  7%]
tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_query_by_asset PASSED [  7%]
tests/models/test_domain/test_asset_reservation.py::test_multiple_reservations_for_same_run PASSED [  8%]
tests/models/test_domain/test_asset_sqlmodel.py::TestAssetSQLModel::test_asset_creation_defaults PASSED [  8%]
tests/models/test_domain/test_asset_sqlmodel.py::TestAssetSQLModel::test_asset_serialization_to_read PASSED [  8%]
tests/models/test_domain/test_asset_sqlmodel.py::TestAssetSQLModel::test_asset_create_schema_validation PASSED [  9%]
tests/models/test_domain/test_asset_sqlmodel.py::TestAssetSQLModel::test_asset_update_partial PASSED [  9%]
tests/models/test_domain/test_asset_sqlmodel.py::TestAssetSQLModel::test_polymorphic_identity PASSED [  9%]
tests/models/test_domain/test_asset_sqlmodel.py::TestAssetSQLModel::test_json_fields_roundtrip PASSED [ 10%]
tests/models/test_domain/test_deck.py::test_deck_definition_orm_creation PASSED [ 10%]
tests/models/test_domain/test_deck.py::test_deck_definition_orm_with_jsonb_fields PASSED [ 10%]
tests/models/test_domain/test_deck.py::test_deck_position_definition_orm_creation PASSED [ 11%]
tests/models/test_domain/test_deck.py::test_deck_position_definition_orm_unique_constraint PASSED [ 11%]
tests/models/test_domain/test_deck.py::test_deck_orm_creation_with_defaults PASSED [ 11%]
tests/models/test_domain/test_deck.py::test_deck_orm_persist_to_database PASSED [ 12%]
tests/models/test_domain/test_deck.py::test_deck_orm_unique_name_constraint PASSED [ 12%]
tests/models/test_domain/test_deck.py::test_deck_orm_with_parent_machine PASSED [ 12%]
tests/models/test_domain/test_deck.py::test_deck_orm_with_resources PASSED [ 13%]
tests/models/test_domain/test_deck.py::test_deck_orm_is_resource_and_asset PASSED [ 13%]
tests/models/test_domain/test_deck.py::test_deck_orm_relationships PASSED [ 13%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_base_minimal PASSED [ 14%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_base_with_all_fields PASSED [ 14%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_create_inherits_from_base PASSED [ 14%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_update_all_fields_optional PASSED [ 15%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_response_serialization_to_dict PASSED [ 15%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_response_serialization_to_json PASSED [ 15%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_response_deserialization_from_dict PASSED [ 16%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_response_roundtrip_serialization PASSED [ 16%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_response_from_model PASSED [ 16%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_response_from_orm_minimal PASSED [ 17%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_positioning_config_model PASSED [ 17%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_position_definition_create PASSED [ 17%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_position_definition_response PASSED [ 18%]
tests/models/test_domain/test_deck.py::TestDeckSchemas::test_deck_position_definition_with_compatible_resources PASSED [ 18%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_creation_minimal FAILED [ 18%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_creation_with_all_fields FAILED [ 19%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_persist_to_database FAILED [ 19%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_unique_name_constraint FAILED [ 19%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_status_transitions FAILED [ 20%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_is_recursive_flag PASSED [ 20%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_query_by_name FAILED [ 20%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_update_base_path FAILED [ 20%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_repr PASSED [ 21%]
tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_query_by_status FAILED [ 21%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_creation_minimal ERROR [ 21%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_creation_with_all_fields ERROR [ 22%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_persist_to_database ERROR [ 22%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_sequence_ordering ERROR [ 22%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_status_values ERROR [ 23%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_input_args_jsonb ERROR [ 23%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_return_value_jsonb ERROR [ 23%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_error_fields ERROR [ 24%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_nested_calls ERROR [ 24%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_timing ERROR [ 24%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_query_by_protocol_run ERROR [ 25%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_query_by_status ERROR [ 25%]
tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_repr ERROR [ 25%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_creation_minimal ERROR [ 26%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_creation_with_all_fields ERROR [ 26%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_persist_to_database ERROR [ 26%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_data_type_values ERROR [ 27%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_spatial_context_values ERROR [ 27%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_numeric_data ERROR [ 27%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_json_data ERROR [ 28%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_text_data ERROR [ 28%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_binary_data ERROR [ 28%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_spatial_coordinates_jsonb ERROR [ 29%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_metadata_jsonb ERROR [ 29%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_file_path ERROR [ 29%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_protocol_run ERROR [ 30%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_function_call_log ERROR [ 30%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_resource ERROR [ 30%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_machine ERROR [ 31%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_query_by_data_type ERROR [ 31%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_query_by_protocol_run ERROR [ 31%]
tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_query_by_resource ERROR [ 32%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_creation_minimal FAILED [ 32%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_with_git_source PASSED [ 32%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_with_fs_source PASSED [ 33%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_persist_to_database PASSED [ 33%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_unique_constraint_git FAILED [ 33%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_unique_constraint_fs FAILED [ 34%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_is_top_level_flag FAILED [ 34%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_solo_execution_flag FAILED [ 34%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_preconfigure_deck_flag FAILED [ 35%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_deprecated_flag FAILED [ 35%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_jsonb_tags FAILED [ 35%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_state_param FAILED [ 36%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_query_by_fqn FAILED [ 36%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_query_top_level FAILED [ 36%]
tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_repr PASSED [ 37%]
tests/models/test_domain/test_machine.py::test_machine_orm_creation_with_defaults FAILED [ 37%]
tests/models/test_domain/test_machine.py::test_machine_orm_persist_to_database FAILED [ 37%]
tests/models/test_domain/test_machine.py::test_machine_orm_unique_name_constraint PASSED [ 38%]
tests/models/test_domain/test_machine.py::test_machine_orm_unique_serial_number FAILED [ 38%]
tests/models/test_domain/test_machine.py::test_machine_orm_with_workcell_relationship FAILED [ 38%]
tests/models/test_domain/test_machine.py::test_machine_orm_status_enum_values FAILED [ 39%]
tests/models/test_domain/test_machine.py::test_machine_orm_category_enum_values FAILED [ 39%]
tests/models/test_domain/test_machine.py::test_machine_orm_connection_info_json PASSED [ 39%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_base_minimal PASSED [ 40%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_base_with_all_fields PASSED [ 40%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_create_inherits_from_base PASSED [ 40%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_update_all_fields_optional PASSED [ 40%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_response_serialization_to_dict PASSED [ 41%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_response_serialization_to_json PASSED [ 41%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_response_deserialization_from_dict PASSED [ 41%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_response_status_enum_validation PASSED [ 42%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_response_roundtrip_serialization PASSED [ 42%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_response_from_model PASSED [ 42%]
tests/models/test_domain/test_machine.py::TestMachineSchemas::test_machine_response_from_orm_minimal PASSED [ 43%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_creation_minimal FAILED [ 43%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_with_all_fields FAILED [ 43%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_persist_to_database FAILED [ 44%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_unique_fqn_constraint PASSED [ 44%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_unique_name_constraint FAILED [ 44%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_machine_categories FAILED [ 45%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_jsonb_fields FAILED [ 45%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_dimensions FAILED [ 45%]
tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_with_deck_flag PASSED [ 46%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_base_minimal FAILED [ 46%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_base_with_all_fields FAILED [ 46%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_create PASSED [ 47%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_update FAILED [ 47%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_response_serialization_to_dict PASSED [ 47%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_response_serialization_to_json PASSED [ 48%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_response_deserialization_from_dict PASSED [ 48%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_response_roundtrip_serialization PASSED [ 48%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_response_from_model PASSED [ 49%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_response_from_orm_minimal PASSED [ 49%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_jsonb_validation FAILED [ 49%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_category_types PASSED [ 50%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_physical_dimensions PASSED [ 50%]
tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_with_deck_flag PASSED [ 50%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_creation_minimal FAILED [ 51%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_creation_with_all_fields PASSED [ 51%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_persist_to_database PASSED [ 51%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_unique_constraint FAILED [ 52%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_deck_param_flag PASSED [ 52%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_optional_flag PASSED [ 52%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_jsonb_constraints PASSED [ 53%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_jsonb_ui_hint PASSED [ 53%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_relationship_to_protocol PASSED [ 53%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_query_by_protocol PASSED [ 54%]
tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_repr PASSED [ 54%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_creation_minimal ERROR [ 54%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_creation_with_all_fields ERROR [ 55%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_persist_to_database ERROR [ 55%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_status_transitions ERROR [ 55%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_timing_fields ERROR [ 56%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_input_parameters_jsonb ERROR [ 56%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_resolved_assets_jsonb ERROR [ 56%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_output_data_jsonb ERROR [ 57%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_state_jsonb ERROR [ 57%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_data_directory_path ERROR [ 57%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_created_by_user_jsonb ERROR [ 58%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_continuation_chain ERROR [ 58%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_query_by_status ERROR [ 58%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_query_by_protocol ERROR [ 59%]
tests/models/test_domain/test_protocol_run.py::test_protocol_run_repr ERROR [ 59%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_creation_minimal FAILED [ 59%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_creation_with_all_fields FAILED [ 60%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_persist_to_database FAILED [ 60%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_unique_name_constraint FAILED [ 60%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_status_transitions FAILED [ 60%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_auto_sync_flag PASSED [ 61%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_query_by_name FAILED [ 61%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_update_commit_hash FAILED [ 61%]
tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_repr PASSED [ 62%]
tests/models/test_domain/test_resource.py::test_resource_orm_creation_with_defaults PASSED [ 62%]
tests/models/test_domain/test_resource.py::test_resource_orm_persist_to_database PASSED [ 62%]
tests/models/test_domain/test_resource.py::test_resource_orm_unique_name_constraint PASSED [ 63%]
tests/models/test_domain/test_resource.py::test_resource_orm_status_enum_values PASSED [ 63%]
tests/models/test_domain/test_resource.py::test_resource_orm_parent_child_relationship PASSED [ 63%]
tests/models/test_domain/test_resource.py::test_resource_orm_with_workcell_relationship PASSED [ 64%]
tests/models/test_domain/test_resource.py::test_resource_orm_plr_state_json PASSED [ 64%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_base_minimal FAILED [ 64%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_base_with_all_fields PASSED [ 65%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_create_inherits_from_base PASSED [ 65%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_update_all_fields_optional PASSED [ 65%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_serialization_to_dict PASSED [ 66%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_serialization_to_json PASSED [ 66%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_deserialization_from_dict PASSED [ 66%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_status_enum_validation PASSED [ 67%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_roundtrip_serialization PASSED [ 67%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_from_model PASSED [ 67%]
tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_from_orm_minimal FAILED [ 68%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_creation_minimal PASSED [ 68%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_with_all_fields PASSED [ 68%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_persist_to_database PASSED [ 69%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_unique_fqn_constraint PASSED [ 69%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_non_unique_name PASSED [ 69%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_jsonb_fields PASSED [ 70%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_consumable_flag PASSED [ 70%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_dimensions PASSED [ 70%]
tests/models/test_domain/test_resource_definition.py::test_resource_definition_orm_with_volume PASSED [ 71%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_base_minimal FAILED [ 71%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_base_with_all_fields FAILED [ 71%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_create PASSED [ 72%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_update PASSED [ 72%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_response_serialization_to_dict PASSED [ 72%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_response_serialization_to_json PASSED [ 73%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_response_deserialization_from_dict PASSED [ 73%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_response_roundtrip_serialization PASSED [ 73%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_response_from_model PASSED [ 74%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_response_from_orm_minimal PASSED [ 74%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_jsonb_validation PASSED [ 74%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_consumable_types PASSED [ 75%]
tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_physical_dimensions PASSED [ 75%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_creation_minimal ERROR [ 75%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_creation_with_all_fields ERROR [ 76%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_persist_to_database ERROR [ 76%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_status_transitions ERROR [ 76%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_priority_ordering ERROR [ 77%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_timestamp_fields ERROR [ 77%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_asset_requirements_jsonb ERROR [ 77%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_celery_integration ERROR [ 78%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_retry_logic ERROR [ 78%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_user_params_jsonb ERROR [ 78%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_relationship_to_protocol_run ERROR [ 79%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_query_by_status ERROR [ 79%]
tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_query_ready_entries ERROR [ 79%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_creation_minimal ERROR [ 80%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_creation_with_all_fields ERROR [ 80%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_persist_to_database ERROR [ 80%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_all_event_types ERROR [ 80%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_status_transitions ERROR [ 81%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_event_timing ERROR [ 81%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_event_data_jsonb ERROR [ 81%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_error_tracking ERROR [ 82%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_all_trigger_types ERROR [ 82%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_asset_count_tracking ERROR [ 82%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_relationship_to_schedule_entry ERROR [ 83%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_query_by_event_type ERROR [ 83%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_query_by_time_range ERROR [ 83%]
tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_cascade_delete ERROR [ 84%]
tests/models/test_domain/test_sqlmodel_base.py::test_praxis_base_defaults FAILED [ 84%]
tests/models/test_domain/test_sqlmodel_base.py::test_praxis_base_serialization PASSED [ 84%]
tests/models/test_domain/test_sqlmodel_base.py::test_json_field_helper PASSED [ 85%]
tests/models/test_domain/test_sqlmodel_base.py::test_sqlmodel_metadata_registration FAILED [ 85%]
tests/models/test_domain/test_user.py::test_user_orm_creation_minimal PASSED [ 85%]
tests/models/test_domain/test_user.py::test_user_orm_creation_with_all_fields PASSED [ 86%]
tests/models/test_domain/test_user.py::test_user_orm_persist_to_database PASSED [ 86%]
tests/models/test_domain/test_user.py::test_user_orm_unique_username_constraint PASSED [ 86%]
tests/models/test_domain/test_user.py::test_user_orm_unique_email_constraint PASSED [ 87%]
tests/models/test_domain/test_user.py::test_user_orm_is_active_flag PASSED [ 87%]
tests/models/test_domain/test_user.py::test_user_orm_phone_fields PASSED [ 87%]
tests/models/test_domain/test_user.py::test_user_orm_repr PASSED         [ 88%]
tests/models/test_domain/test_user.py::test_user_orm_query_by_username PASSED [ 88%]
tests/models/test_domain/test_user.py::test_user_orm_query_by_email PASSED [ 88%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_base_minimal PASSED [ 89%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_base_with_all_fields PASSED [ 89%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_create_with_password PASSED [ 89%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_create_password_required PASSED [ 90%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_update_all_fields_optional PASSED [ 90%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_update_with_password PASSED [ 90%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_response_serialization_to_dict PASSED [ 91%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_response_serialization_to_json PASSED [ 91%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_response_deserialization_from_dict PASSED [ 91%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_response_roundtrip_serialization PASSED [ 92%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_response_from_model PASSED [ 92%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_response_from_orm_minimal PASSED [ 92%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_base_inactive_user PASSED [ 93%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_create_inactive_user PASSED [ 93%]
tests/models/test_domain/test_user.py::TestUserSchemas::test_user_response_does_not_expose_password PASSED [ 93%]
tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_creation_minimal ERROR [ 94%]
tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_creation_all_fields ERROR [ 94%]
tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_persistence ERROR [ 94%]
tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_relationships ERROR [ 95%]
tests/models/test_domain/test_workcell.py::test_workcell_orm_creation_with_defaults PASSED [ 95%]
tests/models/test_domain/test_workcell.py::test_workcell_orm_persist_to_database PASSED [ 95%]
tests/models/test_domain/test_workcell.py::test_workcell_orm_unique_name_constraint FAILED [ 96%]
tests/models/test_domain/test_workcell.py::test_workcell_orm_relationships_empty_by_default FAILED [ 96%]
tests/models/test_domain/test_workcell.py::test_workcell_orm_with_custom_status PASSED [ 96%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_base_minimal FAILED [ 97%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_base_with_all_fields FAILED [ 97%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_create_inherits_from_base FAILED [ 97%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_update_all_fields_optional PASSED [ 98%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_serialization_to_dict FAILED [ 98%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_serialization_to_json FAILED [ 98%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_deserialization_from_dict FAILED [ 99%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_enum_validation FAILED [ 99%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_roundtrip_serialization FAILED [ 99%]
tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_from_model PASSED [100%]
ERROR: Coverage failure: total of 12 is less than fail-under=80


==================================== ERRORS ====================================
________ ERROR at setup of test_function_call_log_orm_creation_minimal _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464de4378e0bd7f9916c387b738', '2026-01-12 22:47:48.035775', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____ ERROR at setup of test_function_call_log_orm_creation_with_all_fields _____
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464dfdd7ba0849d85ce8397b5d8', '2026-01-12 22:47:48.445128', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_function_call_log_orm_persist_to_database _______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464e16373419d213f46bb8ceeba', '2026-01-12 22:47:48.835762', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
________ ERROR at setup of test_function_call_log_orm_sequence_ordering ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464e2fa7ed29d79505906843ad8', '2026-01-12 22:47:49.242894', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_function_call_log_orm_status_values __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464e48d7c20ae6468afb54d008f', '2026-01-12 22:47:49.645423', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
________ ERROR at setup of test_function_call_log_orm_input_args_jsonb _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464e61b74e2b934974fd30649a6', '2026-01-12 22:47:50.044008', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_function_call_log_orm_return_value_jsonb ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464e7aa7d3380c45920401f5674', '2026-01-12 22:47:50.442576', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_function_call_log_orm_error_fields ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464e97c772088880312403b3a9f', '2026-01-12 22:47:50.908199', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_function_call_log_orm_nested_calls ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464eb17756092e90649fa17fca5', '2026-01-12 22:47:51.319326', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_____________ ERROR at setup of test_function_call_log_orm_timing ______________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464ecb372608eb52743c72dcaa6', '2026-01-12 22:47:51.731620', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______ ERROR at setup of test_function_call_log_orm_query_by_protocol_run ______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464ee7c7fd3b8757d5282eb18a6', '2026-01-12 22:47:52.188172', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_function_call_log_orm_query_by_status _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464f01873728853de149ed5f5a2', '2026-01-12 22:47:52.600842', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______________ ERROR at setup of test_function_call_log_orm_repr _______________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_call_log.py:27: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464f1b97391ab0acc442d84e8f7', '2026-01-12 22:47:53.017629', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_function_data_output_orm_creation_minimal _______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464f35773e2a25c429daa584a23', '2026-01-12 22:47:53.431461', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464f3557ee0a3406b5ee0e46316', '019bb464f3567791bd1e0102c121c830')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___ ERROR at setup of test_function_data_output_orm_creation_with_all_fields ___
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464f5a675a0b35cad5b5a192e19', '2026-01-12 22:47:54.022630', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464f5a472508a4c63dd2eacfaed', '019bb464f5a579c2bc24ba927605dcbb')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_____ ERROR at setup of test_function_data_output_orm_persist_to_database ______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464f7457a03aa073ec221eb59bd', '2026-01-12 22:47:54.437029', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464f74371b0a189ff85003a6bd2', '019bb464f744704093c88322084a447a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_function_data_output_orm_data_type_values _______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464f8da7153aa2aad0e2a9693b6', '2026-01-12 22:47:54.842833', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464f8d97202b34e589bcef9cfb3', '019bb464f8da7153aa2aacfb0c7d6459')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____ ERROR at setup of test_function_data_output_orm_spatial_context_values ____
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464fa7b7a21a8727dca13b5b8b1', '2026-01-12 22:47:55.259531', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464fa7974c3b8472ef582bf8843', '019bb464fa7a7bc0b114262863eca9e9')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_function_data_output_orm_numeric_data _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464fc157361b3790604ff2d3382', '2026-01-12 22:47:55.669663', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464fc147410a6c98e9483d7cb99', '019bb464fc147410a6c98ea6e454d599')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_function_data_output_orm_json_data ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464fde47e229d1b8800cd8a09a3', '2026-01-12 22:47:56.132847', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464fde37b93aa0bb4ee62930569', '019bb464fde47e229d1b87f746cc1a2a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_function_data_output_orm_text_data ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb464ff7c7a33becfa36de1639a5a', '2026-01-12 22:47:56.540531', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb464ff7a7e21966d5dcd4479a923', '019bb464ff7b7100baf9a54228f65815')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_function_data_output_orm_binary_data __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465011d7ca1965e88c66702522d', '2026-01-12 22:47:56.957614', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465011c7c028234f369b98b92c0', '019bb465011c7c028234f37fc54390bb')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__ ERROR at setup of test_function_data_output_orm_spatial_coordinates_jsonb ___
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46502b878f2ad40516f35b8e291', '2026-01-12 22:47:57.368142', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46502b677b296664287bac34270', '019bb46502b77a6188ae28d8e12c9191')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
________ ERROR at setup of test_function_data_output_orm_metadata_jsonb ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465045b7620a0cefbc712dade52', '2026-01-12 22:47:57.787317', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46504597a3098c49a850c1808a7', '019bb465045a70938f66052b49e12b87')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_function_data_output_orm_file_path ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46505f477c28c97bd74281d964a', '2026-01-12 22:47:58.196360', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46505f277b38feff4e84d9ec4a5', '019bb46505f374f3b4c0b19db92b4518')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_ ERROR at setup of test_function_data_output_orm_relationship_to_protocol_run _
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465078d7fe2996a6eed4be1cd82', '2026-01-12 22:47:58.605379', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465078b7791948b782a7e696f82', '019bb465078c73d2813c1a7523df91f3')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_ ERROR at setup of test_function_data_output_orm_relationship_to_function_call_log _
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465092579b396de731936cac7af', '2026-01-12 22:47:59.013617', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46509237b90bee896511776a8b8', '019bb46509247933afac81c70b4f5d61')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___ ERROR at setup of test_function_data_output_orm_relationship_to_resource ___
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4650ab872c38739f07d1b07544f', '2026-01-12 22:47:59.416974', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4650ab77500be045b966b9f176e', '019bb4650ab872c38739f06cff65dbae')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___ ERROR at setup of test_function_data_output_orm_relationship_to_machine ____
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4650c517f82bc13c477a5cbe4ed', '2026-01-12 22:47:59.825701', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4650c507f03b5981fa9f78c8cfe', '019bb4650c517f82bc13c46b914dbea5')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______ ERROR at setup of test_function_data_output_orm_query_by_data_type ______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4650def7203981f02df5d4b1554', '2026-01-12 22:48:00.239879', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4650dee7bf2ab1d961e94e7ab00', '019bb4650def7203981f02c3e28dc74f')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____ ERROR at setup of test_function_data_output_orm_query_by_protocol_run _____
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4650f887401833891ac80baa109', '2026-01-12 22:48:00.648058', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4650f8676d3ba7b28470be00e17', '019bb4650f877d43b653e9d3fb08caa1')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______ ERROR at setup of test_function_data_output_orm_query_by_resource _______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_data_output.py:71: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465117470409127e1d29a39e755', '2026-01-12 22:48:01.140833', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46511737093aeb214d471c020df', '019bb465117470409127e1c447db1550')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_____________ ERROR at setup of test_protocol_run_creation_minimal _____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4652d487a13b4f6e9f74423e3b5', '2026-01-12 22:48:08.264034', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_protocol_run_creation_with_all_fields _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4652ee87341b584c353f3d35be6', '2026-01-12 22:48:08.680236', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___________ ERROR at setup of test_protocol_run_persist_to_database ____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465308c728290218d246b68e186', '2026-01-12 22:48:09.100531', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____________ ERROR at setup of test_protocol_run_status_transitions ____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465322e77418774ed105e217712', '2026-01-12 22:48:09.518422', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______________ ERROR at setup of test_protocol_run_timing_fields _______________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46533be794396a62aafd1f83acc', '2026-01-12 22:48:09.918242', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_protocol_run_input_parameters_jsonb __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46535547a10a6a6fe56d61cf370', '2026-01-12 22:48:10.324251', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_protocol_run_resolved_assets_jsonb ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46536e47682919ba3112b99cb3f', '2026-01-12 22:48:10.724898', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____________ ERROR at setup of test_protocol_run_output_data_jsonb _____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46538b877d0821837ed104ccaa8', '2026-01-12 22:48:11.192460', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______________ ERROR at setup of test_protocol_run_state_jsonb ________________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4653a537f41ae1fb418bb8648cf', '2026-01-12 22:48:11.603534', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___________ ERROR at setup of test_protocol_run_data_directory_path ____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4653bff7c43ae7cad3689dd5425', '2026-01-12 22:48:12.031433', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_protocol_run_created_by_user_jsonb ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4653da675e3aea9521c3e11e3e7', '2026-01-12 22:48:12.454175', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____________ ERROR at setup of test_protocol_run_continuation_chain ____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4653f4f79729061bfe8a5f19764', '2026-01-12 22:48:12.879769', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_____________ ERROR at setup of test_protocol_run_query_by_status ______________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465410071c18a31b84c9e5a87eb', '2026-01-12 22:48:13.312316', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____________ ERROR at setup of test_protocol_run_query_by_protocol _____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46542fa76919063bf8d6882aa40', '2026-01-12 22:48:13.818481', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___________________ ERROR at setup of test_protocol_run_repr ___________________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_run.py:26: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46544ad7a92b5134b9f61e21ae1', '2026-01-12 22:48:14.253116', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_schedule_entry_orm_creation_minimal __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4654a8370a19bf5e8572d92c808', '2026-01-12 22:48:15.747363', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4654a8173428efb20b98d2eefe6', '019bb4654a8275308f18bcab6307d894')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______ ERROR at setup of test_schedule_entry_orm_creation_with_all_fields ______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4654c667d6197d21039de0c696e', '2026-01-12 22:48:16.230489', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4654c647d71849826f658b9c6af', '019bb4654c657c63bb89d0b3ec7e4ced')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
________ ERROR at setup of test_schedule_entry_orm_persist_to_database _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4654e097a409544ae706e75766b', '2026-01-12 22:48:16.649179', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4654e077911b633a99446433498', '019bb4654e087203a863f3c074ad799e')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_schedule_entry_orm_status_transitions _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4654faf7ed3be0a0b80095d94ae', '2026-01-12 22:48:17.071163', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4654fad733390643f387ef190ff', '019bb4654fae70e2b6212e09a802ae4b')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_schedule_entry_orm_priority_ordering __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465515c7391a65f933b722710f7', '2026-01-12 22:48:17.500843', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465515b7050ba059a760fe13e93', '019bb465515c7391a65f932fa00c31bb')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_schedule_entry_orm_timestamp_fields __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465530d7bb3b3b019d80790a58d', '2026-01-12 22:48:17.933072', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465530b7ff3a57e33d30051bad4', '019bb465530c7c5298dc0084dddc315a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______ ERROR at setup of test_schedule_entry_orm_asset_requirements_jsonb ______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46554a477a3a8dcc07f6fb7e4ed', '2026-01-12 22:48:18.340260', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46554a27f739d32f1827fb4d5e1', '019bb46554a37cb296e9530167d66b65')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_schedule_entry_orm_celery_integration _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46556417cf09b8c5e93b96176fd', '2026-01-12 22:48:18.753015', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465563f79929c16f462293624d6', '019bb46556407e91b8d715c6fbdf434f')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____________ ERROR at setup of test_schedule_entry_orm_retry_logic _____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46557d978e0b49901f5460c140d', '2026-01-12 22:48:19.161950', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46557d870509b007010ae6376d3', '019bb46557d978e0b49901ea51de1c61')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_schedule_entry_orm_user_params_jsonb __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46559727d63ba079c4a3ba0d0bb', '2026-01-12 22:48:19.570057', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46559707823a92e6c9b7d780eb3', '019bb465597175929f463a09b095b8cc')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____ ERROR at setup of test_schedule_entry_orm_relationship_to_protocol_run ____
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4655b0c71d3b048611989960362', '2026-01-12 22:48:19.981007', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4655b0b7693b6b399d9138a0b69', '019bb4655b0c71d3b04861009944591a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_schedule_entry_orm_query_by_status ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4655ca97a00a622d3083c196a4b', '2026-01-12 22:48:20.393209', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4655ca77b52a9d72788f2cd8c0b', '019bb4655ca87fb18d04c7d904427dda')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
________ ERROR at setup of test_schedule_entry_orm_query_ready_entries _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_entry.py:64: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4655e457000b7136c9cd1d5a554', '2026-01-12 22:48:20.805721', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4655e4376619b88bd73a99babb4', '019bb4655e447923bf466a617b6016e0')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_schedule_history_orm_creation_minimal _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46560337002b0bb32788b533c65', '2026-01-12 22:48:21.299154', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465603171038ddb0f57f449090c', '019bb4656032743396052f06e84589ea')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_____ ERROR at setup of test_schedule_history_orm_creation_with_all_fields _____
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46561da7b129e3a39b203755ac9', '2026-01-12 22:48:21.722597', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46561d87713aff7acec17013906', '019bb46561d97fa0a3879c0cf19e226c')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_schedule_history_orm_persist_to_database ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46563817e92a41921502b902524', '2026-01-12 22:48:22.145411', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465637f727086171a80974b183b', '019bb46563807ed2b0e7983bb745f85c')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_schedule_history_orm_all_event_types __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46565377232b125b670c2d6c933', '2026-01-12 22:48:22.583734', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465653677f1b5e491f7b2321d48', '019bb46565377232b125b660630d411a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
________ ERROR at setup of test_schedule_history_orm_status_transitions ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46566d17012bea982730d9f6475', '2026-01-12 22:48:22.993264', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46566cf7f23bcb7d84253aa112b', '019bb46566d07d839a2648477c77f7c1')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___________ ERROR at setup of test_schedule_history_orm_event_timing ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465689a76019cd2ca2fc223bdcb', '2026-01-12 22:48:23.450889', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46568997532a77221f10bc3d009', '019bb465689a76019cd2ca15f6639cf1')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_schedule_history_orm_event_data_jsonb _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4656a357d91bc89f2625da04a48', '2026-01-12 22:48:23.861695', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4656a337d83a8b1d08b9fd8d20f', '019bb4656a347973a02967263ac338b6')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_schedule_history_orm_error_tracking __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4656bcd7a228c18ad6e1df4c983', '2026-01-12 22:48:24.269579', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4656bcb777391e5c97df59fa1f5', '019bb4656bcc7c219ecb100d2cf79d83')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
________ ERROR at setup of test_schedule_history_orm_all_trigger_types _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4656d6e7f50b08b404acc6b548a', '2026-01-12 22:48:24.686493', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4656d6c755188a378f9ed574a60', '019bb4656d6d7e11a66344016cc5940e')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_schedule_history_orm_asset_count_tracking _______
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4656f09702180815c033a2f1b29', '2026-01-12 22:48:25.097886', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4656f0871d39196e24ba2275d47', '019bb4656f09702180815bf05cc6e73a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__ ERROR at setup of test_schedule_history_orm_relationship_to_schedule_entry __
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46570a87f5395cd8e7d98376fdb', '2026-01-12 22:48:25.512066', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46570a6796088dce9399be396c0', '019bb46570a77ab39c95b1ab79ca38c9')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_schedule_history_orm_query_by_event_type ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465724b7763a407c19f74bb83cb', '2026-01-12 22:48:25.931084', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46572497af094b5957c2bf93187', '019bb465724a75508b7fbe776010a13f')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_schedule_history_orm_query_by_time_range ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465743e7000ab4747d31cbabb9a', '2026-01-12 22:48:26.430929', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb465743c77a0b009fdf356a1e493', '019bb465743e7000ab4747c62be3f59a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_schedule_history_orm_cascade_delete __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_schedule_history.py:75: in protocol_definition
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46575eb74f2bb21dacf89732a6d', '2026-01-12 22:48:26.859093', None, 'test_protocol', 'test.protocols.test_protocol', '1.0.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46575e976c38eff5adbb54c9479', '019bb46575ea77f3b8cff44c95a37591')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ ERROR at setup of test_well_data_output_orm_creation_minimal _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_well_data_output.py:59: in protocol_definition
    await db_session.commit()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1000: in commit
    await greenlet_spawn(self.sync_session.commit)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1286: in _prepare_impl
    self.session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46578427f719e50ca9883fad70b', '2026-01-12 22:48:27.458524', None, 'test_protocol', 'test.protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46578417230b73ddafdfe2ff6b3', '019bb46578417230b73ddb0934001b71')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______ ERROR at setup of test_well_data_output_orm_creation_all_fields ________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_well_data_output.py:59: in protocol_definition
    await db_session.commit()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1000: in commit
    await greenlet_spawn(self.sync_session.commit)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1286: in _prepare_impl
    self.session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4657a3972f28ab594a150ef0d4f', '2026-01-12 22:48:27.961308', None, 'test_protocol', 'test.protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4657a377520a9f490ab21a8787a', '019bb4657a387d1396ac8d269704d805')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___________ ERROR at setup of test_well_data_output_orm_persistence ____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_well_data_output.py:59: in protocol_definition
    await db_session.commit()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1000: in commit
    await greenlet_spawn(self.sync_session.commit)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1286: in _prepare_impl
    self.session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4657c277a209f92a587b6612a88', '2026-01-12 22:48:28.455749', None, 'test_protocol', 'test.protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4657c2676019c3aa213265e0fc3', '019bb4657c2676019c3aa2240f87af1e')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ ERROR at setup of test_well_data_output_orm_relationships ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_well_data_output.py:59: in protocol_definition
    await db_session.commit()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:1000: in commit
    await greenlet_spawn(self.sync_session.commit)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:1286: in _prepare_impl
    self.session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4657e077ae3a178a91475a6a391', '2026-01-12 22:48:28.935319', None, 'test_protocol', 'test.protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb4657e0572d196e76b18d7bd71bc', '019bb4657e067a91a3816413c71025b3')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
=================================== FAILURES ===================================
_________________ test_asset_reservation_orm_creation_minimal __________________
tests/models/test_domain/test_asset_reservation.py:161: in test_asset_reservation_orm_creation_minimal
    assert reservation.reserved_at is not None
E   AssertionError: assert None is not None
E    +  where None = AssetReservation(name='test_reservation', released_at=None, asset_name='test_machine_reservation', redis_lock_key='lock:019bb464-d858-7892-8794-8ac8119da167', asset_accession_id=UUID('019bb464-d858-7892-8794-8ac8119da167'), schedule_entry_accession_id=UUID('019bb464-d85c-7bd3-993e-ffc9f3b63d40'), protocol_run_accession_id=UUID('019bb464-d85b-7342-b5fc-ef093b67c1cb'), accession_id=UUID('019bb464-d85e-7560-9e49-6418ea25cdc5'), created_at=datetime.datetime(2026, 1, 12, 22, 47, 46, 526205, tzinfo=datetime.timezone.utc), updated_at=None, reserved_at=None, expires_at=None, is_active=True, status='pending', asset_type='GENERIC_ASSET', redis_lock_value=None, lock_timeout_seconds=3600, required_capabilities_json=None, estimated_usage_duration_ms=None).reserved_at
___________________ test_asset_reservation_orm_timing_fields ___________________
tests/models/test_domain/test_asset_reservation.py:317: in test_asset_reservation_orm_timing_fields
    assert reservation.reserved_at is not None
E   AssertionError: assert None is not None
E    +  where None = AssetReservation(name='test_reservation_timing', released_at=datetime.datetime(2026, 1, 12, 22, 47, 46, 623330, tzinfo=datetime.timezone.utc), asset_name='test_machine_reservation', redis_lock_key='lock:019bb464-d8bc-7292-b535-564725094c9a', asset_accession_id=UUID('019bb464-d8bc-7292-b535-564725094c9a'), schedule_entry_accession_id=UUID('019bb464-d8be-70c3-801e-2b4a120ea625'), protocol_run_accession_id=UUID('019bb464-d8bd-7b52-bd64-259bd98015c7'), accession_id=UUID('019bb464-d8bf-7593-b58e-258b460be101'), created_at=datetime.datetime(2026, 1, 12, 22, 47, 46, 623378, tzinfo=datetime.timezone.utc), updated_at=None, reserved_at=None, expires_at=None, is_active=True, status='pending', asset_type='GENERIC_ASSET', redis_lock_value=None, lock_timeout_seconds=3600, required_capabilities_json=None, estimated_usage_duration_ms=None).reserved_at
___________ test_asset_reservation_orm_relationship_to_protocol_run ____________
tests/models/test_domain/test_asset_reservation.py:382: in test_asset_reservation_orm_relationship_to_protocol_run
    await db_session.refresh(protocol_run, ["asset_reservations"])
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:329: in refresh
    await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:190: in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:3133: in refresh
    self._expire_state(state, attribute_names)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:3261: in _expire_state
    state._expire_attributes(state.dict, attribute_names)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/state.py:762: in _expire_attributes
    impl = self.manager[key].impl
           ^^^^^^^^^^^^^^^^^
E   KeyError: 'asset_reservations'
_______________ test_asset_reservation_orm_relationship_to_asset _______________
tests/models/test_domain/test_asset_reservation.py:434: in test_asset_reservation_orm_relationship_to_asset
    reservation.asset = machine_asset
    ^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlmodel/main.py:806: in __setattr__
    super().__setattr__(name, value)
.venv/lib/python3.13/site-packages/pydantic/main.py:1033: in __setattr__
    setattr_handler(self, name, value)  # call here to not memo on possibly unknown fields
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:111: in <lambda>
    'validate_assignment': lambda model, name, val: model.__pydantic_validator__.validate_assignment(model, name, val),  # pyright: ignore[reportAssignmentType]
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for AssetReservation
E   asset
E     Object has no attribute 'asset' [type=no_such_attribute, input_value=Machine(name='test_machin...ition_accession_id=None), input_type=Machine]
E       For further information visit https://errors.pydantic.dev/2.12/v/no_such_attribute
____________ test_file_system_protocol_source_orm_creation_minimal _____________
tests/models/test_domain/test_file_system_protocol_source.py:26: in test_file_system_protocol_source_orm_creation_minimal
    assert source.status == ProtocolSourceStatusEnum.ACTIVE  # Default
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: assert 'active' == <ProtocolSourceStatusEnum.ACTIVE: 'active'>
E    +  where 'active' = FileSystemProtocolSource(name='test_fs_source', accession_id=UUID('019bb464-db4f-70f2-9f3e-891a0e80eda6'), created_at=datetime.datetime(2026, 1, 12, 22, 47, 47, 279027, tzinfo=datetime.timezone.utc), updated_at=None, base_path='', is_recursive=True, status='active').status
E    +  and   <ProtocolSourceStatusEnum.ACTIVE: 'active'> = ProtocolSourceStatusEnum.ACTIVE
________ test_file_system_protocol_source_orm_creation_with_all_fields _________
tests/models/test_domain/test_file_system_protocol_source.py:48: in test_file_system_protocol_source_orm_creation_with_all_fields
    assert source.status == ProtocolSourceStatusEnum.INACTIVE
E   AssertionError: assert 'inactive' == <ProtocolSourceStatusEnum.INACTIVE: 'inactive'>
E    +  where 'inactive' = FileSystemProtocolSource(name='full_fs_source', base_path='/opt/protocols/library', is_recursive=False, status='inactive', accession_id=UUID('019bb464-db59-7bd2-88d9-3584d352efb0'), created_at=datetime.datetime(2026, 1, 12, 22, 47, 47, 289636, tzinfo=datetime.timezone.utc), updated_at=None).status
E    +  and   <ProtocolSourceStatusEnum.INACTIVE: 'inactive'> = ProtocolSourceStatusEnum.INACTIVE
___________ test_file_system_protocol_source_orm_persist_to_database ___________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'active'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_file_system_protocol_source.py:65: in test_file_system_protocol_source_orm_persist_to_database
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'active' is not among the defined enum values. Enum name: ps_status_enum_fs_v3. Possible values: ACTIVE, ARCHIVED, SYNCING, ..., PENDING_DEL..
_________ test_file_system_protocol_source_orm_unique_name_constraint __________
tests/models/test_domain/test_file_system_protocol_source.py:103: in test_file_system_protocol_source_orm_unique_name_constraint
    with pytest.raises(IntegrityError):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'sqlalchemy.exc.IntegrityError'>
___________ test_file_system_protocol_source_orm_status_transitions ____________
tests/models/test_domain/test_file_system_protocol_source.py:129: in test_file_system_protocol_source_orm_status_transitions
    assert source.status == status
E   AssertionError: assert 'active' == <ProtocolSourceStatusEnum.ACTIVE: 'active'>
E    +  where 'active' = FileSystemProtocolSource(name='active_fs', base_path='/opt/protocols/active_fs', status='active', accession_id=UUID('019bb464-dc51-7393-8ebb-96629a1a2b22'), created_at=datetime.datetime(2026, 1, 12, 22, 47, 47, 537972, tzinfo=datetime.timezone.utc), updated_at=None, is_recursive=True).status
______________ test_file_system_protocol_source_orm_query_by_name ______________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'active'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_file_system_protocol_source.py:171: in test_file_system_protocol_source_orm_query_by_name
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'active' is not among the defined enum values. Enum name: ps_status_enum_fs_v3. Possible values: ACTIVE, ARCHIVED, SYNCING, ..., PENDING_DEL..
____________ test_file_system_protocol_source_orm_update_base_path _____________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'active'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_file_system_protocol_source.py:203: in test_file_system_protocol_source_orm_update_base_path
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'active' is not among the defined enum values. Enum name: ps_status_enum_fs_v3. Possible values: ACTIVE, ARCHIVED, SYNCING, ..., PENDING_DEL..
_____________ test_file_system_protocol_source_orm_query_by_status _____________
tests/models/test_domain/test_file_system_protocol_source.py:256: in test_file_system_protocol_source_orm_query_by_status
    assert len(active_sources) >= 1
E   assert 0 >= 1
E    +  where 0 = len([])
____________ test_function_protocol_definition_orm_creation_minimal ____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:56: in test_function_protocol_definition_orm_creation_minimal
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46513167dd380151f2ca7e59757', '2026-01-12 22:48:01.558557', None, 'test_protocol', 'test.protocols.test_protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ test_function_protocol_definition_orm_unique_constraint_git __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:191: in test_function_protocol_definition_orm_unique_constraint_git
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46514cc7b93b82b685b3e0b8d83', '2026-01-12 22:48:01.996269', None, 'unique_protocol', 'protocols.unique_protocol', '1.0.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, 'commit123', 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, '019bb46514cb7fe085942a034f977595', None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ test_function_protocol_definition_orm_unique_constraint_fs __________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.module_name

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:229: in test_function_protocol_definition_orm_unique_constraint_fs
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.module_name
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465166b7f13b7747dc96342006f', '2026-01-12 22:48:02.411219', None, 'unique_fs_protocol', 'protocols.unique_fs_protocol', '1.0.0', None, 'lib/unique.py', None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, '019bb465166a75a2856d514fed03861a')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___________ test_function_protocol_definition_orm_is_top_level_flag ____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:263: in test_function_protocol_definition_orm_is_top_level_flag
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46517fa7580a6af72b4ced39262', '2026-01-12 22:48:02.809824', None, 'top_level_protocol', 'protocols.top_level_protocol', '0.1.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
__________ test_function_protocol_definition_orm_solo_execution_flag ___________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:293: in test_function_protocol_definition_orm_solo_execution_flag
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb46519907ad2adef799461adb570', '2026-01-12 22:48:03.216401', None, 'solo_protocol', 'protocols.solo_protocol', '0.1.0', None, None, None, None, 0, 1, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_________ test_function_protocol_definition_orm_preconfigure_deck_flag _________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:325: in test_function_protocol_definition_orm_preconfigure_deck_flag
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4651b257f52b6449fc5d3841cce', '2026-01-12 22:48:03.621231', None, 'deck_protocol', 'protocols.deck_protocol', '0.1.0', None, None, None, None, 0, 0, 1, 1, 'deck', 'protocols.setup_deck', None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____________ test_function_protocol_definition_orm_deprecated_flag _____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:347: in test_function_protocol_definition_orm_deprecated_flag
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4651cb57f91ab72ed73a4abce39', '2026-01-12 22:48:04.021335', None, 'old_protocol', 'protocols.old_protocol', '0.9.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 1, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______________ test_function_protocol_definition_orm_jsonb_tags _______________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:385: in test_function_protocol_definition_orm_jsonb_tags
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4651e4b7ba3861400ffabcf3def', '2026-01-12 22:48:04.427638', None, 'tagged_protocol', 'protocols.tagged_protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, 'liquid_handling', 0, None, None, None, None, None, None, None, None, '{"category": "liquid_handling", "complexity": "advanced", "requires_calibration": true, "hardware": ["pipette", "plate_reader"]}', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______________ test_function_protocol_definition_orm_state_param _______________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:408: in test_function_protocol_definition_orm_state_param
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4651fe27b70845326709b386d37', '2026-01-12 22:48:04.834703', None, 'stateful_protocol', 'protocols.stateful_protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, 'state', None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______________ test_function_protocol_definition_orm_query_by_fqn ______________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:425: in test_function_protocol_definition_orm_query_by_fqn
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb465217970628e71b9e1496f7015', '2026-01-12 22:48:05.241246', None, 'queryable_protocol', 'protocols.queryable.test_protocol', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
____________ test_function_protocol_definition_orm_query_top_level _____________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1936: in _exec_single_context
    self.dialect.do_executemany(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:948: in do_executemany
    cursor.executemany(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:195: in executemany
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:189: in executemany
    self.await_(_cursor.executemany(operation, seq_of_parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:47: in executemany
    await self._execute(self._cursor.executemany, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: function_protocol_definitions.source_file_path

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_function_protocol_definition.py:469: in test_function_protocol_definition_orm_query_top_level
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1936: in _exec_single_context
    self.dialect.do_executemany(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:948: in do_executemany
    cursor.executemany(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:195: in executemany
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:189: in executemany
    self.await_(_cursor.executemany(operation, seq_of_parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:47: in executemany
    await self._execute(self._cursor.executemany, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: function_protocol_definitions.source_file_path
E   [SQL: INSERT INTO function_protocol_definitions (accession_id, created_at, updated_at, name, fqn, version, description, source_file_path, module_name, function_name, is_top_level, solo_execution, preconfigure_deck, requires_deck, deck_param_name, deck_construction_function_fqn, deck_layout_path, state_param_name, category, deprecated, source_hash, graph_cached_at, simulation_version, simulation_cached_at, bytecode_python_version, bytecode_cache_version, bytecode_cached_at, commit_hash, tags, hardware_requirements_json, data_views_json, computation_graph_json, setup_instructions_json, simulation_result_json, inferred_requirements_json, failure_modes_json, cached_bytecode, source_repository_accession_id, file_system_source_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: [('019bb46523117ef38eedc8a434353eea', '2026-01-12 22:48:05.649225', None, 'top_level_1', 'protocols.top_level_1', '0.1.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None), ('019bb46523117ef38eedc8c0aa42b38b', '2026-01-12 22:48:05.649499', None, 'top_level_2', 'protocols.top_level_2', '0.1.0', None, None, None, None, 1, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None), ('019bb46523117ef38eedc8e097e3423c', '2026-01-12 22:48:05.649716', None, 'helper', 'protocols.helper', '0.1.0', None, None, None, None, 0, 0, 0, 1, None, None, None, None, None, 0, None, None, None, None, None, None, None, None, 'null', 'null', 'null', 'null', 'null', 'null', 'null', 'null', None, None, None)]]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
___________________ test_machine_orm_creation_with_defaults ____________________
tests/models/test_domain/test_machine.py:36: in test_machine_orm_creation_with_defaults
    assert machine.status == MachineStatusEnum.OFFLINE
E   AssertionError: assert 'OFFLINE' == <MachineStatusEnum.OFFLINE: 'OFFLINE'>
E    +  where 'OFFLINE' = Machine(name='test_machine', asset_type='MACHINE', fqn='test.machine.Fqn', accession_id=UUID('019bb465-24fc-76d0-83c4-f04e7cdec8e2'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 6, 140372, tzinfo=datetime.timezone.utc), updated_at=None, location=None, properties_json=None, plr_state=None, plr_definition=None, machine_category='Unknown', description=None, manufacturer=None, model=None, serial_number=None, location_label=None, installation_date=None, status='OFFLINE', status_details=None, is_simulation_override=None, last_seen_online=None, maintenance_enabled=True, connection_info=None, user_configured_capabilities=None, maintenance_schedule_json=None, last_maintenance_json=None, workcell_accession_id=None, resource_counterpart_accession_id=None, deck_child_accession_id=None, deck_child_definition_accession_id=None, current_protocol_run_accession_id=None, machine_definition_accession_id=None).status
E    +  and   <MachineStatusEnum.OFFLINE: 'OFFLINE'> = MachineStatusEnum.OFFLINE
_____________________ test_machine_orm_persist_to_database _____________________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'LiquidHandler'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_machine.py:69: in test_machine_orm_persist_to_database
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'LiquidHandler' is not among the defined enum values. Enum name: machinecategoryenum. Possible values: LIQUID_HAND.., PLATE_READE.., INCUBATOR, ..., UNKNOWN
____________________ test_machine_orm_unique_serial_number _____________________
tests/models/test_domain/test_machine.py:146: in test_machine_orm_unique_serial_number
    with pytest.raises(IntegrityError):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'sqlalchemy.exc.IntegrityError'>
_________________ test_machine_orm_with_workcell_relationship __________________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'Unknown'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_machine.py:180: in test_machine_orm_with_workcell_relationship
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'Unknown' is not among the defined enum values. Enum name: machinecategoryenum. Possible values: LIQUID_HAND.., PLATE_READE.., INCUBATOR, ..., UNKNOWN
_____________________ test_machine_orm_status_enum_values ______________________
tests/models/test_domain/test_machine.py:214: in test_machine_orm_status_enum_values
    assert machine.status == status
E   AssertionError: assert 'AVAILABLE' == <MachineStatusEnum.AVAILABLE: 'AVAILABLE'>
E    +  where 'AVAILABLE' = Machine(name='machine_AVAILABLE', asset_type='MACHINE', fqn='test.machine.AVAILABLE', status='AVAILABLE', accession_id=UUID('019bb465-2770-7861-b660-c6fdeda795bc'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 6, 768195, tzinfo=datetime.timezone.utc), updated_at=None, location=None, properties_json=None, plr_state=None, plr_definition=None, machine_category='Unknown', description=None, manufacturer=None, model=None, serial_number=None, location_label=None, installation_date=None, status_details=None, is_simulation_override=None, last_seen_online=None, maintenance_enabled=True, connection_info=None, user_configured_capabilities=None, maintenance_schedule_json=None, last_maintenance_json=None, workcell_accession_id=None, resource_counterpart_accession_id=None, deck_child_accession_id=None, deck_child_definition_accession_id=None, current_protocol_run_accession_id=None, machine_definition_accession_id=None).status
____________________ test_machine_orm_category_enum_values _____________________
tests/models/test_domain/test_machine.py:242: in test_machine_orm_category_enum_values
    assert machine.machine_category == category
E   AssertionError: assert 'LiquidHandler' == <MachineCategoryEnum.LIQUID_HANDLER: 'LiquidHandler'>
E    +  where 'LiquidHandler' = Machine(name='machine_LiquidHandler', asset_type='MACHINE', fqn='test.machine.LiquidHandler', machine_category='LiquidHandler', accession_id=UUID('019bb465-277d-76a2-8130-5371f5b6c0fc'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 6, 781610, tzinfo=datetime.timezone.utc), updated_at=None, location=None, properties_json=None, plr_state=None, plr_definition=None, description=None, manufacturer=None, model=None, serial_number=None, location_label=None, installation_date=None, status='OFFLINE', status_details=None, is_simulation_override=None, last_seen_online=None, maintenance_enabled=True, connection_info=None, user_configured_capabilities=None, maintenance_schedule_json=None, last_maintenance_json=None, workcell_accession_id=None, resource_counterpart_accession_id=None, deck_child_accession_id=None, deck_child_definition_accession_id=None, current_protocol_run_accession_id=None, machine_definition_accession_id=None).machine_category
_________________ test_machine_definition_orm_creation_minimal _________________
tests/models/test_domain/test_machine_definition.py:31: in test_machine_definition_orm_creation_minimal
    assert machine_def.machine_category == MachineCategoryEnum.UNKNOWN  # Default
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: assert 'Unknown' == <MachineCategoryEnum.UNKNOWN: 'Unknown'>
E    +  where 'Unknown' = MachineDefinition(name='test_liquid_handler', fqn='test.machine.LiquidHandler', accession_id=UUID('019bb465-27c6-78f2-8fcf-f5877dc92b02'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 6, 854859, tzinfo=datetime.timezone.utc), updated_at=None, description=None, plr_category=None, machine_category='Unknown', material=None, manufacturer=None, model=None, size_x_mm=None, size_y_mm=None, size_z_mm=None, has_deck=False, frontend_fqn=None, plr_definition_details_json=None, rotation_json=None, setup_method_json=None, capabilities=None, compatible_backends=None, capabilities_config=None, connection_config=None, resource_definition_accession_id=None, deck_definition_accession_id=None, asset_requirement_accession_id=None).machine_category
E    +  and   <MachineCategoryEnum.UNKNOWN: 'Unknown'> = MachineCategoryEnum.UNKNOWN
_________________ test_machine_definition_orm_with_all_fields __________________
tests/models/test_domain/test_machine_definition.py:70: in test_machine_definition_orm_with_all_fields
    assert machine_def.machine_category == MachineCategoryEnum.LIQUID_HANDLER
E   AssertionError: assert 'LiquidHandler' == <MachineCategoryEnum.LIQUID_HANDLER: 'LiquidHandler'>
E    +  where 'LiquidHandler' = MachineDefinition(name='hamilton_star', fqn='pylabrobot.liquid_handling.backends.hamilton.STAR', description='Hamilton STAR liquid handler', plr_category='liquid_handler', machine_category='LiquidHandler', material='stainless_steel', manufacturer='Hamilton', model='STAR', size_x_mm=1600.0, size_y_mm=900.0, size_z_mm=800.0, has_deck=True, plr_definition_details_json={'backend_class': 'STAR', 'module': 'pylabrobot.liquid_handling.backends.hamilton'}, rotation_json={'x_deg': 0, 'y_deg': 0, 'z_deg': 0}, setup_method_json={'method_name': 'setup', 'params': {'simulate': True}}, accession_id=UUID('019bb465-27d6-71e2-9af3-c12f607f0543'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 6, 870160, tzinfo=datetime.timezone.utc), updated_at=None, frontend_fqn=None, capabilities=None, compatible_backends=None, capabilities_config=None, connection_config=None, resource_definition_accession_id=None, deck_definition_accession_id=None, asset_requirement_accession_id=None).machine_category
E    +  and   <MachineCategoryEnum.LIQUID_HANDLER: 'LiquidHandler'> = MachineCategoryEnum.LIQUID_HANDLER
_______________ test_machine_definition_orm_persist_to_database ________________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'PlateReader'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_machine_definition.py:102: in test_machine_definition_orm_persist_to_database
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'PlateReader' is not among the defined enum values. Enum name: machinecategoryenum. Possible values: LIQUID_HAND.., PLATE_READE.., INCUBATOR, ..., UNKNOWN
______________ test_machine_definition_orm_unique_name_constraint ______________
tests/models/test_domain/test_machine_definition.py:160: in test_machine_definition_orm_unique_name_constraint
    with pytest.raises(IntegrityError):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'sqlalchemy.exc.IntegrityError'>
________________ test_machine_definition_orm_machine_categories ________________
tests/models/test_domain/test_machine_definition.py:185: in test_machine_definition_orm_machine_categories
    assert machine_def.machine_category == category
E   AssertionError: assert 'LiquidHandler' == <MachineCategoryEnum.LIQUID_HANDLER: 'LiquidHandler'>
E    +  where 'LiquidHandler' = MachineDefinition(name='test_liquid_handler', fqn='test.machine.LiquidHandler', machine_category='LiquidHandler', accession_id=UUID('019bb465-28e4-79b2-99dc-dadf4d8623e3'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 7, 140434, tzinfo=datetime.timezone.utc), updated_at=None, description=None, plr_category=None, material=None, manufacturer=None, model=None, size_x_mm=None, size_y_mm=None, size_z_mm=None, has_deck=False, frontend_fqn=None, plr_definition_details_json=None, rotation_json=None, setup_method_json=None, capabilities=None, compatible_backends=None, capabilities_config=None, connection_config=None, resource_definition_accession_id=None, deck_definition_accession_id=None, asset_requirement_accession_id=None).machine_category
___________________ test_machine_definition_orm_jsonb_fields ___________________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'Unknown'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_machine_definition.py:214: in test_machine_definition_orm_jsonb_fields
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'Unknown' is not among the defined enum values. Enum name: machinecategoryenum. Possible values: LIQUID_HAND.., PLATE_READE.., INCUBATOR, ..., UNKNOWN
____________________ test_machine_definition_orm_dimensions ____________________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'Unknown'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_machine_definition.py:244: in test_machine_definition_orm_dimensions
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'Unknown' is not among the defined enum values. Enum name: machinecategoryenum. Possible values: LIQUID_HAND.., PLATE_READE.., INCUBATOR, ..., UNKNOWN
______ TestMachineDefinitionSchemas.test_machine_definition_base_minimal _______
tests/models/test_domain/test_machine_definition.py:302: in test_machine_definition_base_minimal
    assert machine_def.machine_category is None
E   AssertionError: assert <MachineCategoryEnum.UNKNOWN: 'Unknown'> is None
E    +  where <MachineCategoryEnum.UNKNOWN: 'Unknown'> = MachineDefinitionBase(accession_id=UUID('019bb465-2ad2-7dc0-9892-311c9503718a'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 7, 634081, tzinfo=datetime.timezone.utc), updated_at=None, name='minimal_machine', fqn='test.minimal.Machine', description=None, plr_category=None, machine_category=<MachineCategoryEnum.UNKNOWN: 'Unknown'>, material=None, manufacturer=None, model=None, size_x_mm=None, size_y_mm=None, size_z_mm=None, has_deck=False, frontend_fqn=None).machine_category
__ TestMachineDefinitionSchemas.test_machine_definition_base_with_all_fields ___
tests/models/test_domain/test_machine_definition.py:342: in test_machine_definition_base_with_all_fields
    assert machine_def.nominal_volume_ul == 1000.0
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'MachineDefinitionBase' object has no attribute 'nominal_volume_ul'
_________ TestMachineDefinitionSchemas.test_machine_definition_update __________
tests/models/test_domain/test_machine_definition.py:390: in test_machine_definition_update
    assert update_partial.machine_category == "PlateReader"  # Serialized to string
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: assert <MachineCategoryEnum.PLATE_READER: 'PlateReader'> == 'PlateReader'
E    +  where <MachineCategoryEnum.PLATE_READER: 'PlateReader'> = MachineDefinitionUpdate(name=None, fqn='test.update.Machine2', description='Updated description', plr_category=None, machine_category=<MachineCategoryEnum.PLATE_READER: 'PlateReader'>, material=None, manufacturer='Updated Corp', model=None, size_x_mm=1700.0, size_y_mm=None, size_z_mm=None, has_deck=None, frontend_fqn=None, plr_definition_details_json=None, rotation_json=None, setup_method_json=None).machine_category
____ TestMachineDefinitionSchemas.test_machine_definition_jsonb_validation _____
tests/models/test_domain/test_machine_definition.py:569: in test_machine_definition_jsonb_validation
    assert machine_def.plr_definition_details_json == plr_details
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'MachineDefinitionCreate' object has no attribute 'plr_definition_details_json'
________________ test_parameter_definition_orm_creation_minimal ________________
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: parameter_definitions.name

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_parameter_definition.py:41: in test_parameter_definition_orm_creation_minimal
    await db_session.flush()
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4331: in flush
    self._flush(objects)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:4427: in _flush
    flush_context.execute()
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py:1048: in _emit_insert_statements
    result = connection.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1419: in execute
    return meth(
.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py:951: in do_execute
    cursor.execute(statement, parameters)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:340: in _handle_exception
    raise error
.venv/lib/python3.13/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
.venv/lib/python3.13/site-packages/aiosqlite/cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:122: in _execute
    return await future
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/aiosqlite/core.py:105: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: parameter_definitions.name
E   [SQL: INSERT INTO parameter_definitions (accession_id, created_at, updated_at, name, type_hint, fqn, is_deck_param, optional, default_value_repr, description, field_type, is_itemized, linked_to, constraints_json, itemized_spec_json, ui_hint_json, protocol_definition_accession_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('019bb4652b5079c0802e59e689035574', '2026-01-12 22:48:07.760513', None, None, None, None, 0, 0, None, None, None, 0, None, 'null', 'null', 'null', '019bb4652b4f721381d100c1578808a8')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
_______________ test_parameter_definition_orm_unique_constraint ________________
tests/models/test_domain/test_parameter_definition.py:160: in test_parameter_definition_orm_unique_constraint
    with pytest.raises(IntegrityError):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'sqlalchemy.exc.IntegrityError'>
_____________ test_protocol_source_repository_orm_creation_minimal _____________
tests/models/test_domain/test_protocol_source_repository.py:28: in test_protocol_source_repository_orm_creation_minimal
    assert repo.status == ProtocolSourceStatusEnum.ACTIVE  # Default
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: assert 'active' == <ProtocolSourceStatusEnum.ACTIVE: 'active'>
E    +  where 'active' = ProtocolSourceRepository(name='test_repo', accession_id=UUID('019bb465-464a-7031-b9b7-d9b3a8cc0216'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 14, 666235, tzinfo=datetime.timezone.utc), updated_at=None, git_url='', default_ref='main', local_checkout_path=None, last_synced_commit=None, status='active', auto_sync_enabled=True).status
E    +  and   <ProtocolSourceStatusEnum.ACTIVE: 'active'> = ProtocolSourceStatusEnum.ACTIVE
_________ test_protocol_source_repository_orm_creation_with_all_fields _________
tests/models/test_domain/test_protocol_source_repository.py:56: in test_protocol_source_repository_orm_creation_with_all_fields
    assert repo.status == ProtocolSourceStatusEnum.SYNCING
E   AssertionError: assert 'syncing' == <ProtocolSourceStatusEnum.SYNCING: 'syncing'>
E    +  where 'syncing' = ProtocolSourceRepository(name='full_repo', git_url='https://github.com/example/protocols.git', default_ref='develop', local_checkout_path='/opt/protocols/example', last_synced_commit='abc123def456', status='syncing', auto_sync_enabled=False, accession_id=UUID('019bb465-4654-7f53-86bc-f9d6fed2dc77'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 14, 676265, tzinfo=datetime.timezone.utc), updated_at=None).status
E    +  and   <ProtocolSourceStatusEnum.SYNCING: 'syncing'> = ProtocolSourceStatusEnum.SYNCING
___________ test_protocol_source_repository_orm_persist_to_database ____________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'active'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_source_repository.py:75: in test_protocol_source_repository_orm_persist_to_database
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'active' is not among the defined enum values. Enum name: ps_status_enum_repo_v3. Possible values: ACTIVE, ARCHIVED, SYNCING, ..., PENDING_DEL..
__________ test_protocol_source_repository_orm_unique_name_constraint __________
tests/models/test_domain/test_protocol_source_repository.py:114: in test_protocol_source_repository_orm_unique_name_constraint
    with pytest.raises(IntegrityError):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'sqlalchemy.exc.IntegrityError'>
____________ test_protocol_source_repository_orm_status_transitions ____________
tests/models/test_domain/test_protocol_source_repository.py:140: in test_protocol_source_repository_orm_status_transitions
    assert repo.status == status
E   AssertionError: assert 'active' == <ProtocolSourceStatusEnum.ACTIVE: 'active'>
E    +  where 'active' = ProtocolSourceRepository(name='active_repo', git_url='https://github.com/example/active_repo.git', status='active', accession_id=UUID('019bb465-474f-77a1-beb8-117b0adc6ca7'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 14, 927113, tzinfo=datetime.timezone.utc), updated_at=None, default_ref='main', local_checkout_path=None, last_synced_commit=None, auto_sync_enabled=True).status
______________ test_protocol_source_repository_orm_query_by_name _______________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'active'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_source_repository.py:182: in test_protocol_source_repository_orm_query_by_name
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'active' is not among the defined enum values. Enum name: ps_status_enum_repo_v3. Possible values: ACTIVE, ARCHIVED, SYNCING, ..., PENDING_DEL..
____________ test_protocol_source_repository_orm_update_commit_hash ____________
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'active'

The above exception was the direct cause of the following exception:
tests/models/test_domain/test_protocol_source_repository.py:215: in test_protocol_source_repository_orm_update_commit_hash
    result = await db_session.execute(
.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:449: in execute
    result = await greenlet_spawn(
.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2351: in execute
    return self._execute_internal(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2249: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:309: in orm_execute_statement
    return cls.orm_setup_cursor_result(
.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py:616: in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:262: in instances
    _prebuffered = list(chunks(None))
                   ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/orm/loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'active' is not among the defined enum values. Enum name: ps_status_enum_repo_v3. Possible values: ACTIVE, ARCHIVED, SYNCING, ..., PENDING_DEL..
________________ TestResourceSchemas.test_resource_base_minimal ________________
tests/models/test_domain/test_resource.py:297: in test_resource_base_minimal
    assert resource.fqn is None
E   AssertionError: assert '' is None
E    +  where '' = ResourceBase(accession_id=UUID('019bb465-497c-7110-9047-c3a4753db0d8'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 15, 484279, tzinfo=datetime.timezone.utc), updated_at=None, name='test_resource', asset_type='RESOURCE', fqn='', location=None, status=<ResourceStatusEnum.UNKNOWN: 'unknown'>, status_details=None, location_label=None, current_deck_position_name=None, resource_definition_accession_id=None).fqn
_________ TestResourceSchemas.test_resource_response_from_orm_minimal __________
tests/models/test_domain/test_resource.py:571: in test_resource_response_from_orm_minimal
    assert response.parent_accession_id is None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'ResourceRead' object has no attribute 'parent_accession_id'. Did you mean: 'deck_accession_id'?
_____ TestResourceDefinitionSchemas.test_resource_definition_base_minimal ______
tests/models/test_domain/test_resource_definition.py:283: in test_resource_definition_base_minimal
    resource_def = ResourceDefinitionBase()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.13/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for ResourceDefinitionBase
E   fqn
E     Field required [type=missing, input_value={}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_ TestResourceDefinitionSchemas.test_resource_definition_base_with_all_fields __
tests/models/test_domain/test_resource_definition.py:301: in test_resource_definition_base_with_all_fields
    resource_def = ResourceDefinitionBase(
.venv/lib/python3.13/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.13/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for ResourceDefinitionBase
E   fqn
E     Field required [type=missing, input_value={'resource_type': 'plate'...'ordering': 'Cat #3650'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
__________________________ test_praxis_base_defaults ___________________________
tests/models/test_domain/test_sqlmodel_base.py:28: in test_praxis_base_defaults
    assert model.properties_json is None
           ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'MockModel' object has no attribute 'properties_json'
_____________________ test_sqlmodel_metadata_registration ______________________
tests/models/test_domain/test_sqlmodel_base.py:51: in test_sqlmodel_metadata_registration
    assert "mockmodel" in SQLModel.metadata.tables
E   AssertionError: assert 'mockmodel' in FacadeDict({'scheduler_metrics_mv': Table('scheduler_metrics_mv', MetaData(), Column('metric_timestamp', DateTime(), table=<scheduler_metrics_mv>, primary_key=True, nullable=False), Column('protocols_scheduled', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('protocols_completed', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('protocols_failed', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('protocols_cancelled', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('avg_queue_wait_time_ms', Float(), table=<scheduler_metrics_mv>, nullable=False), Column('avg_execution_time_ms', Float(), table=<scheduler_metrics_mv>, nullable=False), schema=None)})
E    +  where FacadeDict({'scheduler_metrics_mv': Table('scheduler_metrics_mv', MetaData(), Column('metric_timestamp', DateTime(), table=<scheduler_metrics_mv>, primary_key=True, nullable=False), Column('protocols_scheduled', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('protocols_completed', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('protocols_failed', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('protocols_cancelled', Integer(), table=<scheduler_metrics_mv>, nullable=False), Column('avg_queue_wait_time_ms', Float(), table=<scheduler_metrics_mv>, nullable=False), Column('avg_execution_time_ms', Float(), table=<scheduler_metrics_mv>, nullable=False), schema=None)}) = MetaData().tables
E    +    where MetaData() = SQLModel.metadata
___________________ test_workcell_orm_unique_name_constraint ___________________
tests/models/test_domain/test_workcell.py:93: in test_workcell_orm_unique_name_constraint
    with pytest.raises(IntegrityError):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'sqlalchemy.exc.IntegrityError'>
_______________ test_workcell_orm_relationships_empty_by_default _______________
tests/models/test_domain/test_workcell.py:109: in test_workcell_orm_relationships_empty_by_default
    assert workcell.decks == []
           ^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'Workcell' object has no attribute 'decks'
________________ TestWorkcellSchemas.test_workcell_base_minimal ________________
tests/models/test_domain/test_workcell.py:143: in test_workcell_base_minimal
    assert workcell.fqn is None
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'WorkcellBase' object has no attribute 'fqn'
____________ TestWorkcellSchemas.test_workcell_base_with_all_fields ____________
tests/models/test_domain/test_workcell.py:163: in test_workcell_base_with_all_fields
    assert workcell.fqn == "test.full.workcell"
           ^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'WorkcellBase' object has no attribute 'fqn'
_________ TestWorkcellSchemas.test_workcell_create_inherits_from_base __________
tests/models/test_domain/test_workcell.py:179: in test_workcell_create_inherits_from_base
    assert workcell.status == WorkcellStatusEnum.AVAILABLE
E   AssertionError: assert 'available' == <WorkcellStatusEnum.AVAILABLE: 'available'>
E    +  where 'available' = WorkcellCreate(accession_id=UUID('019bb465-8050-7242-b7f0-148f36ac658c'), created_at=datetime.datetime(2026, 1, 12, 22, 48, 29, 520325, tzinfo=datetime.timezone.utc), updated_at=None, name='create_test', description='Testing create model', physical_location=None, status='available', last_state_update_time=None).status
E    +  and   <WorkcellStatusEnum.AVAILABLE: 'available'> = WorkcellStatusEnum.AVAILABLE
_______ TestWorkcellSchemas.test_workcell_response_serialization_to_dict _______
tests/models/test_domain/test_workcell.py:194: in test_workcell_response_serialization_to_dict
    workcell = WorkcellResponse(
.venv/lib/python3.13/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.13/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for WorkcellRead
E   accession_id
E     Field required [type=missing, input_value={'name': 'serialize_test'...TENANCE: 'maintenance'>}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_______ TestWorkcellSchemas.test_workcell_response_serialization_to_json _______
tests/models/test_domain/test_workcell.py:213: in test_workcell_response_serialization_to_json
    workcell = WorkcellResponse(
.venv/lib/python3.13/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.13/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for WorkcellRead
E   accession_id
E     Field required [type=missing, input_value={'name': 'json_test', 'st...=datetime.timezone.utc)}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
_____ TestWorkcellSchemas.test_workcell_response_deserialization_from_dict _____
tests/models/test_domain/test_workcell.py:239: in test_workcell_response_deserialization_from_dict
    workcell = WorkcellResponse.model_validate(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/sqlmodel/main.py:830: in model_validate
    return sqlmodel_validate(
.venv/lib/python3.13/site-packages/sqlmodel/_compat.py:300: in sqlmodel_validate
    cls.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for WorkcellRead
E   accession_id
E     Field required [type=missing, input_value={'name': 'deserialize_tes...urces': [], 'decks': []}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
__________ TestWorkcellSchemas.test_workcell_response_enum_validation __________
tests/models/test_domain/test_workcell.py:247: in test_workcell_response_enum_validation
    workcell1 = WorkcellResponse(
.venv/lib/python3.13/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.13/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for WorkcellRead
E   accession_id
E     Field required [type=missing, input_value={'name': 'enum_test_1', 'status': 'active'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
______ TestWorkcellSchemas.test_workcell_response_roundtrip_serialization ______
tests/models/test_domain/test_workcell.py:267: in test_workcell_response_roundtrip_serialization
    original = WorkcellResponse(
.venv/lib/python3.13/site-packages/sqlmodel/main.py:793: in __init__
    sqlmodel_init(self=__pydantic_self__, data=data)
.venv/lib/python3.13/site-packages/sqlmodel/_compat.py:331: in sqlmodel_init
    self.__pydantic_validator__.validate_python(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for WorkcellRead
E   accession_id
E     Field required [type=missing, input_value={'name': 'roundtrip_test'...json': {'test': 'data'}}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.12/v/missing
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.13.5-final-0 _______________

Name                                                                                  Stmts   Miss  Cover   Missing
-------------------------------------------------------------------------------------------------------------------
praxis/backend/__init__.py                                                                1      0   100%
praxis/backend/api/__init__.py                                                            4      4     0%   8-14
praxis/backend/api/auth.py                                                               49     49     0%   3-181
praxis/backend/api/decks.py                                                               9      9     0%   3-31
praxis/backend/api/dependencies.py                                                       30     30     0%   3-67
praxis/backend/api/discovery.py                                                          16     16     0%   3-39
praxis/backend/api/global_dependencies.py                                                33     33     0%   10-74
praxis/backend/api/hardware.py                                                          149    149     0%   7-500
praxis/backend/api/machines.py                                                           47     47     0%   7-170
praxis/backend/api/outputs.py                                                             9      9     0%   3-31
praxis/backend/api/protocols.py                                                         134    134     0%   7-467
praxis/backend/api/repl.py                                                               64     64     0%   1-134
praxis/backend/api/resources.py                                                          38     38     0%   8-124
praxis/backend/api/scheduler.py                                                         105    105     0%   1-395
praxis/backend/api/utils/__init__.py                                                      0      0   100%
praxis/backend/api/utils/crud_router_factory.py                                          40     40     0%   3-90
praxis/backend/api/websockets.py                                                         65     65     0%   1-151
praxis/backend/api/workcell.py                                                            7      7     0%   7-20
praxis/backend/celery_app.py                                                              2      2     0%   1-3
praxis/backend/configure.py                                                             152     64    58%   43, 49, 61-69, 81-87, 117, 122, 127, 132, 137-139, 144, 149, 157, 176, 188-190, 195, 200, 205, 210, 215-217, 222, 227, 232, 241-248, 253-254, 259, 264-265, 274-287, 293-295, 305-306, 322-329
praxis/backend/core/__init__.py                                                           2      2     0%   3-5
praxis/backend/core/asset_lock_manager.py                                                39     39     0%   3-76
praxis/backend/core/asset_manager/__init__.py                                             8      8     0%   3-28
praxis/backend/core/asset_manager/core.py                                                52     52     0%   4-149
praxis/backend/core/asset_manager/deck_manager.py                                        74     74     0%   5-217
praxis/backend/core/asset_manager/location_handler.py                                    46     46     0%   4-95
praxis/backend/core/asset_manager/machine_manager.py                                     79     79     0%   4-205
praxis/backend/core/asset_manager/resource_manager.py                                   129    129     0%   4-380
praxis/backend/core/celery.py                                                             4      4     0%   7-15
praxis/backend/core/celery_base.py                                                       12     12     0%   1-23
praxis/backend/core/celery_tasks.py                                                      72     72     0%   9-203
praxis/backend/core/consumable_assignment.py                                            165    165     0%   17-456
praxis/backend/core/container.py                                                         49     49     0%   10-215
praxis/backend/core/deck_config.py                                                       82     82     0%   16-263
praxis/backend/core/decorators/__init__.py                                                5      5     0%   1-23
praxis/backend/core/decorators/definition_builder.py                                     50     50     0%   1-188
praxis/backend/core/decorators/models.py                                                 60     60     0%   1-153
praxis/backend/core/decorators/parameter_processor.py                                    50     50     0%   1-130
praxis/backend/core/decorators/protocol_decorator.py                                    206    206     0%   1-547
praxis/backend/core/filesystem.py                                                        21     21     0%   3-61
praxis/backend/core/orchestrator/__init__.py                                              3      3     0%   3-12
praxis/backend/core/orchestrator/asset_acquisition.py                                    58     58     0%   3-151
praxis/backend/core/orchestrator/core.py                                                 26     26     0%   5-81
praxis/backend/core/orchestrator/error_handling.py                                       75     75     0%   3-191
praxis/backend/core/orchestrator/execution.py                                           175    175     0%   3-465
praxis/backend/core/orchestrator/protocol_preparation.py                                 75     75     0%   3-205
praxis/backend/core/precondition_resolver.py                                            181    181     0%   14-523
praxis/backend/core/protocol_cache.py                                                   128    128     0%   14-473
praxis/backend/core/protocol_code_manager.py                                            152    152     0%   14-520
praxis/backend/core/protocol_execution_service.py                                        99     99     0%   9-304
praxis/backend/core/protocols/__init__.py                                                 0      0   100%
praxis/backend/core/protocols/asset_lock_manager.py                                       5      5     0%   1-8
praxis/backend/core/protocols/asset_manager.py                                            7      7     0%   3-11
praxis/backend/core/protocols/filesystem.py                                               1      1     0%   1
praxis/backend/core/protocols/orchestrator.py                                             2      2     0%   3-5
praxis/backend/core/protocols/protocol_code_manager.py                                    3      3     0%   3-6
praxis/backend/core/protocols/protocol_execution_service.py                               3      3     0%   3-6
praxis/backend/core/protocols/scheduler.py                                                2      2     0%   3-4
praxis/backend/core/protocols/workcell.py                                                 3      3     0%   3-6
praxis/backend/core/protocols/workcell_runtime.py                                         7      7     0%   3-11
praxis/backend/core/repl_session.py                                                      72     72     0%   3-128
praxis/backend/core/run_context.py                                                       50     50     0%   19-130
praxis/backend/core/scheduler.py                                                        282    282     0%   4-731
praxis/backend/core/simulation/__init__.py                                               10     10     0%   22-92
praxis/backend/core/simulation/bounds_analyzer.py                                       113    113     0%   7-356
praxis/backend/core/simulation/failure_detector.py                                      126    126     0%   7-386
praxis/backend/core/simulation/graph_replay.py                                          152    152     0%   18-488
praxis/backend/core/simulation/method_contracts.py                                       80     80     0%   11-546
praxis/backend/core/simulation/pipeline.py                                              148    148     0%   13-545
praxis/backend/core/simulation/simulator.py                                              59     59     0%   8-294
praxis/backend/core/simulation/state_models.py                                          268    268     0%   12-582
praxis/backend/core/simulation/state_resolution.py                                      163    163     0%   20-608
praxis/backend/core/simulation/stateful_tracers.py                                      188    188     0%   8-499
praxis/backend/core/storage/__init__.py                                                   3      3     0%   16-27
praxis/backend/core/storage/celery_adapter.py                                            40     40     0%   7-132
praxis/backend/core/storage/factory.py                                                   75     75     0%   24-242
praxis/backend/core/storage/memory_adapter.py                                           233    233     0%   18-395
praxis/backend/core/storage/protocols.py                                                  2      2     0%   13-14
praxis/backend/core/storage/redis_adapter.py                                            162    162     0%   9-327
praxis/backend/core/storage/sqlite_adapter.py                                           106    106     0%   19-279
praxis/backend/core/tracing/__init__.py                                                   4      4     0%   8-18
praxis/backend/core/tracing/executor.py                                                  73     73     0%   8-323
praxis/backend/core/tracing/recorder.py                                                 121    121     0%   7-360
praxis/backend/core/tracing/tracers.py                                                  144    144     0%   11-447
praxis/backend/core/workcell.py                                                         107    107     0%   13-242
praxis/backend/core/workcell_runtime/__init__.py                                          2      2     0%   1-3
praxis/backend/core/workcell_runtime/core.py                                             38     38     0%   3-72
praxis/backend/core/workcell_runtime/deck_manager.py                                    201    201     0%   4-487
praxis/backend/core/workcell_runtime/machine_manager.py                                 171    171     0%   4-426
praxis/backend/core/workcell_runtime/resource_manager.py                                 83     83     0%   4-208
praxis/backend/core/workcell_runtime/state_sync.py                                       91     91     0%   3-180
praxis/backend/core/workcell_runtime/utils.py                                            13     13     0%   3-26
praxis/backend/main.py                                                                  156    156     0%   3-353
praxis/backend/models/__init__.py                                                        14      0   100%
praxis/backend/models/domain/__init__.py                                                 14      0   100%
praxis/backend/models/domain/asset.py                                                    37      0   100%
praxis/backend/models/domain/deck.py                                                    148     12    92%   15, 20-21, 197, 235-239, 293, 300, 322
praxis/backend/models/domain/filters.py                                                  17      0   100%
praxis/backend/models/domain/machine.py                                                 124      4    97%   20-23
praxis/backend/models/domain/outputs.py                                                 152      5    97%   17-21
praxis/backend/models/domain/plr_sync.py                                                  8      0   100%
praxis/backend/models/domain/protocol.py                                                227      1    99%   23
praxis/backend/models/domain/protocol_source.py                                          45      1    98%   16
praxis/backend/models/domain/resolution.py                                               36      2    94%   15-16
praxis/backend/models/domain/resource.py                                                164     12    93%   17-20, 157-159, 164-166, 241, 248
praxis/backend/models/domain/schedule.py                                                169      1    99%   21
praxis/backend/models/domain/sqlmodel_base.py                                            20      1    95%   44
praxis/backend/models/domain/user.py                                                     26      0   100%
praxis/backend/models/domain/workcell.py                                                 31      2    94%   13-14
praxis/backend/models/enums/__init__.py                                                  10      0   100%
praxis/backend/models/enums/asset.py                                                     14      0   100%
praxis/backend/models/enums/machine.py                                                   30      1    97%   53
praxis/backend/models/enums/outputs.py                                                   29      0   100%
praxis/backend/models/enums/plr_category.py                                              81     47    42%   109-119, 136-178
praxis/backend/models/enums/protocol.py                                                  30      0   100%
praxis/backend/models/enums/resolution.py                                                11      0   100%
praxis/backend/models/enums/resource.py                                                  60      3    95%   101, 121, 135
praxis/backend/models/enums/schedule.py                                                  33      0   100%
praxis/backend/models/enums/workcell.py                                                  12      1    92%   28
praxis/backend/models/pydantic_internals/__init__.py                                     13      0   100%
praxis/backend/models/pydantic_internals/maintenance.py                                  22     22     0%   1-43
praxis/backend/models/pydantic_internals/plr_sync.py                                     17     17     0%   3-39
praxis/backend/models/pydantic_internals/pydantic_base.py                                13      1    92%   45
praxis/backend/models/pydantic_internals/runtime.py                                      42      3    93%   31, 42-43
praxis/backend/services/__init__.py                                                      13     13     0%   14-31
praxis/backend/services/async_state.py                                                   89     89     0%   8-208
praxis/backend/services/capability_matcher.py                                            63     63     0%   7-217
praxis/backend/services/deck.py                                                         135    135     0%   8-325
praxis/backend/services/deck_type_definition.py                                          26     26     0%   3-59
praxis/backend/services/discovery_service.py                                            112    112     0%   12-276
praxis/backend/services/entity_linking.py                                               147    147     0%   8-405
praxis/backend/services/hardware_connection_manager.py                                  118    118     0%   25-380
praxis/backend/services/hardware_discovery.py                                           129    129     0%   12-457
praxis/backend/services/machine.py                                                      110    110     0%   10-255
praxis/backend/services/machine_type_definition.py                                       65     65     0%   3-173
praxis/backend/services/mock_data_generator.py                                           89     89     0%   3-166
praxis/backend/services/outputs.py                                                       66     66     0%   8-159
praxis/backend/services/plate_parsing.py                                                 60     60     0%   8-144
praxis/backend/services/plate_viz.py                                                     25     25     0%   10-99
praxis/backend/services/plr_type_base.py                                                  8      8     0%   3-19
praxis/backend/services/praxis_orm_service.py                                           171    171     0%   12-433
praxis/backend/services/protocol_definition.py                                          135    135     0%   3-392
praxis/backend/services/protocol_output_data.py                                          24     24     0%   8-125
praxis/backend/services/protocols.py                                                    172    172     0%   12-421
praxis/backend/services/resource.py                                                     111    111     0%   4-274
praxis/backend/services/resource_type_definition.py                                     280    280     0%   3-699
praxis/backend/services/scheduler.py                                                    176    176     0%   12-574
praxis/backend/services/simulation_service.py                                           135    135     0%   12-516
praxis/backend/services/state.py                                                        124    124     0%   3-274
praxis/backend/services/state_resolution_service.py                                     150    150     0%   16-487
praxis/backend/services/type_definition_base.py                                           6      6     0%   3-14
praxis/backend/services/user.py                                                         116    116     0%   8-337
praxis/backend/services/utils/__init__.py                                                 2      2     0%   3-10
praxis/backend/services/utils/crud_base.py                                              104    104     0%   3-203
praxis/backend/services/utils/plr_type_base.py                                           56     56     0%   3-116
praxis/backend/services/utils/query_builder.py                                           66     66     0%   8-209
praxis/backend/services/well_outputs.py                                                 123    123     0%   8-329
praxis/backend/services/workcell.py                                                      83     83     0%   12-202
praxis/backend/utils/__init__.py                                                          7      0   100%
praxis/backend/utils/accession_resolver.py                                               19     19     0%   6-68
praxis/backend/utils/auth.py                                                             62     62     0%   7-124
praxis/backend/utils/db.py                                                              120     62    48%   35-37, 43, 58-61, 68-92, 100-132, 141-142, 204-211, 219-239, 247-248, 256, 276, 297
praxis/backend/utils/db_decorator.py                                                     34     34     0%   3-76
praxis/backend/utils/errors.py                                                           62     30    52%   19-20, 24, 42-43, 47, 65-66, 70, 88-89, 93, 111-112, 116, 134-135, 139, 158-159, 163, 181-182, 186, 201-202, 223-224, 236, 254
praxis/backend/utils/filesystem.py                                                        4      4     0%   1-9
praxis/backend/utils/logging.py                                                          47     38    19%   12-18, 32-48, 92-111, 155-174
praxis/backend/utils/notify.py                                                           27     13    52%   63-74, 95-96
praxis/backend/utils/plr_inspection.py                                                  207    207     0%   11-716
praxis/backend/utils/plr_static_analysis/__init__.py                                      3      3     0%   15-33
praxis/backend/utils/plr_static_analysis/cache.py                                        68     68     0%   3-172
praxis/backend/utils/plr_static_analysis/capability_config_templates.py                  21     21     0%   8-412
praxis/backend/utils/plr_static_analysis/connection_config_templates.py                  17     17     0%   8-148
praxis/backend/utils/plr_static_analysis/manufacturer_inference.py                       16     16     0%   5-123
praxis/backend/utils/plr_static_analysis/models.py                                      280    280     0%   3-655
praxis/backend/utils/plr_static_analysis/parser.py                                      218    218     0%   3-532
praxis/backend/utils/plr_static_analysis/resource_hierarchy.py                          116    116     0%   12-492
praxis/backend/utils/plr_static_analysis/type_annotation_analyzer.py                    109    109     0%   7-304
praxis/backend/utils/plr_static_analysis/visitors/__init__.py                             6      6     0%   3-16
praxis/backend/utils/plr_static_analysis/visitors/base.py                                56     56     0%   3-135
praxis/backend/utils/plr_static_analysis/visitors/capability_extractor.py               228    228     0%   3-536
praxis/backend/utils/plr_static_analysis/visitors/class_discovery.py                    177    177     0%   3-593
praxis/backend/utils/plr_static_analysis/visitors/computation_graph_extractor.py        244    244     0%   14-673
praxis/backend/utils/plr_static_analysis/visitors/protocol_discovery.py                  91     91     0%   3-262
praxis/backend/utils/plr_static_analysis/visitors/protocol_requirement_extractor.py      86     86     0%   7-298
praxis/backend/utils/plr_static_analysis/visitors/resource_factory.py                   109    109     0%   13-328
praxis/backend/utils/redis_lock.py                                                       21     15    29%   30-49
praxis/backend/utils/run_control.py                                                      38     38     0%   3-90
praxis/backend/utils/sanitation.py                                                      151    132    13%   24-25, 43-54, 68-86, 91-109, 117, 136-142, 152-157, 183-218, 231-234, 248, 252-261, 269-283, 320-349, 366-372
praxis/backend/utils/type_inspection.py                                                  24     24     0%   4-64
praxis/backend/utils/uuid.py                                                              9      3    67%   34, 39-40
praxis/common/__init__.py                                                                 0      0   100%
praxis/common/type_inspection.py                                                        124    124     0%   4-313
praxis/protocol/__init__.py                                                               2      2     0%   6-12
praxis/protocol/protocols/__init__.py                                                     7      7     0%   13-20
praxis/protocol/protocols/kinetic_assay.py                                               55     55     0%   10-204
praxis/protocol/protocols/plate_preparation.py                                           50     50     0%   7-143
praxis/protocol/protocols/plate_reader_assay.py                                          28     28     0%   10-134
praxis/protocol/protocols/selective_transfer.py                                          52     52     0%   8-218
praxis/protocol/protocols/serial_dilution.py                                             30     30     0%   7-134
praxis/protocol/protocols/simple_transfer.py                                             20     20     0%   7-112
-------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                 14683  12930    12%
Coverage HTML written to dir htmlcov
FAIL Required test coverage of 80% not reached. Total coverage: 11.94%
=========================== short test summary info ============================
FAILED tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_creation_minimal
FAILED tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_timing_fields
FAILED tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_relationship_to_protocol_run
FAILED tests/models/test_domain/test_asset_reservation.py::test_asset_reservation_orm_relationship_to_asset
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_creation_minimal
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_creation_with_all_fields
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_persist_to_database
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_unique_name_constraint
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_status_transitions
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_query_by_name
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_update_base_path
FAILED tests/models/test_domain/test_file_system_protocol_source.py::test_file_system_protocol_source_orm_query_by_status
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_creation_minimal
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_unique_constraint_git
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_unique_constraint_fs
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_is_top_level_flag
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_solo_execution_flag
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_preconfigure_deck_flag
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_deprecated_flag
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_jsonb_tags
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_state_param
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_query_by_fqn
FAILED tests/models/test_domain/test_function_protocol_definition.py::test_function_protocol_definition_orm_query_top_level
FAILED tests/models/test_domain/test_machine.py::test_machine_orm_creation_with_defaults
FAILED tests/models/test_domain/test_machine.py::test_machine_orm_persist_to_database
FAILED tests/models/test_domain/test_machine.py::test_machine_orm_unique_serial_number
FAILED tests/models/test_domain/test_machine.py::test_machine_orm_with_workcell_relationship
FAILED tests/models/test_domain/test_machine.py::test_machine_orm_status_enum_values
FAILED tests/models/test_domain/test_machine.py::test_machine_orm_category_enum_values
FAILED tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_creation_minimal
FAILED tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_with_all_fields
FAILED tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_persist_to_database
FAILED tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_unique_name_constraint
FAILED tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_machine_categories
FAILED tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_jsonb_fields
FAILED tests/models/test_domain/test_machine_definition.py::test_machine_definition_orm_dimensions
FAILED tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_base_minimal
FAILED tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_base_with_all_fields
FAILED tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_update
FAILED tests/models/test_domain/test_machine_definition.py::TestMachineDefinitionSchemas::test_machine_definition_jsonb_validation
FAILED tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_creation_minimal
FAILED tests/models/test_domain/test_parameter_definition.py::test_parameter_definition_orm_unique_constraint
FAILED tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_creation_minimal
FAILED tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_creation_with_all_fields
FAILED tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_persist_to_database
FAILED tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_unique_name_constraint
FAILED tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_status_transitions
FAILED tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_query_by_name
FAILED tests/models/test_domain/test_protocol_source_repository.py::test_protocol_source_repository_orm_update_commit_hash
FAILED tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_base_minimal
FAILED tests/models/test_domain/test_resource.py::TestResourceSchemas::test_resource_response_from_orm_minimal
FAILED tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_base_minimal
FAILED tests/models/test_domain/test_resource_definition.py::TestResourceDefinitionSchemas::test_resource_definition_base_with_all_fields
FAILED tests/models/test_domain/test_sqlmodel_base.py::test_praxis_base_defaults
FAILED tests/models/test_domain/test_sqlmodel_base.py::test_sqlmodel_metadata_registration
FAILED tests/models/test_domain/test_workcell.py::test_workcell_orm_unique_name_constraint
FAILED tests/models/test_domain/test_workcell.py::test_workcell_orm_relationships_empty_by_default
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_base_minimal
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_base_with_all_fields
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_create_inherits_from_base
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_serialization_to_dict
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_serialization_to_json
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_deserialization_from_dict
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_enum_validation
FAILED tests/models/test_domain/test_workcell.py::TestWorkcellSchemas::test_workcell_response_roundtrip_serialization
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_creation_minimal
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_creation_with_all_fields
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_persist_to_database
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_sequence_ordering
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_status_values
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_input_args_jsonb
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_return_value_jsonb
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_error_fields
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_nested_calls
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_timing
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_query_by_protocol_run
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_query_by_status
ERROR tests/models/test_domain/test_function_call_log.py::test_function_call_log_orm_repr
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_creation_minimal
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_creation_with_all_fields
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_persist_to_database
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_data_type_values
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_spatial_context_values
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_numeric_data
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_json_data
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_text_data
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_binary_data
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_spatial_coordinates_jsonb
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_metadata_jsonb
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_file_path
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_protocol_run
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_function_call_log
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_resource
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_relationship_to_machine
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_query_by_data_type
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_query_by_protocol_run
ERROR tests/models/test_domain/test_function_data_output.py::test_function_data_output_orm_query_by_resource
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_creation_minimal
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_creation_with_all_fields
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_persist_to_database
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_status_transitions
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_timing_fields
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_input_parameters_jsonb
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_resolved_assets_jsonb
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_output_data_jsonb
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_state_jsonb
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_data_directory_path
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_created_by_user_jsonb
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_continuation_chain
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_query_by_status
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_query_by_protocol
ERROR tests/models/test_domain/test_protocol_run.py::test_protocol_run_repr
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_creation_minimal
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_creation_with_all_fields
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_persist_to_database
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_status_transitions
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_priority_ordering
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_timestamp_fields
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_asset_requirements_jsonb
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_celery_integration
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_retry_logic
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_user_params_jsonb
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_relationship_to_protocol_run
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_query_by_status
ERROR tests/models/test_domain/test_schedule_entry.py::test_schedule_entry_orm_query_ready_entries
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_creation_minimal
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_creation_with_all_fields
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_persist_to_database
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_all_event_types
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_status_transitions
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_event_timing
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_event_data_jsonb
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_error_tracking
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_all_trigger_types
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_asset_count_tracking
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_relationship_to_schedule_entry
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_query_by_event_type
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_query_by_time_range
ERROR tests/models/test_domain/test_schedule_history.py::test_schedule_history_orm_cascade_delete
ERROR tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_creation_minimal
ERROR tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_creation_all_fields
ERROR tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_persistence
ERROR tests/models/test_domain/test_well_data_output.py::test_well_data_output_orm_relationships
=========== 65 failed, 162 passed, 112 warnings, 78 errors in 45.28s ===========
