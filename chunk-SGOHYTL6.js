import{c as Ge}from"./chunk-JG6HUHEY.js";import{c as ze}from"./chunk-HUJ7WYYJ.js";import{Ga as ae,Zc as Ye,ha as ct,ka as qe,l as Ft,ma as nt,r as L,w as Nt}from"./chunk-ZXFVGPYG.js";import{a as et,b as gt}from"./chunk-RNQFGQA5.js";var Vn=new qe("WINDOW",{factory:()=>window}),Gt=class e{window=nt(Vn);get nativeWindow(){return this.window}get location(){return this.window.location}reload(){this.window.location.reload()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"})};var v={PROTOCOLS:"praxis_protocols",PROTOCOL_RUNS:"praxis_protocol_runs",RESOURCES:"praxis_resources",MACHINES:"praxis_machines",STATE_VERSION:"praxis_state_version"},Ke=1,Kt=class e{protocolsChanged=new Ft(void 0);runsChanged=new Ft(void 0);resourcesChanged=new Ft(void 0);machinesChanged=new Ft(void 0);constructor(){this.initializeIfNeeded()}initializeIfNeeded(){localStorage.getItem(v.STATE_VERSION)||(localStorage.setItem(v.STATE_VERSION,String(Ke)),this.setItems(v.PROTOCOLS,[]),this.setItems(v.PROTOCOL_RUNS,[]),this.setItems(v.RESOURCES,[]),this.setItems(v.MACHINES,[]),console.log("[LocalStorageAdapter] Initialized empty state"))}getItems(t){try{let n=localStorage.getItem(t);return n?JSON.parse(n):[]}catch(n){return console.error(`[LocalStorageAdapter] Failed to parse ${t}:`,n),[]}}setItems(t,n){try{localStorage.setItem(t,JSON.stringify(n))}catch(o){console.error(`[LocalStorageAdapter] Failed to save ${t}:`,o),o instanceof DOMException&&o.name==="QuotaExceededError"&&console.error("[LocalStorageAdapter] Storage quota exceeded!")}}findById(t,n){return this.getItems(t).find(o=>o.accession_id===n)}addItem(t,n){let o=this.getItems(t),i=o.findIndex(s=>s.accession_id===n.accession_id);return i>=0?o[i]=n:o.push(n),this.setItems(t,o),n}updateItem(t,n,o){let i=this.getItems(t),s=i.findIndex(r=>r.accession_id===n);return s<0?null:(i[s]=et(et({},i[s]),o),this.setItems(t,i),i[s])}deleteItem(t,n){let o=this.getItems(t),i=o.filter(s=>s.accession_id!==n);return i.length===o.length?!1:(this.setItems(t,i),!0)}getProtocols(){return this.protocolsChanged.pipe(Nt(()=>this.getItems(v.PROTOCOLS)))}getProtocol(t){return L(this.findById(v.PROTOCOLS,t)||null)}createProtocol(t){let n=this.addItem(v.PROTOCOLS,gt(et({},t),{accession_id:t.accession_id||crypto.randomUUID()}));return this.protocolsChanged.next(),L(n)}updateProtocol(t,n){let o=this.updateItem(v.PROTOCOLS,t,n);return o&&this.protocolsChanged.next(),L(o)}deleteProtocol(t){let n=this.deleteItem(v.PROTOCOLS,t);return n&&this.protocolsChanged.next(),L(n)}getProtocolRuns(){return this.runsChanged.pipe(Nt(()=>this.getItems(v.PROTOCOL_RUNS)))}getProtocolRun(t){return L(this.findById(v.PROTOCOL_RUNS,t)||null)}createProtocolRun(t){let n=this.addItem(v.PROTOCOL_RUNS,gt(et({},t),{accession_id:t.accession_id||crypto.randomUUID(),created_at:t.created_at||new Date().toISOString(),status:t.status||"QUEUED"}));return this.runsChanged.next(),L(n)}updateProtocolRun(t,n){let o=this.updateItem(v.PROTOCOL_RUNS,t,n);return o&&this.runsChanged.next(),L(o)}getResources(){return this.resourcesChanged.pipe(Nt(()=>this.getItems(v.RESOURCES)))}getResource(t){return L(this.findById(v.RESOURCES,t)||null)}createResource(t){let n=this.addItem(v.RESOURCES,gt(et({},t),{accession_id:t.accession_id||crypto.randomUUID()}));return this.resourcesChanged.next(),L(n)}updateResource(t,n){let o=this.updateItem(v.RESOURCES,t,n);return o&&this.resourcesChanged.next(),L(o)}deleteResource(t){let n=this.deleteItem(v.RESOURCES,t);return n&&this.resourcesChanged.next(),L(n)}getMachines(){return this.machinesChanged.pipe(Nt(()=>this.getItems(v.MACHINES)))}getMachine(t){return L(this.findById(v.MACHINES,t)||null)}createMachine(t){let n=this.addItem(v.MACHINES,gt(et({},t),{accession_id:t.accession_id||crypto.randomUUID()}));return this.machinesChanged.next(),L(n)}updateMachine(t,n){let o=this.updateItem(v.MACHINES,t,n);return o&&this.machinesChanged.next(),L(o)}deleteMachine(t){let n=this.deleteItem(v.MACHINES,t);return n&&this.machinesChanged.next(),L(n)}exportState(){let t={version:Ke,exportedAt:new Date().toISOString(),protocols:this.getItems(v.PROTOCOLS),protocolRuns:this.getItems(v.PROTOCOL_RUNS),resources:this.getItems(v.RESOURCES),machines:this.getItems(v.MACHINES)};return JSON.stringify(t,null,2)}importState(t,n=!1){try{let o=JSON.parse(t);if(!o.version)return console.error("[LocalStorageAdapter] Invalid state file: missing version"),!1;if(n){let i={protocols:this.getItems(v.PROTOCOLS),runs:this.getItems(v.PROTOCOL_RUNS),resources:this.getItems(v.RESOURCES),machines:this.getItems(v.MACHINES)};(o.protocols||[]).forEach(s=>{i.protocols.find(r=>r.accession_id===s.accession_id)||this.addItem(v.PROTOCOLS,s)}),(o.protocolRuns||[]).forEach(s=>{i.runs.find(r=>r.accession_id===s.accession_id)||this.addItem(v.PROTOCOL_RUNS,s)}),(o.resources||[]).forEach(s=>{i.resources.find(r=>r.accession_id===s.accession_id)||this.addItem(v.RESOURCES,s)}),(o.machines||[]).forEach(s=>{i.machines.find(r=>r.accession_id===s.accession_id)||this.addItem(v.MACHINES,s)})}else this.setItems(v.PROTOCOLS,o.protocols||[]),this.setItems(v.PROTOCOL_RUNS,o.protocolRuns||[]),this.setItems(v.RESOURCES,o.resources||[]),this.setItems(v.MACHINES,o.machines||[]);return this.protocolsChanged.next(),this.runsChanged.next(),this.resourcesChanged.next(),this.machinesChanged.next(),console.log(`[LocalStorageAdapter] State imported (${n?"merged":"replaced"})`),!0}catch(o){return console.error("[LocalStorageAdapter] Failed to import state:",o),!1}}clearAll(){localStorage.removeItem(v.PROTOCOLS),localStorage.removeItem(v.PROTOCOL_RUNS),localStorage.removeItem(v.RESOURCES),localStorage.removeItem(v.MACHINES),localStorage.removeItem(v.STATE_VERSION),this.initializeIfNeeded(),this.protocolsChanged.next(),this.runsChanged.next(),this.resourcesChanged.next(),this.machinesChanged.next(),console.log("[LocalStorageAdapter] All data cleared")}getStorageStats(){let t=0;for(let o of Object.values(v)){let i=localStorage.getItem(o);i&&(t+=i.length*2)}let n=5*1024*1024;return{used:t,quota:n,percentage:Math.round(t/n*100)}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"})};var J={ONBOARDING_COMPLETED:"praxis_onboarding_completed",TUTORIAL_COMPLETED:"praxis_tutorial_completed",TUTORIAL_STATE:"praxis_tutorial_state"},Jt=class e{localStorageAdapter=nt(Kt);browserService=nt(Gt);hasCompletedOnboarding=ae(this.checkOnboardingStatus());hasCompletedTutorial=ae(this.checkTutorialStatus());shouldShowWelcome=Ye(()=>!this.hasCompletedOnboarding());constructor(){}checkOnboardingStatus(){return!!localStorage.getItem(J.ONBOARDING_COMPLETED)}checkTutorialStatus(){return!!localStorage.getItem(J.TUTORIAL_COMPLETED)}markOnboardingComplete(){localStorage.setItem(J.ONBOARDING_COMPLETED,"true"),this.hasCompletedOnboarding.set(!0)}markTutorialComplete(){localStorage.setItem(J.TUTORIAL_COMPLETED,"true"),this.hasCompletedTutorial.set(!0)}resetOnboarding(){localStorage.removeItem(J.ONBOARDING_COMPLETED),localStorage.removeItem(J.TUTORIAL_COMPLETED),localStorage.removeItem(J.TUTORIAL_STATE),this.hasCompletedOnboarding.set(!1),this.hasCompletedTutorial.set(!1),this.browserService.reload()}startTutorialSession(){let t={sessionId:Date.now(),stepId:"intro"};this.saveTutorialState(t)}saveTutorialStep(t){let n=this.getTutorialState();n&&this.saveTutorialState(gt(et({},n),{stepId:t}))}getTutorialState(){try{let t=localStorage.getItem(J.TUTORIAL_STATE);return t?JSON.parse(t):null}catch{return null}}clearTutorialState(){localStorage.removeItem(J.TUTORIAL_STATE)}saveTutorialState(t){localStorage.setItem(J.TUTORIAL_STATE,JSON.stringify(t))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"})};function jn(e){return e instanceof Element}function Rt(e){return e instanceof HTMLElement}function ft(e){return typeof e=="function"}function Ut(e){return typeof e=="string"}function M(e){return e===void 0}var Bt=class{on(t,n,o,i=!1){var s;return M(this.bindings)&&(this.bindings={}),M(this.bindings[t])&&(this.bindings[t]=[]),(s=this.bindings[t])==null||s.push({handler:n,ctx:o,once:i}),this}once(t,n,o){return this.on(t,n,o,!0)}off(t,n){if(M(this.bindings)||M(this.bindings[t]))return this;if(M(n))delete this.bindings[t];else{var o;(o=this.bindings[t])==null||o.forEach((i,s)=>{if(i.handler===n){var r;(r=this.bindings[t])==null||r.splice(s,1)}})}return this}trigger(t,...n){if(!M(this.bindings)&&this.bindings[t]){var o;(o=this.bindings[t])==null||o.forEach((i,s)=>{let{ctx:r,handler:l,once:a}=i,c=r||this;if(l.apply(c,n),a){var h;(h=this.bindings[t])==null||h.splice(s,1)}})}return this}};function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},N.apply(null,arguments)}function Re(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;n[o]=e[o]}return n}var ht={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};ht.defaultMerge;function Wn(e,t){return t}function qn(e,t){return e.filter(n=>n!==void 0)}function Je(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:Gn(e)?1:e instanceof Set?3:e instanceof Map?4:5}function Yn(e){let t=new Set;for(let n of e)for(let o of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(o);return t}function zn(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function yn(e){return{*[Symbol.iterator](){for(let t of e)for(let n of t)yield n}}}var Xe=new Set(["[object Object]","[object Module]"]);function Gn(e){if(!Xe.has(Object.prototype.toString.call(e)))return!1;let{constructor:t}=e;if(t===void 0)return!0;let n=t.prototype;return!(n===null||typeof n!="object"||!Xe.has(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function Kn(e,t,n){let o={};for(let i of Yn(e)){let s=[];for(let a of e)zn(a,i)&&s.push(a[i]);if(s.length===0)continue;let r=t.metaDataUpdater(n,{key:i,parents:e}),l=wn(s,t,r);l!==ht.skip&&(i==="__proto__"?Object.defineProperty(o,i,{value:l,configurable:!0,enumerable:!0,writable:!0}):o[i]=l)}return o}function Jn(e){return e.flat()}function Xn(e){return new Set(yn(e))}function Qn(e){return new Map(yn(e))}function Zn(e){return e.at(-1)}var Xt={mergeRecords:Kn,mergeArrays:Jn,mergeSets:Xn,mergeMaps:Qn,mergeOthers:Zn};function Pe(...e){return $n({})(...e)}function $n(e,t){let n=to(e,o);function o(...i){return wn(i,n,t)}return o}function to(e,t){var n,o,i;return{defaultMergeFunctions:Xt,mergeFunctions:N({},Xt,Object.fromEntries(Object.entries(e).filter(([s,r])=>Object.hasOwn(Xt,s)).map(([s,r])=>r===!1?[s,Xt.mergeOthers]:[s,r]))),metaDataUpdater:(n=e.metaDataUpdater)!=null?n:Wn,deepmerge:t,useImplicitDefaultMerging:(o=e.enableImplicitDefaultMerging)!=null?o:!1,filterValues:e.filterValues===!1?void 0:(i=e.filterValues)!=null?i:qn,actions:ht}}function wn(e,t,n){var o;let i=(o=t.filterValues==null?void 0:t.filterValues(e,n))!=null?o:e;if(i.length===0)return;if(i.length===1)return ue(i,t,n);let s=Je(i[0]);if(s!==0&&s!==5){for(let r=1;r<i.length;r++)if(Je(i[r])!==s)return ue(i,t,n)}switch(s){case 1:return eo(i,t,n);case 2:return no(i,t,n);case 3:return oo(i,t,n);case 4:return io(i,t,n);default:return ue(i,t,n)}}function eo(e,t,n){let o=t.mergeFunctions.mergeRecords(e,t,n);return o===ht.defaultMerge||t.useImplicitDefaultMerging&&o===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):o}function no(e,t,n){let o=t.mergeFunctions.mergeArrays(e,t,n);return o===ht.defaultMerge||t.useImplicitDefaultMerging&&o===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):o}function oo(e,t,n){let o=t.mergeFunctions.mergeSets(e,t,n);return o===ht.defaultMerge||t.useImplicitDefaultMerging&&o===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):o}function io(e,t,n){let o=t.mergeFunctions.mergeMaps(e,t,n);return o===ht.defaultMerge||t.useImplicitDefaultMerging&&o===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):o}function ue(e,t,n){let o=t.mergeFunctions.mergeOthers(e,t,n);return o===ht.defaultMerge||t.useImplicitDefaultMerging&&o===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):o}function Le(e){let t=Object.getOwnPropertyNames(e.constructor.prototype);for(let n=0;n<t.length;n++){let o=t[n],i=e[o];o!=="constructor"&&typeof i=="function"&&(e[o]=i.bind(e))}return e}function so(e,t){return n=>{if(e.isOpen()){let o=e.el&&n.currentTarget===e.el;(!M(t)&&n.currentTarget.matches(t)||o)&&e.tour.next()}}}function ro(e){let{event:t,selector:n}=e.options.advanceOn||{};if(t){let o=so(e,n),i=null;if(!M(n)&&(i=document.querySelector(n),!i))return console.error(`No element was found for the selector supplied to advanceOn: ${n}`);i?(i.addEventListener(t,o),e.on("destroy",()=>i.removeEventListener(t,o))):(document.body.addEventListener(t,o,!0),e.on("destroy",()=>document.body.removeEventListener(t,o,!0)))}else return console.error("advanceOn was defined, but no event name was passed.")}var he=class{constructor(t){}},pe=class{constructor(t,n){}};function On(e){return!Ut(e)||e===""?"":e.charAt(e.length-1)!=="-"?`${e}-`:e}function lo(e){let t=e.options.attachTo||{},n=Object.assign({},t);if(ft(n.element)&&(n.element=n.element.call(e)),Ut(n.element)){try{n.element=document.querySelector(n.element)}catch{}n.element||console.error(`The element for this Shepherd step was not found ${t.element}`)}return n}function ao(e){return e.options.extraHighlights?e.options.extraHighlights.flatMap(t=>Array.from(document.querySelectorAll(t))):[]}function Sn(e){return e==null?!0:!e.element||!e.on}function xn(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let n=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t=="x"?n:n&3|8).toString(16)})}var co=["top","right","bottom","left"],Qe=["start","end"],Ze=co.reduce((e,t)=>e.concat(t,t+"-"+Qe[0],t+"-"+Qe[1]),[]),Pt=Math.min,vt=Math.max,$t=Math.round,Qt=Math.floor,X=e=>({x:e,y:e}),uo={left:"right",right:"left",bottom:"top",top:"bottom"},fo={start:"end",end:"start"};function me(e,t,n){return vt(e,Pt(t,n))}function St(e,t){return typeof e=="function"?e(t):e}function it(e){return e.split("-")[0]}function ot(e){return e.split("-")[1]}function Me(e){return e==="x"?"y":"x"}function ke(e){return e==="y"?"height":"width"}function yt(e){return["top","bottom"].includes(it(e))?"y":"x"}function De(e){return Me(yt(e))}function _n(e,t,n){n===void 0&&(n=!1);let o=ot(e),i=De(e),s=ke(i),r=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=ee(r)),[r,ee(r)]}function ho(e){let t=ee(e);return[te(e),t,te(t)]}function te(e){return e.replace(/start|end/g,t=>fo[t])}function po(e,t,n){let o=["left","right"],i=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:o:t?o:i;case"left":case"right":return t?s:r;default:return[]}}function mo(e,t,n,o){let i=ot(e),s=po(it(e),n==="start",o);return i&&(s=s.map(r=>r+"-"+i),t&&(s=s.concat(s.map(te)))),s}function ee(e){return e.replace(/left|right|bottom|top/g,t=>uo[t])}function go(e){return N({top:0,right:0,bottom:0,left:0},e)}function En(e){return typeof e!="number"?go(e):{top:e,right:e,bottom:e,left:e}}function ne(e){let{x:t,y:n,width:o,height:i}=e;return{width:o,height:i,top:n,left:t,right:t+o,bottom:n+i,x:t,y:n}}var bo=["crossAxis","alignment","allowedPlacements","autoAlignment"],vo=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],yo=["mainAxis","crossAxis","limiter"];function $e(e,t,n){let{reference:o,floating:i}=e,s=yt(t),r=De(t),l=ke(r),a=it(t),c=s==="y",h=o.x+o.width/2-i.width/2,f=o.y+o.height/2-i.height/2,u=o[l]/2-i[l]/2,d;switch(a){case"top":d={x:h,y:o.y-i.height};break;case"bottom":d={x:h,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:f};break;case"left":d={x:o.x-i.width,y:f};break;default:d={x:o.x,y:o.y}}switch(ot(t)){case"start":d[r]-=u*(n&&c?-1:1);break;case"end":d[r]+=u*(n&&c?-1:1);break}return d}var wo=async(e,t,n)=>{let{placement:o="bottom",strategy:i="absolute",middleware:s=[],platform:r}=n,l=s.filter(Boolean),a=await(r.isRTL==null?void 0:r.isRTL(t)),c=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:f}=$e(c,o,a),u=o,d={},g=0;for(let b=0;b<l.length;b++){let{name:w,fn:y}=l[b],{x,y:O,data:m,reset:S}=await y({x:h,y:f,initialPlacement:o,placement:u,strategy:i,middlewareData:d,rects:c,platform:r,elements:{reference:e,floating:t}});h=x??h,f=O??f,d=N({},d,{[w]:N({},d[w],m)}),S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(u=S.placement),S.rects&&(c=S.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:h,y:f}=$e(c,u,a)),b=-1)}return{x:h,y:f,placement:u,strategy:i,middlewareData:d}};async function Fe(e,t){var n;t===void 0&&(t={});let{x:o,y:i,platform:s,rects:r,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:u=!1,padding:d=0}=St(t,e),g=En(d),w=l[u?f==="floating"?"reference":"floating":f],y=ne(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:h,strategy:a})),x=f==="floating"?{x:o,y:i,width:r.floating.width,height:r.floating.height}:r.reference,O=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),m=await(s.isElement==null?void 0:s.isElement(O))?await(s.getScale==null?void 0:s.getScale(O))||{x:1,y:1}:{x:1,y:1},S=ne(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:O,strategy:a}):x);return{top:(y.top-S.top+g.top)/m.y,bottom:(S.bottom-y.bottom+g.bottom)/m.y,left:(y.left-S.left+g.left)/m.x,right:(S.right-y.right+g.right)/m.x}}var Oo=e=>({name:"arrow",options:e,async fn(t){let{x:n,y:o,placement:i,rects:s,platform:r,elements:l,middlewareData:a}=t,{element:c,padding:h=0}=St(e,t)||{};if(c==null)return{};let f=En(h),u={x:n,y:o},d=De(i),g=ke(d),b=await r.getDimensions(c),w=d==="y",y=w?"top":"left",x=w?"bottom":"right",O=w?"clientHeight":"clientWidth",m=s.reference[g]+s.reference[d]-u[d]-s.floating[g],S=u[d]-s.reference[d],A=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c)),C=A?A[O]:0;(!C||!await(r.isElement==null?void 0:r.isElement(A)))&&(C=l.floating[O]||s.floating[g]);let k=m/2-S/2,D=C/2-b[g]/2-1,p=Pt(f[y],D),E=Pt(f[x],D),_=p,P=C-b[g]-E,F=C/2-b[g]/2+k,j=me(_,F,P),tt=!a.arrow&&ot(i)!=null&&F!==j&&s.reference[g]/2-(F<_?p:E)-b[g]/2<0,H=tt?F<_?F-_:F-P:0;return{[d]:u[d]+H,data:N({[d]:j,centerOffset:F-j-H},tt&&{alignmentOffset:H}),reset:tt}}});function So(e,t,n){return(e?[...n.filter(i=>ot(i)===e),...n.filter(i=>ot(i)!==e)]:n.filter(i=>it(i)===i)).filter(i=>e?ot(i)===e||(t?te(i)!==i:!1):!0)}var xo=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(n){var o,i,s;let{rects:r,middlewareData:l,placement:a,platform:c,elements:h}=n,f=St(t,n),{crossAxis:u=!1,alignment:d,allowedPlacements:g=Ze,autoAlignment:b=!0}=f,w=Re(f,bo),y=d!==void 0||g===Ze?So(d||null,b,g):g,x=await Fe(n,w),O=((o=l.autoPlacement)==null?void 0:o.index)||0,m=y[O];if(m==null)return{};let S=_n(m,r,await(c.isRTL==null?void 0:c.isRTL(h.floating)));if(a!==m)return{reset:{placement:y[0]}};let A=[x[it(m)],x[S[0]],x[S[1]]],C=[...((i=l.autoPlacement)==null?void 0:i.overflows)||[],{placement:m,overflows:A}],k=y[O+1];if(k)return{data:{index:O+1,overflows:C},reset:{placement:k}};let D=C.map(_=>{let P=ot(_.placement);return[_.placement,P&&u?_.overflows.slice(0,2).reduce((F,j)=>F+j,0):_.overflows[0],_.overflows]}).sort((_,P)=>_[1]-P[1]),E=((s=D.filter(_=>_[2].slice(0,ot(_[0])?2:3).every(P=>P<=0))[0])==null?void 0:s[0])||D[0][0];return E!==a?{data:{index:O+1,overflows:C},reset:{placement:E}}:{}}}},_o=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var o,i;let{placement:s,middlewareData:r,rects:l,initialPlacement:a,platform:c,elements:h}=n,f=St(t,n),{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:g,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0}=f,x=Re(f,vo);if((o=r.arrow)!=null&&o.alignmentOffset)return{};let O=it(s),m=yt(a),S=it(a)===a,A=await(c.isRTL==null?void 0:c.isRTL(h.floating)),C=g||(S||!y?[ee(a)]:ho(a)),k=w!=="none";!g&&k&&C.push(...mo(a,y,w,A));let D=[a,...C],p=await Fe(n,x),E=[],_=((i=r.flip)==null?void 0:i.overflows)||[];if(u&&E.push(p[O]),d){let H=_n(s,l,A);E.push(p[H[0]],p[H[1]])}if(_=[..._,{placement:s,overflows:E}],!E.every(H=>H<=0)){var P,F;let H=(((P=r.flip)==null?void 0:P.index)||0)+1,zt=D[H];if(zt){var j;let U=d==="alignment"?m!==yt(zt):!1,K=((j=_[0])==null?void 0:j.overflows[0])>0;if(!U||K)return{data:{index:H,overflows:_},reset:{placement:zt}}}let lt=(F=_.filter(U=>U.overflows[0]<=0).sort((U,K)=>U.overflows[1]-K.overflows[1])[0])==null?void 0:F.placement;if(!lt)switch(b){case"bestFit":{var tt;let U=(tt=_.filter(K=>{if(k){let at=yt(K.placement);return at===m||at==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(at=>at>0).reduce((at,Bn)=>at+Bn,0)]).sort((K,at)=>K[1]-at[1])[0])==null?void 0:tt[0];U&&(lt=U);break}case"initialPlacement":lt=a;break}if(s!==lt)return{reset:{placement:lt}}}return{}}}},Eo=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){let{x:o,y:i,placement:s}=n,r=St(t,n),{mainAxis:l=!0,crossAxis:a=!1,limiter:c={fn:x=>{let{x:O,y:m}=x;return{x:O,y:m}}}}=r,h=Re(r,yo),f={x:o,y:i},u=await Fe(n,h),d=yt(it(s)),g=Me(d),b=f[g],w=f[d];if(l){let x=g==="y"?"top":"left",O=g==="y"?"bottom":"right",m=b+u[x],S=b-u[O];b=me(m,b,S)}if(a){let x=d==="y"?"top":"left",O=d==="y"?"bottom":"right",m=w+u[x],S=w-u[O];w=me(m,w,S)}let y=c.fn(N({},n,{[g]:b,[d]:w}));return N({},y,{data:{x:y.x-o,y:y.y-i,enabled:{[g]:l,[d]:a}}})}}},To=function(t){return t===void 0&&(t={}),{options:t,fn(n){let{x:o,y:i,placement:s,rects:r,middlewareData:l}=n,{offset:a=0,mainAxis:c=!0,crossAxis:h=!0}=St(t,n),f={x:o,y:i},u=yt(s),d=Me(u),g=f[d],b=f[u],w=St(a,n),y=typeof w=="number"?{mainAxis:w,crossAxis:0}:N({mainAxis:0,crossAxis:0},w);if(c){let m=d==="y"?"height":"width",S=r.reference[d]-r.floating[m]+y.mainAxis,A=r.reference[d]+r.reference[m]-y.mainAxis;g<S?g=S:g>A&&(g=A)}if(h){var x,O;let m=d==="y"?"width":"height",S=["top","left"].includes(it(s)),A=r.reference[u]-r.floating[m]+(S&&((x=l.offset)==null?void 0:x[u])||0)+(S?0:y.crossAxis),C=r.reference[u]+r.reference[m]+(S?0:((O=l.offset)==null?void 0:O[u])||0)-(S?y.crossAxis:0);b<A?b=A:b>C&&(b=C)}return{[d]:g,[u]:b}}}};function ie(){return typeof window<"u"}function Dt(e){return Tn(e)?(e.nodeName||"").toLowerCase():"#document"}function B(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $(e){var t;return(t=(Tn(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Tn(e){return ie()?e instanceof Node||e instanceof B(e).Node:!1}function q(e){return ie()?e instanceof Element||e instanceof B(e).Element:!1}function Q(e){return ie()?e instanceof HTMLElement||e instanceof B(e).HTMLElement:!1}function tn(e){return!ie()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof B(e).ShadowRoot}function qt(e){let{overflow:t,overflowX:n,overflowY:o,display:i}=Y(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(i)}function Io(e){return["table","td","th"].includes(Dt(e))}function se(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ne(e){let t=He(),n=q(e)?Y(e):e;return["transform","translate","scale","rotate","perspective"].some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function Co(e){let t=dt(e);for(;Q(t)&&!Lt(t);){if(Ne(t))return t;if(se(t))return null;t=dt(t)}return null}function He(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Lt(e){return["html","body","#document"].includes(Dt(e))}function Y(e){return B(e).getComputedStyle(e)}function re(e){return q(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dt(e){if(Dt(e)==="html")return e;let t=e.assignedSlot||e.parentNode||tn(e)&&e.host||$(e);return tn(t)?t.host:t}function In(e){let t=dt(e);return Lt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Q(t)&&qt(t)?t:In(t)}function Vt(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);let i=In(e),s=i===((o=e.ownerDocument)==null?void 0:o.body),r=B(i);if(s){let l=ge(r);return t.concat(r,r.visualViewport||[],qt(i)?i:[],l&&n?Vt(l):[])}return t.concat(i,Vt(i,[],n))}function ge(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cn(e){let t=Y(e),n=parseFloat(t.width)||0,o=parseFloat(t.height)||0,i=Q(e),s=i?e.offsetWidth:n,r=i?e.offsetHeight:o,l=$t(n)!==s||$t(o)!==r;return l&&(n=s,o=r),{width:n,height:o,$:l}}function Ue(e){return q(e)?e:e.contextElement}function Ct(e){let t=Ue(e);if(!Q(t))return X(1);let n=t.getBoundingClientRect(),{width:o,height:i,$:s}=Cn(t),r=(s?$t(n.width):n.width)/o,l=(s?$t(n.height):n.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!l||!Number.isFinite(l))&&(l=1),{x:r,y:l}}var Ao=X(0);function An(e){let t=B(e);return!He()||!t.visualViewport?Ao:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ro(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==B(e)?!1:t}function xt(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);let i=e.getBoundingClientRect(),s=Ue(e),r=X(1);t&&(o?q(o)&&(r=Ct(o)):r=Ct(e));let l=Ro(s,n,o)?An(s):X(0),a=(i.left+l.x)/r.x,c=(i.top+l.y)/r.y,h=i.width/r.x,f=i.height/r.y;if(s){let u=B(s),d=o&&q(o)?B(o):o,g=u,b=ge(g);for(;b&&o&&d!==g;){let w=Ct(b),y=b.getBoundingClientRect(),x=Y(b),O=y.left+(b.clientLeft+parseFloat(x.paddingLeft))*w.x,m=y.top+(b.clientTop+parseFloat(x.paddingTop))*w.y;a*=w.x,c*=w.y,h*=w.x,f*=w.y,a+=O,c+=m,g=B(b),b=ge(g)}}return ne({width:h,height:f,x:a,y:c})}function Be(e,t){let n=re(e).scrollLeft;return t?t.left+n:xt($(e)).left+n}function Rn(e,t,n){n===void 0&&(n=!1);let o=e.getBoundingClientRect(),i=o.left+t.scrollLeft-(n?0:Be(e,o)),s=o.top+t.scrollTop;return{x:i,y:s}}function Po(e){let{elements:t,rect:n,offsetParent:o,strategy:i}=e,s=i==="fixed",r=$(o),l=t?se(t.floating):!1;if(o===r||l&&s)return n;let a={scrollLeft:0,scrollTop:0},c=X(1),h=X(0),f=Q(o);if((f||!f&&!s)&&((Dt(o)!=="body"||qt(r))&&(a=re(o)),Q(o))){let d=xt(o);c=Ct(o),h.x=d.x+o.clientLeft,h.y=d.y+o.clientTop}let u=r&&!f&&!s?Rn(r,a,!0):X(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+h.x+u.x,y:n.y*c.y-a.scrollTop*c.y+h.y+u.y}}function Lo(e){return Array.from(e.getClientRects())}function Mo(e){let t=$(e),n=re(e),o=e.ownerDocument.body,i=vt(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=vt(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),r=-n.scrollLeft+Be(e),l=-n.scrollTop;return Y(o).direction==="rtl"&&(r+=vt(t.clientWidth,o.clientWidth)-i),{width:i,height:s,x:r,y:l}}function ko(e,t){let n=B(e),o=$(e),i=n.visualViewport,s=o.clientWidth,r=o.clientHeight,l=0,a=0;if(i){s=i.width,r=i.height;let c=He();(!c||c&&t==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:r,x:l,y:a}}function Do(e,t){let n=xt(e,!0,t==="fixed"),o=n.top+e.clientTop,i=n.left+e.clientLeft,s=Q(e)?Ct(e):X(1),r=e.clientWidth*s.x,l=e.clientHeight*s.y,a=i*s.x,c=o*s.y;return{width:r,height:l,x:a,y:c}}function en(e,t,n){let o;if(t==="viewport")o=ko(e,n);else if(t==="document")o=Mo($(e));else if(q(t))o=Do(t,n);else{let i=An(e);o={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return ne(o)}function Pn(e,t){let n=dt(e);return n===t||!q(n)||Lt(n)?!1:Y(n).position==="fixed"||Pn(n,t)}function Fo(e,t){let n=t.get(e);if(n)return n;let o=Vt(e,[],!1).filter(l=>q(l)&&Dt(l)!=="body"),i=null,s=Y(e).position==="fixed",r=s?dt(e):e;for(;q(r)&&!Lt(r);){let l=Y(r),a=Ne(r);!a&&l.position==="fixed"&&(i=null),(s?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||qt(r)&&!a&&Pn(e,r))?o=o.filter(h=>h!==r):i=l,r=dt(r)}return t.set(e,o),o}function No(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e,r=[...n==="clippingAncestors"?se(t)?[]:Fo(t,this._c):[].concat(n),o],l=r[0],a=r.reduce((c,h)=>{let f=en(t,h,i);return c.top=vt(f.top,c.top),c.right=Pt(f.right,c.right),c.bottom=Pt(f.bottom,c.bottom),c.left=vt(f.left,c.left),c},en(t,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Ho(e){let{width:t,height:n}=Cn(e);return{width:t,height:n}}function Uo(e,t,n){let o=Q(t),i=$(t),s=n==="fixed",r=xt(e,!0,s,t),l={scrollLeft:0,scrollTop:0},a=X(0);function c(){a.x=Be(i)}if(o||!o&&!s)if((Dt(t)!=="body"||qt(i))&&(l=re(t)),o){let d=xt(t,!0,s,t);a.x=d.x+t.clientLeft,a.y=d.y+t.clientTop}else i&&c();s&&!o&&i&&c();let h=i&&!o&&!s?Rn(i,l):X(0),f=r.left+l.scrollLeft-a.x-h.x,u=r.top+l.scrollTop-a.y-h.y;return{x:f,y:u,width:r.width,height:r.height}}function fe(e){return Y(e).position==="static"}function nn(e,t){if(!Q(e)||Y(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $(e)===n&&(n=n.ownerDocument.body),n}function Ln(e,t){let n=B(e);if(se(e))return n;if(!Q(e)){let i=dt(e);for(;i&&!Lt(i);){if(q(i)&&!fe(i))return i;i=dt(i)}return n}let o=nn(e,t);for(;o&&Io(o)&&fe(o);)o=nn(o,t);return o&&Lt(o)&&fe(o)&&!Ne(o)?n:o||Co(e)||n}var Bo=async function(t){let n=this.getOffsetParent||Ln,o=this.getDimensions,i=await o(t.floating);return{reference:Uo(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Vo(e){return Y(e).direction==="rtl"}var jo={convertOffsetParentRelativeRectToViewportRelativeRect:Po,getDocumentElement:$,getClippingRect:No,getOffsetParent:Ln,getElementRects:Bo,getClientRects:Lo,getDimensions:Ho,getScale:Ct,isElement:q,isRTL:Vo};function Mn(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Wo(e,t){let n=null,o,i=$(e);function s(){var l;clearTimeout(o),(l=n)==null||l.disconnect(),n=null}function r(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();let c=e.getBoundingClientRect(),{left:h,top:f,width:u,height:d}=c;if(l||t(),!u||!d)return;let g=Qt(f),b=Qt(i.clientWidth-(h+u)),w=Qt(i.clientHeight-(f+d)),y=Qt(h),O={rootMargin:-g+"px "+-b+"px "+-w+"px "+-y+"px",threshold:vt(0,Pt(1,a))||1},m=!0;function S(A){let C=A[0].intersectionRatio;if(C!==a){if(!m)return r();C?r(!1,C):o=setTimeout(()=>{r(!1,1e-7)},1e3)}C===1&&!Mn(c,e.getBoundingClientRect())&&r(),m=!1}try{n=new IntersectionObserver(S,N({},O,{root:i.ownerDocument}))}catch{n=new IntersectionObserver(S,O)}n.observe(e)}return r(!0),s}function qo(e,t,n,o){o===void 0&&(o={});let{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=o,c=Ue(e),h=i||s?[...c?Vt(c):[],...Vt(t)]:[];h.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});let f=c&&l?Wo(c,n):null,u=-1,d=null;r&&(d=new ResizeObserver(y=>{let[x]=y;x&&x.target===c&&d&&(d.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var O;(O=d)==null||O.observe(t)})),n()}),c&&!a&&d.observe(c),d.observe(t));let g,b=a?xt(e):null;a&&w();function w(){let y=xt(e);b&&!Mn(b,y)&&n(),b=y,g=requestAnimationFrame(w)}return n(),()=>{var y;h.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),f?.(),(y=d)==null||y.disconnect(),d=null,a&&cancelAnimationFrame(g)}}var Yo=xo,zo=Eo,Go=_o,Ko=Oo,Jo=To,Xo=(e,t,n)=>{let o=new Map,i=N({platform:jo},n),s=N({},i.platform,{_c:o});return wo(e,t,N({},i,{platform:s}))};function Qo(e){e.cleanup&&e.cleanup();let t=e._getResolvedAttachToOptions(),n=t.element,o=oi(t,e),i=Sn(t);return i&&(n=document.body,e.shepherdElementComponent.getElement().classList.add("shepherd-centered")),e.cleanup=qo(n,e.el,()=>{if(!e.el){e.cleanup==null||e.cleanup();return}ti(n,e,o,i)}),e.target=t.element,o}function Zo(e,t){return{floatingUIOptions:Pe(e.floatingUIOptions||{},t.floatingUIOptions||{})}}function $o(e){e.cleanup&&e.cleanup(),e.cleanup=null}function ti(e,t,n,o){return Xo(e,t.el,n).then(ei(t,o)).then(i=>new Promise(s=>{setTimeout(()=>s(i),300)})).then(i=>{i!=null&&i.el&&(i.el.tabIndex=0,i.el.focus({preventScroll:!0}))})}function ei(e,t){return({x:n,y:o,placement:i,middlewareData:s})=>(e.el&&(t?Object.assign(e.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(e.el.style,{position:"absolute",left:`${n}px`,top:`${o}px`}),e.el.dataset.popperPlacement=i,ni(e.el,s)),e)}function ni(e,t){let n=e.querySelector(".shepherd-arrow");if(Rt(n)&&t.arrow){let{x:o,y:i}=t.arrow;Object.assign(n.style,{left:o!=null?`${o}px`:"",top:i!=null?`${i}px`:""})}}function oi(e,t){var n,o,i;let s={strategy:"absolute"};s.middleware=[];let r=ii(t),l=Sn(e),a=(n=e.on)==null?void 0:n.includes("auto"),c=(e==null||(o=e.on)==null?void 0:o.includes("-start"))||(e==null||(i=e.on)==null?void 0:i.includes("-end"));if(!l){if(a){var h;s.middleware.push(Yo({crossAxis:!0,alignment:c?e==null||(h=e.on)==null?void 0:h.split("-").pop():null}))}else s.middleware.push(Go());if(s.middleware.push(zo({limiter:Jo(),crossAxis:!0})),r){let f=typeof t.options.arrow=="object"?t.options.arrow:{padding:4};s.middleware.push(Ko({element:r,padding:c?f.padding:0}))}a||(s.placement=e.on)}return Pe(s,t.options.floatingUIOptions||{})}function ii(e){return e.options.arrow&&e.el?e.el.querySelector(".shepherd-arrow"):!1}function V(){}function si(e,t){for(let n in t)e[n]=t[n];return e}function kn(e){return e()}function on(){return Object.create(null)}function Yt(e){e.forEach(kn)}function Ve(e){return typeof e=="function"}function st(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ri(e){return Object.keys(e).length===0}function Mt(e,t){e.appendChild(t)}function G(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function li(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Z(e){return document.createElement(e)}function sn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Dn(e){return document.createTextNode(e)}function oe(){return Dn(" ")}function ai(){return Dn("")}function le(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function I(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}var ci=["width","height"];function rn(e,t){let n=Object.getOwnPropertyDescriptors(e.__proto__);for(let o in t)t[o]==null?e.removeAttribute(o):o==="style"?e.style.cssText=t[o]:o==="__value"?e.value=e[o]=t[o]:n[o]&&n[o].set&&ci.indexOf(o)===-1?e[o]=t[o]:I(e,o,t[o])}function ui(e){return Array.from(e.childNodes)}function Et(e,t,n){e.classList.toggle(t,!!n)}var jt;function Ht(e){jt=e}function je(){if(!jt)throw new Error("Function called outside component initialization");return jt}function fi(e){je().$$.on_mount.push(e)}function We(e){je().$$.after_update.push(e)}function di(e){je().$$.on_destroy.push(e)}var It=[],kt=[],At=[],ln=[],hi=Promise.resolve(),be=!1;function pi(){be||(be=!0,hi.then(Fn))}function ve(e){At.push(e)}var de=new Set,Tt=0;function Fn(){if(Tt!==0)return;let e=jt;do{try{for(;Tt<It.length;){let t=It[Tt];Tt++,Ht(t),mi(t.$$)}}catch(t){throw It.length=0,Tt=0,t}for(Ht(null),It.length=0,Tt=0;kt.length;)kt.pop()();for(let t=0;t<At.length;t+=1){let n=At[t];de.has(n)||(de.add(n),n())}At.length=0}while(It.length);for(;ln.length;)ln.pop()();be=!1,de.clear(),Ht(e)}function mi(e){if(e.fragment!==null){e.update(),Yt(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ve)}}function gi(e){let t=[],n=[];At.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),At=t}var Zt=new Set,bt;function wt(){bt={r:0,c:[],p:bt}}function Ot(){bt.r||Yt(bt.c),bt=bt.p}function T(e,t){e&&e.i&&(Zt.delete(e),e.i(t))}function R(e,t,n,o){if(e&&e.o){if(Zt.has(e))return;Zt.add(e),bt.c.push(()=>{Zt.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function an(e){return e?.length!==void 0?e:Array.from(e)}function bi(e,t){let n={},o={},i={$$scope:1},s=e.length;for(;s--;){let r=e[s],l=t[s];if(l){for(let a in r)a in l||(o[a]=1);for(let a in l)i[a]||(n[a]=l[a],i[a]=1);e[s]=l}else for(let a in r)i[a]=1}for(let r in o)r in n||(n[r]=void 0);return n}function _t(e){e&&e.c()}function pt(e,t,n){let{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),ve(()=>{let s=e.$$.on_mount.map(kn).filter(Ve);e.$$.on_destroy?e.$$.on_destroy.push(...s):Yt(s),e.$$.on_mount=[]}),i.forEach(ve)}function mt(e,t){let n=e.$$;n.fragment!==null&&(gi(n.after_update),Yt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function vi(e,t){e.$$.dirty[0]===-1&&(It.push(e),pi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function rt(e,t,n,o,i,s,r=null,l=[-1]){let a=jt;Ht(e);let c=e.$$={fragment:null,ctx:[],props:s,update:V,not_equal:i,bound:on(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:on(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};r&&r(c.root);let h=!1;if(c.ctx=n?n(e,t.props||{},(f,u,...d)=>{let g=d.length?d[0]:u;return c.ctx&&i(c.ctx[f],c.ctx[f]=g)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](g),h&&vi(e,f)),u}):[],c.update(),h=!0,Yt(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){let f=ui(t.target);c.fragment&&c.fragment.l(f),f.forEach(W)}else c.fragment&&c.fragment.c();t.intro&&T(e.$$.fragment),pt(e,t.target,t.anchor),Fn()}Ht(a)}var z=class{constructor(){this.$$=void 0,this.$$set=void 0}$destroy(){mt(this,1),this.$destroy=V}$on(t,n){if(!Ve(n))return V;let o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{let i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!ri(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}},yi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yi);function wi(e){let t,n,o,i,s;return{c(){t=Z("button"),I(t,"aria-label",n=e[3]?e[3]:null),I(t,"class",o=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`),t.disabled=e[2],I(t,"tabindex","0"),I(t,"type","button")},m(r,l){G(r,t,l),t.innerHTML=e[5],i||(s=le(t,"click",function(){Ve(e[0])&&e[0].apply(this,arguments)}),i=!0)},p(r,[l]){e=r,l&32&&(t.innerHTML=e[5]),l&8&&n!==(n=e[3]?e[3]:null)&&I(t,"aria-label",n),l&18&&o!==(o=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`)&&I(t,"class",o),l&4&&(t.disabled=e[2])},i:V,o:V,d(r){r&&W(t),i=!1,s()}}}function Oi(e,t,n){let{config:o,step:i}=t,s,r,l,a,c,h;function f(u){return ft(u)?u=u.call(i):u}return e.$$set=u=>{"config"in u&&n(6,o=u.config),"step"in u&&n(7,i=u.step)},e.$$.update=()=>{e.$$.dirty&192&&(n(0,s=o.action?o.action.bind(i.tour):null),n(1,r=o.classes),n(2,l=o.disabled?f(o.disabled):!1),n(3,a=o.label?f(o.label):null),n(4,c=o.secondary),n(5,h=o.text?f(o.text):null))},[s,r,l,a,c,h,o,i]}var ye=class extends z{constructor(t){super(),rt(this,t,Oi,wi,st,{config:6,step:7})}};function cn(e,t,n){let o=e.slice();return o[2]=t[n],o}function un(e){let t,n,o=an(e[1]),i=[];for(let r=0;r<o.length;r+=1)i[r]=fn(cn(e,o,r));let s=r=>R(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=ai()},m(r,l){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,l);G(r,t,l),n=!0},p(r,l){if(l&3){o=an(r[1]);let a;for(a=0;a<o.length;a+=1){let c=cn(r,o,a);i[a]?(i[a].p(c,l),T(i[a],1)):(i[a]=fn(c),i[a].c(),T(i[a],1),i[a].m(t.parentNode,t))}for(wt(),a=o.length;a<i.length;a+=1)s(a);Ot()}},i(r){if(!n){for(let l=0;l<o.length;l+=1)T(i[l]);n=!0}},o(r){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)R(i[l]);n=!1},d(r){r&&W(t),li(i,r)}}}function fn(e){let t,n;return t=new ye({props:{config:e[2],step:e[0]}}),{c(){_t(t.$$.fragment)},m(o,i){pt(t,o,i),n=!0},p(o,i){let s={};i&2&&(s.config=o[2]),i&1&&(s.step=o[0]),t.$set(s)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){mt(t,o)}}}function Si(e){let t,n,o=e[1]&&un(e);return{c(){t=Z("footer"),o&&o.c(),I(t,"class","shepherd-footer")},m(i,s){G(i,t,s),o&&o.m(t,null),n=!0},p(i,[s]){i[1]?o?(o.p(i,s),s&2&&T(o,1)):(o=un(i),o.c(),T(o,1),o.m(t,null)):o&&(wt(),R(o,1,1,()=>{o=null}),Ot())},i(i){n||(T(o),n=!0)},o(i){R(o),n=!1},d(i){i&&W(t),o&&o.d()}}}function xi(e,t,n){let o,{step:i}=t;return e.$$set=s=>{"step"in s&&n(0,i=s.step)},e.$$.update=()=>{e.$$.dirty&1&&n(1,o=i.options.buttons)},[i,o]}var we=class extends z{constructor(t){super(),rt(this,t,xi,Si,st,{step:0})}};function _i(e){let t,n,o,i,s;return{c(){t=Z("button"),n=Z("span"),n.textContent="\xD7",I(n,"aria-hidden","true"),I(t,"aria-label",o=e[0].label?e[0].label:"Close Tour"),I(t,"class","shepherd-cancel-icon"),I(t,"type","button")},m(r,l){G(r,t,l),Mt(t,n),i||(s=le(t,"click",e[1]),i=!0)},p(r,[l]){l&1&&o!==(o=r[0].label?r[0].label:"Close Tour")&&I(t,"aria-label",o)},i:V,o:V,d(r){r&&W(t),i=!1,s()}}}function Ei(e,t,n){let{cancelIcon:o,step:i}=t,s=r=>{r.preventDefault(),i.cancel()};return e.$$set=r=>{"cancelIcon"in r&&n(0,o=r.cancelIcon),"step"in r&&n(2,i=r.step)},[o,s,i]}var Oe=class extends z{constructor(t){super(),rt(this,t,Ei,_i,st,{cancelIcon:0,step:2})}};function Ti(e){let t;return{c(){t=Z("h3"),I(t,"id",e[1]),I(t,"class","shepherd-title")},m(n,o){G(n,t,o),e[3](t)},p(n,[o]){o&2&&I(t,"id",n[1])},i:V,o:V,d(n){n&&W(t),e[3](null)}}}function Ii(e,t,n){let{labelId:o,element:i,title:s}=t;We(()=>{ft(s)&&n(2,s=s()),n(0,i.innerHTML=s,i)});function r(l){kt[l?"unshift":"push"](()=>{i=l,n(0,i)})}return e.$$set=l=>{"labelId"in l&&n(1,o=l.labelId),"element"in l&&n(0,i=l.element),"title"in l&&n(2,s=l.title)},[i,o,s,r]}var Se=class extends z{constructor(t){super(),rt(this,t,Ii,Ti,st,{labelId:1,element:0,title:2})}};function dn(e){let t,n;return t=new Se({props:{labelId:e[0],title:e[2]}}),{c(){_t(t.$$.fragment)},m(o,i){pt(t,o,i),n=!0},p(o,i){let s={};i&1&&(s.labelId=o[0]),i&4&&(s.title=o[2]),t.$set(s)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){mt(t,o)}}}function hn(e){let t,n;return t=new Oe({props:{cancelIcon:e[3],step:e[1]}}),{c(){_t(t.$$.fragment)},m(o,i){pt(t,o,i),n=!0},p(o,i){let s={};i&8&&(s.cancelIcon=o[3]),i&2&&(s.step=o[1]),t.$set(s)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){mt(t,o)}}}function Ci(e){let t,n,o,i=e[2]&&dn(e),s=e[3]&&e[3].enabled&&hn(e);return{c(){t=Z("header"),i&&i.c(),n=oe(),s&&s.c(),I(t,"class","shepherd-header")},m(r,l){G(r,t,l),i&&i.m(t,null),Mt(t,n),s&&s.m(t,null),o=!0},p(r,[l]){r[2]?i?(i.p(r,l),l&4&&T(i,1)):(i=dn(r),i.c(),T(i,1),i.m(t,n)):i&&(wt(),R(i,1,1,()=>{i=null}),Ot()),r[3]&&r[3].enabled?s?(s.p(r,l),l&8&&T(s,1)):(s=hn(r),s.c(),T(s,1),s.m(t,null)):s&&(wt(),R(s,1,1,()=>{s=null}),Ot())},i(r){o||(T(i),T(s),o=!0)},o(r){R(i),R(s),o=!1},d(r){r&&W(t),i&&i.d(),s&&s.d()}}}function Ai(e,t,n){let{labelId:o,step:i}=t,s,r;return e.$$set=l=>{"labelId"in l&&n(0,o=l.labelId),"step"in l&&n(1,i=l.step)},e.$$.update=()=>{e.$$.dirty&2&&(n(2,s=i.options.title),n(3,r=i.options.cancelIcon))},[o,i,s,r]}var xe=class extends z{constructor(t){super(),rt(this,t,Ai,Ci,st,{labelId:0,step:1})}};function Ri(e){let t;return{c(){t=Z("div"),I(t,"class","shepherd-text"),I(t,"id",e[1])},m(n,o){G(n,t,o),e[3](t)},p(n,[o]){o&2&&I(t,"id",n[1])},i:V,o:V,d(n){n&&W(t),e[3](null)}}}function Pi(e,t,n){let{descriptionId:o,element:i,step:s}=t;We(()=>{let{text:l}=s.options;ft(l)&&(l=l.call(s)),Rt(l)?i.appendChild(l):n(0,i.innerHTML=l,i)});function r(l){kt[l?"unshift":"push"](()=>{i=l,n(0,i)})}return e.$$set=l=>{"descriptionId"in l&&n(1,o=l.descriptionId),"element"in l&&n(0,i=l.element),"step"in l&&n(2,s=l.step)},[i,o,s,r]}var _e=class extends z{constructor(t){super(),rt(this,t,Pi,Ri,st,{descriptionId:1,element:0,step:2})}};function pn(e){let t,n;return t=new xe({props:{labelId:e[1],step:e[2]}}),{c(){_t(t.$$.fragment)},m(o,i){pt(t,o,i),n=!0},p(o,i){let s={};i&2&&(s.labelId=o[1]),i&4&&(s.step=o[2]),t.$set(s)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){mt(t,o)}}}function mn(e){let t,n;return t=new _e({props:{descriptionId:e[0],step:e[2]}}),{c(){_t(t.$$.fragment)},m(o,i){pt(t,o,i),n=!0},p(o,i){let s={};i&1&&(s.descriptionId=o[0]),i&4&&(s.step=o[2]),t.$set(s)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){mt(t,o)}}}function gn(e){let t,n;return t=new we({props:{step:e[2]}}),{c(){_t(t.$$.fragment)},m(o,i){pt(t,o,i),n=!0},p(o,i){let s={};i&4&&(s.step=o[2]),t.$set(s)},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){mt(t,o)}}}function Li(e){let t,n=!M(e[2].options.title)||e[2].options.cancelIcon&&e[2].options.cancelIcon.enabled,o,i=!M(e[2].options.text),s,r=Array.isArray(e[2].options.buttons)&&e[2].options.buttons.length,l,a=n&&pn(e),c=i&&mn(e),h=r&&gn(e);return{c(){t=Z("div"),a&&a.c(),o=oe(),c&&c.c(),s=oe(),h&&h.c(),I(t,"class","shepherd-content")},m(f,u){G(f,t,u),a&&a.m(t,null),Mt(t,o),c&&c.m(t,null),Mt(t,s),h&&h.m(t,null),l=!0},p(f,[u]){u&4&&(n=!M(f[2].options.title)||f[2].options.cancelIcon&&f[2].options.cancelIcon.enabled),n?a?(a.p(f,u),u&4&&T(a,1)):(a=pn(f),a.c(),T(a,1),a.m(t,o)):a&&(wt(),R(a,1,1,()=>{a=null}),Ot()),u&4&&(i=!M(f[2].options.text)),i?c?(c.p(f,u),u&4&&T(c,1)):(c=mn(f),c.c(),T(c,1),c.m(t,s)):c&&(wt(),R(c,1,1,()=>{c=null}),Ot()),u&4&&(r=Array.isArray(f[2].options.buttons)&&f[2].options.buttons.length),r?h?(h.p(f,u),u&4&&T(h,1)):(h=gn(f),h.c(),T(h,1),h.m(t,null)):h&&(wt(),R(h,1,1,()=>{h=null}),Ot())},i(f){l||(T(a),T(c),T(h),l=!0)},o(f){R(a),R(c),R(h),l=!1},d(f){f&&W(t),a&&a.d(),c&&c.d(),h&&h.d()}}}function Mi(e,t,n){let{descriptionId:o,labelId:i,step:s}=t;return e.$$set=r=>{"descriptionId"in r&&n(0,o=r.descriptionId),"labelId"in r&&n(1,i=r.labelId),"step"in r&&n(2,s=r.step)},[o,i,s]}var Ee=class extends z{constructor(t){super(),rt(this,t,Mi,Li,st,{descriptionId:0,labelId:1,step:2})}};function bn(e){let t;return{c(){t=Z("div"),I(t,"class","shepherd-arrow"),I(t,"data-popper-arrow","")},m(n,o){G(n,t,o)},d(n){n&&W(t)}}}function ki(e){let t,n,o,i,s,r,l,a,c=e[4].options.arrow&&e[4].options.attachTo&&e[4].options.attachTo.element&&e[4].options.attachTo.on&&bn();o=new Ee({props:{descriptionId:e[2],labelId:e[3],step:e[4]}});let h=[{"aria-describedby":i=M(e[4].options.text)?null:e[2]},{"aria-labelledby":s=e[4].options.title?e[3]:null},e[1],{open:"true"}],f={};for(let u=0;u<h.length;u+=1)f=si(f,h[u]);return{c(){t=Z("dialog"),c&&c.c(),n=oe(),_t(o.$$.fragment),rn(t,f),Et(t,"shepherd-has-cancel-icon",e[5]),Et(t,"shepherd-has-title",e[6]),Et(t,"shepherd-element",!0)},m(u,d){G(u,t,d),c&&c.m(t,null),Mt(t,n),pt(o,t,null),e[18](t),r=!0,l||(a=le(t,"keydown",e[7]),l=!0)},p(u,[d]){u[4].options.arrow&&u[4].options.attachTo&&u[4].options.attachTo.element&&u[4].options.attachTo.on?c||(c=bn(),c.c(),c.m(t,n)):c&&(c.d(1),c=null);let g={};d&4&&(g.descriptionId=u[2]),d&8&&(g.labelId=u[3]),d&16&&(g.step=u[4]),o.$set(g),rn(t,f=bi(h,[(!r||d&20&&i!==(i=M(u[4].options.text)?null:u[2]))&&{"aria-describedby":i},(!r||d&24&&s!==(s=u[4].options.title?u[3]:null))&&{"aria-labelledby":s},d&2&&u[1],{open:"true"}])),Et(t,"shepherd-has-cancel-icon",u[5]),Et(t,"shepherd-has-title",u[6]),Et(t,"shepherd-element",!0)},i(u){r||(T(o.$$.fragment,u),r=!0)},o(u){R(o.$$.fragment,u),r=!1},d(u){u&&W(t),c&&c.d(),mt(o),e[18](null),l=!1,a()}}}var Di=9,Fi=27,Ni=37,Hi=39;function vn(e){return e.split(" ").filter(t=>!!t.length)}function Ui(e,t,n){let{attachToElement:o,attachTofocusableDialogElements:i,classPrefix:s,element:r,descriptionId:l,focusableAttachToElements:a,firstFocusableAttachToElement:c,lastFocusableAttachToElement:h,firstFocusableDialogElement:f,focusableDialogElements:u,lastFocusableDialogElement:d,labelId:g,step:b,dataStepId:w}=t,y,x,O,m=()=>r;fi(()=>{n(1,w={[`data-${s}shepherd-step-id`]:b.id}),n(13,u=[...r.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')]),n(12,f=u[0]),n(14,d=u[u.length-1]);let p=b._getResolvedAttachToOptions();p!=null&&p.element&&(n(8,o=p.element),n(8,o.tabIndex=0,o),n(9,a=[o,...o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')]),n(10,c=a[0]),n(11,h=a[a.length-1]),o.addEventListener("keydown",k))}),di(()=>{var p;(p=o)==null||p.removeEventListener("keydown",k)}),We(()=>{O!==b.options.classes&&S()});function S(){A(O),O=b.options.classes,C(O)}function A(p){if(Ut(p)){let E=vn(p);E.length&&r.classList.remove(...E)}}function C(p){if(Ut(p)){let E=vn(p);E.length&&r.classList.add(...E)}}let k=p=>{let{tour:E}=b;switch(p.keyCode){case Di:if((!a||a.length===0)&&u.length===0){p.preventDefault();break}if(p.shiftKey)if(document.activeElement===f||document.activeElement.classList.contains("shepherd-element")){var _;p.preventDefault(),((_=h)!=null?_:d).focus()}else document.activeElement===c&&(p.preventDefault(),d.focus());else if(document.activeElement===d){var P;p.preventDefault(),((P=c)!=null?P:f).focus()}else document.activeElement===h&&(p.preventDefault(),f.focus());break;case Fi:E.options.exitOnEsc&&(p.preventDefault(),p.stopPropagation(),b.cancel());break;case Ni:E.options.keyboardNavigation&&(p.preventDefault(),p.stopPropagation(),E.back());break;case Hi:E.options.keyboardNavigation&&(p.preventDefault(),p.stopPropagation(),E.next());break}};function D(p){kt[p?"unshift":"push"](()=>{r=p,n(0,r)})}return e.$$set=p=>{"attachToElement"in p&&n(8,o=p.attachToElement),"attachTofocusableDialogElements"in p&&n(15,i=p.attachTofocusableDialogElements),"classPrefix"in p&&n(16,s=p.classPrefix),"element"in p&&n(0,r=p.element),"descriptionId"in p&&n(2,l=p.descriptionId),"focusableAttachToElements"in p&&n(9,a=p.focusableAttachToElements),"firstFocusableAttachToElement"in p&&n(10,c=p.firstFocusableAttachToElement),"lastFocusableAttachToElement"in p&&n(11,h=p.lastFocusableAttachToElement),"firstFocusableDialogElement"in p&&n(12,f=p.firstFocusableDialogElement),"focusableDialogElements"in p&&n(13,u=p.focusableDialogElements),"lastFocusableDialogElement"in p&&n(14,d=p.lastFocusableDialogElement),"labelId"in p&&n(3,g=p.labelId),"step"in p&&n(4,b=p.step),"dataStepId"in p&&n(1,w=p.dataStepId)},e.$$.update=()=>{e.$$.dirty&16&&(n(5,y=b.options&&b.options.cancelIcon&&b.options.cancelIcon.enabled),n(6,x=b.options&&b.options.title))},[r,w,l,g,b,y,x,k,o,a,c,h,f,u,d,i,s,m,D]}var Te=class extends z{constructor(t){super(),rt(this,t,Ui,ki,st,{attachToElement:8,attachTofocusableDialogElements:15,classPrefix:16,element:0,descriptionId:2,focusableAttachToElements:9,firstFocusableAttachToElement:10,lastFocusableAttachToElement:11,firstFocusableDialogElement:12,focusableDialogElements:13,lastFocusableDialogElement:14,labelId:3,step:4,dataStepId:1,getElement:17})}get getElement(){return this.$$.ctx[17]}},Wt=class extends Bt{constructor(t,n={}){return super(),this._resolvedAttachTo=void 0,this._resolvedExtraHighlightElements=void 0,this.classPrefix=void 0,this.el=void 0,this.target=void 0,this.tour=void 0,this.tour=t,this.classPrefix=this.tour.options?On(this.tour.options.classPrefix):"",this.styles=t.styles,this._resolvedAttachTo=null,Le(this),this._setOptions(n),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){$o(this),Rt(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){var t;(t=this.tour.modal)==null||t.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveExtraHiglightElements(){return this._resolvedExtraHighlightElements=ao(this),this._resolvedExtraHighlightElements}_resolveAttachToOptions(){return this._resolvedAttachTo=lo(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return this._resolvedAttachTo===null?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return ft(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(t){Object.assign(this.options,t),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){let t=`${this.id}-description`,n=`${this.id}-label`;return this.shepherdElementComponent=new Te({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:t,labelId:n,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(t){let{element:n}=this._getResolvedAttachToOptions();ft(this.options.scrollToHandler)?this.options.scrollToHandler(n):jn(n)&&typeof n.scrollIntoView=="function"&&n.scrollIntoView(t)}_getClassOptions(t){let n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,o=t.classes?t.classes:"",i=n&&n.classes?n.classes:"",s=[...o.split(" "),...i.split(" ")],r=new Set(s);return Array.from(r).join(" ").trim()}_setOptions(t={}){let n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;n=Pe({},n||{}),this.options=Object.assign({arrow:!0},n,t,Zo(n,t));let{when:o}=this.options;this.options.classes=this._getClassOptions(t),this.destroy(),this.id=this.options.id||`step-${xn()}`,o&&Object.keys(o).forEach(i=>{this.on(i,o[i],this)})}_setupElements(){M(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&ro(this),Qo(this)}_show(){var t;this.trigger("before-show"),this._resolveAttachToOptions(),this._resolveExtraHiglightElements(),this._setupElements(),this.tour.modal||this.tour.setupModal(),(t=this.tour.modal)==null||t.setupForStep(this),this._styleTargetElementForStep(this),this.el&&(this.el.hidden=!1),this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el&&(this.el.hidden=!1);let n=this.shepherdElementComponent.getElement(),o=this.target||document.body,i=this._resolvedExtraHighlightElements;o.classList.add(`${this.classPrefix}shepherd-enabled`),o.classList.add(`${this.classPrefix}shepherd-target`),n.classList.add("shepherd-enabled"),i?.forEach(s=>{s.classList.add(`${this.classPrefix}shepherd-enabled`),s.classList.add(`${this.classPrefix}shepherd-target`)}),this.trigger("show")}_styleTargetElementForStep(t){let n=t.target,o=t._resolvedExtraHighlightElements;if(!n)return;let i=t.options.highlightClass;i&&(n.classList.add(i),o?.forEach(s=>s.classList.add(i))),n.classList.remove("shepherd-target-click-disabled"),o?.forEach(s=>s.classList.remove("shepherd-target-click-disabled")),t.options.canClickTarget===!1&&(n.classList.add("shepherd-target-click-disabled"),o?.forEach(s=>s.classList.add("shepherd-target-click-disabled")))}_updateStepTargetOnHide(){let t=this.target||document.body,n=this._resolvedExtraHighlightElements,o=this.options.highlightClass;o&&(t.classList.remove(o),n?.forEach(i=>i.classList.remove(o))),t.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`),n?.forEach(i=>{i.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)})}};function Bi(e){if(e){let{steps:t}=e;t.forEach(n=>{n.options&&n.options.canClickTarget===!1&&n.options.attachTo&&(Rt(n.target)&&n.target.classList.remove("shepherd-target-click-disabled"),n._resolvedExtraHighlightElements&&n._resolvedExtraHighlightElements.forEach(o=>{Rt(o)&&o.classList.remove("shepherd-target-click-disabled")}))})}}function Vi(e){let t="",{innerWidth:n,innerHeight:o}=window;return e.forEach(i=>{let{width:s,height:r,x:l=0,y:a=0,r:c=0}=i,{topLeft:h=0,topRight:f=0,bottomRight:u=0,bottomLeft:d=0}=typeof c=="number"?{topLeft:c,topRight:c,bottomRight:c,bottomLeft:c}:c;t+=`M${l+h},${a}      a${h},${h},0,0,0-${h},${h}      V${r+a-d}      a${d},${d},0,0,0,${d},${d}      H${s+l-u}      a${u},${u},0,0,0,${u}-${u}      V${a+f}      a${f},${f},0,0,0-${f}-${f}      Z`}),`M${n},${o}          H0          V0          H${n}          V${o}          Z          ${t}`.replace(/\s/g,"")}function ji(e){let t,n,o,i,s;return{c(){t=sn("svg"),n=sn("path"),I(n,"d",e[2]),I(t,"class",o=`${e[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)},m(r,l){G(r,t,l),Mt(t,n),e[11](t),i||(s=le(t,"touchmove",e[3]),i=!0)},p(r,[l]){l&4&&I(n,"d",r[2]),l&2&&o!==(o=`${r[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)&&I(t,"class",o)},i:V,o:V,d(r){r&&W(t),e[11](null),i=!1,s()}}}function Nn(e){if(!e)return null;let n=e instanceof HTMLElement&&window.getComputedStyle(e).overflowY;return n!=="hidden"&&n!=="visible"&&e.scrollHeight>=e.clientHeight?e:Nn(e.parentElement)}function Wi(e){let t={top:0,left:0};if(!e)return t;let n=e.ownerDocument.defaultView;for(;n!==window.top;){var o;let r=(o=n)==null?void 0:o.frameElement;if(r){var i,s;let l=r.getBoundingClientRect();t.top+=l.top+((i=l.scrollTop)!=null?i:0),t.left+=l.left+((s=l.scrollLeft)!=null?s:0)}n=n.parent}return t}function qi(e,t){let n=e.getBoundingClientRect(),o=n.y||n.top,i=n.bottom||o+n.height;if(t){let r=t.getBoundingClientRect(),l=r.y||r.top,a=r.bottom||l+r.height;o=Math.max(o,l),i=Math.min(i,a)}let s=Math.max(i-o,0);return{y:o,height:s}}function Yi(e,t,n){let{element:o,openingProperties:i}=t,s=!1,r,l;c();let a=()=>o;function c(){n(4,i=[{width:0,height:0,x:0,y:0,r:0}])}function h(){n(1,s=!1),y()}function f(m=0,S=0,A=0,C=0,k,D,p){if(D){let E=[D,...p||[]];n(4,i=[]);for(let _ of E){if(!_||E.indexOf(_)!==E.lastIndexOf(_))continue;let{y:P,height:F}=qi(_,k),{x:j,width:tt,left:H}=_.getBoundingClientRect();E.some(lt=>{if(lt===_)return!1;let U=lt.getBoundingClientRect();return j>=U.left&&j+tt<=U.right&&P>=U.top&&P+F<=U.bottom})||i.push({width:tt+m*2,height:F+m*2,x:(j||H)+A-m,y:P+C-m,r:S})}}else c()}function u(m){y(),m.tour.options.useModalOverlay?(x(m),d()):h()}function d(){n(1,s=!0)}let g=m=>{m.preventDefault()},b=m=>{m.stopPropagation()};function w(){window.addEventListener("touchmove",g,{passive:!1})}function y(){r&&(cancelAnimationFrame(r),r=void 0),window.removeEventListener("touchmove",g,{passive:!1})}function x(m){let{modalOverlayOpeningPadding:S,modalOverlayOpeningRadius:A,modalOverlayOpeningXOffset:C=0,modalOverlayOpeningYOffset:k=0}=m.options,D=Wi(m.target),p=Nn(m.target),E=()=>{r=void 0,f(S,A,C+D.left,k+D.top,p,m.target,m._resolvedExtraHighlightElements),r=requestAnimationFrame(E)};E(),w()}function O(m){kt[m?"unshift":"push"](()=>{o=m,n(0,o)})}return e.$$set=m=>{"element"in m&&n(0,o=m.element),"openingProperties"in m&&n(4,i=m.openingProperties)},e.$$.update=()=>{e.$$.dirty&16&&n(2,l=Vi(i))},[o,s,l,b,i,a,c,h,f,u,d,O]}var Ie=class extends z{constructor(t){super(),rt(this,t,Yi,ji,st,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}},Ce=class extends Bt{constructor(){super(),this.activeTour=void 0,Le(this)}},Ae=class extends Bt{constructor(t={}){super(),this.trackedEvents=["active","cancel","complete","show"],this.classPrefix=void 0,this.currentStep=void 0,this.focusedElBeforeOpen=void 0,this.id=void 0,this.modal=void 0,this.options=void 0,this.steps=void 0,Le(this);let n={exitOnEsc:!0,keyboardNavigation:!0};return this.options=Object.assign({},n,t),this.classPrefix=On(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(i=>{(s=>{this.on(s,r=>{r=r||{},r.tour=this,ut.trigger(s,r)})})(i)}),this._setTourID(t.id),this}addStep(t,n){let o=t;return o instanceof Wt?o.tour=this:o=new Wt(this,o),M(n)?this.steps.push(o):this.steps.splice(n,0,o),o}addSteps(t){return Array.isArray(t)&&t.forEach(n=>{this.addStep(n)}),this}back(){let t=this.steps.indexOf(this.currentStep);this.show(t-1,!1)}async cancel(){if(this.options.confirmCancel){let t=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?",n;ft(this.options.confirmCancel)?n=await this.options.confirmCancel():n=window.confirm(t),n&&this._done("cancel")}else this._done("cancel")}complete(){this._done("complete")}getById(t){return this.steps.find(n=>n.id===t)}getCurrentStep(){return this.currentStep}hide(){let t=this.getCurrentStep();if(t)return t.hide()}isActive(){return ut.activeTour===this}next(){let t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?this.complete():this.show(t+1,!0)}removeStep(t){let n=this.getCurrentStep();this.steps.some((o,i)=>{if(o.id===t)return o.isOpen()&&o.hide(),o.destroy(),this.steps.splice(i,1),!0}),n&&n.id===t&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(t=0,n=!0){let o=Ut(t)?this.getById(t):this.steps[t];o&&(this._updateStateBeforeShow(),ft(o.options.showOn)&&!o.options.showOn()?this._skipStep(o,n):(this.currentStep=o,this.trigger("show",{step:o,previous:this.currentStep}),o.show()))}async start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this.setupModal(),this._setupActiveTour(),this.next()}_done(t){let n=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(o=>o.destroy()),Bi(this),this.trigger(t,{index:n}),ut.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),(t==="cancel"||t==="complete")&&this.modal){let o=document.querySelector(".shepherd-modal-overlay-container");o&&(o.remove(),this.modal=null)}Rt(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),ut.activeTour=this}setupModal(){this.modal=new Ie({target:this.options.modalContainer||document.body,props:{styles:this.styles}})}_skipStep(t,n){let o=this.steps.indexOf(t);if(o===this.steps.length-1)this.complete();else{let i=n?o+1:o-1;this.show(i,n)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(t){let n=this.options.tourName||"tour",o=t||xn();this.id=`${n}--${o}`}},ut=new Ce,Hn=typeof window>"u";ut.Step=Hn?he:Wt;ut.Tour=Hn?pe:Ae;var Un=class e{onboarding=nt(Jt);router=nt(ze);dialog=nt(Ge);tour;constructor(){this.tour=new ut.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"praxis-tutorial-step shadow-lg rounded-xl",scrollTo:{behavior:"smooth",block:"center"},cancelIcon:{enabled:!0},buttons:[{text:"Back",action:this.back.bind(this),classes:"mat-mdc-button"},{text:"Next",action:this.next.bind(this),classes:"mat-mdc-raised-button mat-primary"}]}}),this.initSteps(),this.tour.on("show",t=>{let n=t.step.id;this.onboarding.saveTutorialStep(n)}),this.tour.on("complete",()=>this.onComplete()),this.tour.on("cancel",()=>{})}start(t=!1){if(t){let n=this.onboarding.getTutorialState();if(n&&n.stepId){this.tour.show(n.stepId);return}}this.onboarding.startTutorialSession(),this.tour.start()}next(){this.tour.next()}back(){this.tour.back()}skipSection(){let t=this.tour.getCurrentStep()?.id,o={intro:"nav-assets","nav-assets":"nav-protocols","assets-machines":"nav-protocols","assets-resources":"nav-protocols","nav-protocols":"nav-run","protocols-import":"nav-run","nav-run":"nav-playground","run-step-protocol":"nav-playground","run-step-params":"nav-playground","run-step-machine":"nav-playground","run-step-assets":"nav-playground","run-step-deck":"nav-playground","nav-playground":"nav-settings","playground-term":"nav-settings","nav-settings":"settings-finish","settings-finish":"settings-finish"}[t]||"settings-finish";this.tour.show(o)}initSteps(){this.addStep({id:"intro",title:"Welcome to Praxis",text:"This is your dashboard overview. See active runs and system status at a glance.",attachTo:{element:'[data-tour-id="dashboard-root"]',on:"center"},route:"/app/home",buttons:[{text:"Start Tour",action:this.next.bind(this),classes:"mat-mdc-raised-button mat-primary"}]}),this.addStep({id:"nav-assets",title:"Asset Management",text:"Click here to manage your lab inventory, machines, and resources.",attachTo:{element:'[data-tour-id="nav-assets"]',on:"right"},advanceOn:{selector:'[data-tour-id="nav-assets"]',event:"click"}}),this.addStep({id:"assets-machines",title:"Machines (Liquid Handlers)",text:'Here you can define machines like Hamilton STAR or Opentrons Flex. Click "Add Machine" to register a new device.',attachTo:{element:'[data-tour-id="add-asset-btn"]',on:"bottom"},route:"/app/assets",queryParams:{type:"machine"},waitFor:'[data-tour-id="machine-list"]',advanceOn:{selector:'[data-tour-id="add-asset-btn"]',event:"click"}}),this.addStep({id:"assets-resources",title:"Labware Resources",text:"Switch to the Resources tab to manage plates, tips, and other labware.",attachTo:{element:'[data-tour-id="resource-list"]',on:"center"},route:"/app/assets",queryParams:{type:"resource"},waitFor:'[data-tour-id="resource-list"]'}),this.addStep({id:"nav-protocols",title:"Protocols",text:"Click here to access your protocol library.",attachTo:{element:'[data-tour-id="nav-protocols"]',on:"right"},advanceOn:{selector:'[data-tour-id="nav-protocols"]',event:"click"}}),this.addStep({id:"protocols-import",title:"Import Protocols",text:"Upload your Python protocol files (.py) here to make them available for execution.<br><br><em><strong>Note:</strong> Protocol upload is not yet available in Browser Mode as it requires server-side inspection. A solution is in development.</em>",attachTo:{element:'[data-tour-id="import-protocol-btn"]',on:"bottom"},route:"/app/protocols",waitFor:'[data-tour-id="protocol-table"]'}),this.addStep({id:"nav-run",title:"Run Protocol",text:"Ready to experiment? Click here to start the execution wizard.",attachTo:{element:'[data-tour-id="nav-run"]',on:"right"},advanceOn:{selector:'[data-tour-id="nav-run"]',event:"click"}}),this.addStep({id:"run-step-protocol",title:"1. Select Protocol",text:"First, select the protocol you want to run from your library.",attachTo:{element:'[data-tour-id="run-step-label-protocol"]',on:"bottom"},route:"/app/run",waitFor:'[data-tour-id="run-step-protocol"]'}),this.addStep({id:"run-step-params",title:"2. Configure Parameters",text:"Next, you will configure any runtime parameters defined in your protocol script.",attachTo:{element:'[data-tour-id="run-step-label-params"]',on:"bottom"}}),this.addStep({id:"run-step-machine",title:"3. Select Machine",text:"Then, choose an available robot for execution.",attachTo:{element:'[data-tour-id="run-step-label-machine"]',on:"bottom"}}),this.addStep({id:"run-step-assets",title:"4. Map Assets",text:"You will need to map the protocol's labware requirements to your actual inventory.",attachTo:{element:'[data-tour-id="run-step-label-assets"]',on:"bottom"}}),this.addStep({id:"run-step-deck",title:"5. Deck Setup",text:"Finally, verify the deck layout visually before starting the run.",attachTo:{element:'[data-tour-id="run-step-label-deck"]',on:"bottom"}}),this.addStep({id:"nav-playground",title:"Playground",text:"For direct control and testing, use the Python Playground.",attachTo:{element:'[data-tour-id="nav-playground"]',on:"right"},advanceOn:{selector:'[data-tour-id="nav-playground"]',event:"click"}}),this.addStep({id:"playground-term",title:"Playground Notebook",text:"This is a full JupyterLite environment running in your browser. You can control hardware directly using PyLabRobot commands.",attachTo:{element:'[data-tour-id="repl-notebook"]',on:"center"},route:"/app/playground",waitFor:'[data-tour-id="repl-notebook"]'}),this.addStep({id:"nav-settings",title:"Settings",text:"Finally, let's look at your preferences.",attachTo:{element:'[data-tour-id="nav-settings"]',on:"right"},advanceOn:{selector:'[data-tour-id="nav-settings"]',event:"click"}}),this.addStep({id:"settings-finish",title:"You're All Set!",text:'You can toggle themes, enable "Infinite Consumables" for easier simulation, or manage your preferences anytime from here.',attachTo:{element:'[data-tour-id="settings-onboarding"]',on:"top"},route:"/app/settings",buttons:[{text:"Finish",action:this.onComplete.bind(this),classes:"mat-mdc-raised-button mat-primary"}]})}addStep(t){let n={id:t.id,title:t.title,text:t.text,attachTo:t.attachTo,buttons:t.buttons||[{text:"Back",action:this.back.bind(this),classes:"mat-mdc-button"},{text:"Skip Section",action:this.skipSection.bind(this),classes:"mat-mdc-button"},{text:"Next",action:this.next.bind(this),classes:"mat-mdc-raised-button mat-primary"}]};t.advanceOn&&(n.advanceOn=t.advanceOn),t.route&&(n.beforeShowPromise=()=>new Promise(o=>{this.router.navigate([t.route],{queryParams:t.queryParams||{}}).then(()=>{if(t.waitFor){let i=setInterval(()=>{document.querySelector(t.waitFor)&&(clearInterval(i),o(null))},100);setTimeout(()=>{clearInterval(i),o(null)},3e3)}else setTimeout(()=>o(null),500)})})),this.tour.addStep(n)}onComplete(){this.onboarding.markTutorialComplete(),this.onboarding.clearTutorialState(),this.tour.complete()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=ct({token:e,factory:e.\u0275fac,providedIn:"root"})};export{Gt as a,Jt as b,Un as c};
